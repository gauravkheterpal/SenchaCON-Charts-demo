/*
Copyright(c) 2013
*/
var developerMode=true;var showAllLogs=false;function logMessage(a){if(developerMode&&showAllLogs){console.log(a)}}function logInfo(a){if(developerMode){console.info(a)}}function showLoadingMask(){Ext.Viewport.setMasked({xtype:"loadmask",message:"Loading..",})}function hideLoadingMask(){Ext.Viewport.setMasked(false)}function saveData(a,c){if(a.indexOf("getUnifiedData")!=0){return}if(typeof(localStorage)!="undefined"){try{localStorage.setItem(a,c)}catch(b){console.info("localstorage failed."+b);try{sessionStorage.setItem(a,c)}catch(b){console.info("sessionstorage failed"+b);createCookie(a,c,300)}}}else{createCookie(a,c,300)}}function loadData(a){var b=null;if(typeof(localStorage)!="undefined"){b=localStorage.getItem(a)}else{if(typeof(sessionStorage)!="undefined"){b=sessionStorage.getItem(a)}else{b=readCookie(a)}}return b}function eraseData(a){if(typeof(localStorage)!="undefined"){localStorage.removeItem(a)}else{eraseCookie(a)}}function createCookie(c,d,e){if(e){var b=new Date();b.setTime(b.getTime()+(e*24*60*60*1000));var a="; expires="+b.toGMTString()}else{var a=""}document.cookie=c+"="+d+a+"; path=/"}function readCookie(b){var e=b+"=";var a=document.cookie.split(";");for(var d=0;d<a.length;d++){var f=a[d];while(f.charAt(0)==" "){f=f.substring(1,f.length)}if(f.indexOf(e)==0){return f.substring(e.length,f.length)}}return null}function eraseCookie(a){createCookie(a,"",-1)}function refreshPage(){document.location.reload(true)}function clearStore(b){var a=Ext.getStore(b);a.getProxy().clear();a.data.clear();a.sync();return}function resetSettings(){clearStore("UserSettings1");clearStore("UserSettings2");clearStore("UserSettings3");clearStore("UserSettings4");refreshPage()}function clearAllStores(){clearStore("UserSettings1");clearStore("UserSettings2");clearStore("UserSettings3");clearStore("UserSettings4");clearStore("GlobalSettingsStore")}Ext.Loader.setConfig({enabled:true});Ext.application({name:"SenchaCon2013Demo",stores:["GlobalSettingsStore","UserSettings1","UserSettings2","UserSettings3","UserSettings4","TempStore"],controllers:["DatabaseTable","Pie","LineBar","Scatter","VerticalBar","HorizontalBar","Main","Init","GlobalSync","Playback","Settings","Radar","AreaBar","Gauge"],views:["Main","SettingsPanel","GlobalSettingsPanel","AddChartPanel1","AddChartPanel2","AddChartPanel3","AddChartPanel4","Panel1","Panel2","Panel3","Panel4"],launch:function(){this.creatingGraphs=false;this.panelSettings=new Array();this.panelData=new Array();this.CachedDatabaseTables=new Array();this.GranularityFieldStore=undefined;this.DatabaseTableFieldStore=undefined;this.EmptyFieldStore=[{text:"None Defined",value:"none"}];this.PanelDataFieldStore=new Array();this.PanelCategoryFieldStore=new Array();this.PanelCategoryFieldStoreWithTime=new Array();this.databaseSetting=new Array();this.Panels=new Array();this.charts=new Array();this.fullStores=new Array();this.instanceStores=new Array();this.sliders=new Array();this.loadIndex=1;this.isChartConfigured=new Array();for(i=0;i<5;i++){this.isChartConfigured[i]=false}this.groupByBarLabels=new Array();this.differentialMultiplier=new Array();for(i=0;i<6;i++){this.differentialMultiplier[i]=1}this.startDate=new Array();this.currentDate=new Array();this.currentStartDate=new Array();this.currentEndDate=new Array();this.dateSet=new Array();this.globalDateArray=new Array();for(i=0;i<6;i++){this.dateSet[i]=false}this.chartCreated=new Array();this.newChart=new Array();this.lastPlaybackAction=undefined;this.granularities=new Array();this.valueGranularities=new Array();this.chartTypes=new Array();this.xs=new Array();this.ys=new Array();this.groupBys=new Array();this.graphTitle=new Array();this.numberActivePanels="4";this.dataFieldValues=new Array();this.categoryFieldValues=new Array();this.playbackTasks=new Array();this.waitvariables=new Array();this.currentPositions=new Array();this.minimumPositions=new Array();this.maximumPositions=new Array();this.currentActivePanelIndex=1;this.playSpeed=500;this.graphMaxValueMargin=0.1;this.animateSpeed=this.playSpeed-100;this.globalStartDate;this.globalEndDate;this.firstGlobalDate;this.chartIsRunning=new Array();this.chartIsPaused=new Array();this.globalSyncPressed=false;this.nullSearchReturnedTrue=false;this.globalSliderValue;this.finishCall;this.chartSection=new Array();this.chartLengths=new Array();for(i=0;i<20;i++){this.chartLengths[i]=0}this.globalindex=0;this.chartsFinished=0;this.numberActiveCharts=0;this.chartValue=new Array();this.chartFinished=new Array();for(i=0;i<6;i++){this.chartFinished[i]=false}this.initialPosition=new Array();for(i=0;i<6;i++){this.initialPosition[i]=true}for(i=1;i<6;i++){this.chartIsRunning[i]=false}this.globalSyncChartPositions=new Array();for(i=1;i<6;i++){this.globalSyncChartPositions[i]=new Array()}this.groupByValueBar=["groupByBar1","groupByBar2","groupByBar3","groupByBar4","Other"];this.fixOrder=new Array();this.Xmax=new Array();this.Ymax=new Array();this.XmaxReceived=new Array();this.YmaxReceived=new Array();this.setDefaultValues=function(){for(i=0;i<6;i++){this.databaseSetting[i]="demo_data";this.granularities[i]="Daily";this.valueGranularities[i]=2;this.chartTypes[i]="pie";this.xs[i]="none";this.ys[i]="none";this.chartCreated[i]=false;this.startDate[i]=new Date();this.startDate[i].setHours(0,0,0,0);this.startDate[i].setFullYear(this.startDate[i].getFullYear()-2);this.startDate[i].setDate(this.startDate[i].getDate()-3);this.currentEndDate[i]=new Date();this.currentEndDate[i].setHours(0,0,0,0);this.currentEndDate[i].setFullYear(this.currentEndDate[i].getFullYear()-2);this.graphTitle[i]="Title";this.XmaxReceived[i]=false;this.YmaxReceived[i]=false}this.jsonstore=new Array();this.numberActivePanels="4";this.currentActivePanelIndex=1;this.playSpeed=3200;this.dataFieldValues=new Array();this.categoryFieldValues=new Array();this.granularities[1]="Daily";this.valueGranularities[1]=2;this.chartTypes[1]="pie";this.xs[1]="data_4";this.ys[1]="none";this.groupBys[1]="category_b";this.startDate[1]=new Date("2011-02-01");this.currentEndDate[1]=new Date("2011-02-20");this.granularities[2]="Daily";this.valueGranularities[2]=2;this.chartTypes[2]="verticalbar";this.xs[2]="date";this.ys[2]="data_1";this.groupBys[2]="category_b";this.startDate[2]=new Date("2011-02-01");this.currentEndDate[2]=new Date("2011-02-20");this.granularities[3]="Daily";this.valueGranularities[3]=2;this.chartTypes[3]="scatter";this.xs[3]="data_3";this.ys[3]="data_4";this.groupBys[3]="none";this.startDate[3]=new Date("2011-02-01");this.currentEndDate[3]=new Date("2011-02-20");this.granularities[4]="Daily";this.valueGranularities[4]=2;this.chartTypes[4]="line";this.xs[4]="category_b";this.ys[4]="data_1";this.groupBys[4]="category_d";this.startDate[4]=new Date("2011-02-01");this.currentEndDate[4]=new Date("2011-02-20")};this.setDefaultValues();Ext.get("loading").setVisible(false);Ext.Viewport.add({xtype:"senchademomain"});Ext.Viewport.add({xtype:"settingspanel"});Ext.Viewport.add({xtype:"globalsettingspanel"});for(i=0;i<6;i++){this.sliders[i]=Ext.ComponentQuery.query("slider"+i)[0]}}});Ext.define("SenchaCon2013Demo.view.SettingsPanel",{extend:"Ext.Panel",xtype:"settingspanel",requires:["Ext.Toolbar",],config:{layout:"vbox",modal:true,zIndex:10,hideOnMaskTap:true,centered:true,width:450,scroll:"vertical",hidden:true,items:[{xtype:"toolbar",maxHeight:"50px",docked:"top",flex:"1",title:"Panel Settings",},{xtype:"selectfield",id:"databaseselectfield",label:"Database:",hidden:true,value:"None",options:[{text:"None Defined",value:"None"},]},{xtype:"textfield",id:"graphtitlefield",label:"Graph Title:",hidden:true,},{xtype:"selectfield",id:"charttypefield",label:"Chart Type:",value:"None",options:[{text:"None",value:"None"},{text:"Bubble",value:"scatter"},{text:"Horizontal Bar",value:"horizontalbar"},{text:"Vertical Bar",value:"verticalbar"},{text:"Line",value:"line"},{text:"Area",value:"area"},{text:"Pie",value:"pie"},{text:"Radar",value:"radar"},{text:"Gauge",value:"gauge"},]},{xtype:"selectfield",id:"xaxisfield",label:"X-Axis:",options:[{text:"None Defined",value:"none"},]},{xtype:"selectfield",id:"yaxisfield",label:"Y-Axis:",options:[{text:"None Defined",value:"none"},]},{xtype:"selectfield",id:"groupbyfield",label:"Group By:",options:[{text:"None Defined",value:"none"},]},{xtype:"selectfield",id:"granularityfield",label:"Granularity:",},{xtype:"datepickerfield",id:"startdatefield",label:"Start Date:",name:"startdate",dateFormat:"m/d/y",picker:{yearFrom:2009,yearTo:2011,}},{xtype:"datepickerfield",id:"enddatefield",label:"End Date:",name:"enddate",dateFormat:"m/d/y",picker:{yearFrom:2009,yearTo:2011,}},{xtype:"toolbar",layout:{type:"hbox",pack:"justify"},items:[{xtype:"button",id:"clearpanelbutton",html:"Clear Panel",align:"left",iconCls:"clear",},{xtype:"button",hidden:true,id:"setfilterbutton",html:"Filters",iconCls:"add",},{xtype:"button",id:"settingscancelbutton",text:"Cancel",align:"right",iconCls:"delete",},{xtype:"button",id:"settingsdonebutton",text:"Done",ui:"action",align:"right",iconCls:"done",}]}]}});Ext.define("SenchaCon2013Demo.view.TitleBar",{extend:"Ext.TitleBar",xtype:"senchademotitlebar",requires:["Ext.TitleBar"],config:{title:"SenchaCON-Charts-Demo",docked:"top",layout:"hbox",height:"60px",width:"100%",items:[{xtype:"button",id:"settingsbutton",align:"right",text:"Settings",iconCls:"settings",},]}});Ext.define("SenchaCon2013Demo.view.GlobalSettingsPanel",{extend:"Ext.Panel",xtype:"globalsettingspanel",requires:["Ext.Toolbar",],config:{layout:"vbox",modal:true,zIndex:10,hideOnMaskTap:true,centered:true,width:530,scroll:"vertical",hidden:true,items:[{xtype:"toolbar",docked:"top",maxHeight:"50px",title:"Global Settings",flex:1},{xtype:"selectfield",id:"playspeedsetting",labelWidth:"50%",label:"Play Speed",value:"Normal",options:[{text:"Slow",value:"3000"},{text:"Normal",value:"2000"},{text:"Fast",value:"1000"}]},{xtype:"selectfield",id:"activepanelsfield",label:"Active Panels:",labelWidth:"50%",value:"4",options:[{text:"1",value:"1"},{text:"2",value:"2"},{text:"4",value:"4"}]},{xtype:"button",id:"clearcachebuttonglobalsettings",html:"Reset All Local Cache",ui:"confirm",style:"font-size: 14px; margin-left: 120px; margin-right: 120px; margin-top: 10px; margin-bottom: 5px; padding: 5px;",},{xtype:"toolbar",layout:{type:"hbox",pack:"justify"},items:[{xtype:"button",id:"globalsettingscancelbutton",text:"Cancel",align:"left",iconCls:"delete",},{xtype:"button",id:"globalsettingsdonebutton",text:"Done",ui:"action",align:"right",iconCls:"done",}]}]}});Ext.define("SenchaCon2013Demo.model.GlobalSettingsModel",{extend:"Ext.data.Model",config:{fields:[{name:"NumberOfPanels",type:"text"},{name:"PlaySpeed",type:"text"},]}});Ext.define("SenchaCon2013Demo.store.GlobalSettingsStore",{extend:"Ext.data.Store",requires:["SenchaCon2013Demo.model.GlobalSettingsModel"],config:{model:"SenchaCon2013Demo.model.GlobalSettingsModel",proxy:{type:"localstorage",id:"globalsettings"}}});Ext.define("SenchaCon2013Demo.model.DataModel",{extend:"Ext.data.Model",xtype:"datamodel",config:{fields:[{name:"length",type:"int"},{name:"groupByBar1",type:"int"},{name:"groupByBar2",type:"int"},{name:"groupByBar3",type:"int"},{name:"groupByBar4",type:"int"},{name:"Other",type:"int"},]}});Ext.define("SenchaCon2013Demo.model.UserSettings",{extend:"Ext.data.Model",config:{fields:[{name:"Database",type:"text"},{name:"GraphTitle",type:"text"},{name:"XAxis",type:"text"},{name:"YAxis",type:"text"},{name:"GroupBy",type:"text"},{name:"Granularity",type:"text"},{name:"ChartType",type:"text"},{name:"StartDate",type:"Date"},{name:"EndDate",type:"Date"},]}});Ext.define("SenchaCon2013Demo.view.Slider0",{extend:"Ext.slider.Slider",xtype:"slider0",requires:["Ext.slider.Slider"],config:{maxWidth:"600px",ui:"timeline",maxValue:31,minValue:0,flex:1,hidden:false,thumbConfig:{draggable:{translatable:{easingX:{duration:50,type:"ease-out"}}}},}});Ext.define("SenchaCon2013Demo.view.Slider1",{extend:"Ext.slider.Slider",xtype:"slider1",requires:["Ext.slider.Slider"],config:{maxWidth:"600px",ui:"timeline",maxValue:31,minValue:0,flex:1,hidden:false,thumbConfig:{draggable:{translatable:{easingX:{duration:50,type:"ease-out"}}}},}});Ext.define("SenchaCon2013Demo.view.Slider2",{extend:"Ext.slider.Slider",xtype:"slider2",requires:["Ext.slider.Slider"],config:{maxWidth:"600px",ui:"timeline",maxValue:31,minValue:0,flex:1,hidden:false,thumbConfig:{draggable:{translatable:{easingX:{duration:50,type:"ease-out"}}}},}});Ext.define("SenchaCon2013Demo.view.Slider4",{extend:"Ext.slider.Slider",xtype:"slider4",requires:["Ext.slider.Slider"],config:{maxWidth:"600px",ui:"timeline",maxValue:31,minValue:0,flex:1,hidden:false,thumbConfig:{draggable:{translatable:{easingX:{duration:50,type:"ease-out"}}}},}});Ext.define("SenchaCon2013Demo.view.Slider3",{extend:"Ext.slider.Slider",xtype:"slider3",requires:["Ext.slider.Slider"],config:{maxWidth:"600px",ui:"timeline",maxValue:31,minValue:0,flex:1,hidden:false,thumbConfig:{draggable:{translatable:{easingX:{duration:50,type:"ease-out"}}}},}});Ext.define("SenchaCon2013Demo.view.Slider5",{extend:"Ext.slider.Slider",xtype:"slider5",requires:["Ext.slider.Slider"],config:{maxWidth:"600px",ui:"timeline",maxValue:31,minValue:0,flex:1,hidden:false,thumbConfig:{draggable:{translatable:{easingX:{duration:50,type:"ease-out"}}}},}});Ext.define("SenchaCon2013Demo.view.AddChartPanel1",{extend:"Ext.Panel",xtype:"addchartpanel1",hidden:false,config:{layout:{type:"vbox",pack:"center"},id:"addchartpanel1",cls:"add-chart-panel-style",items:[{xtype:"panel",centered:true,style:"background-color: transparent; cursor: pointer;",items:[{xtype:"image",id:"chart1Image",hidden:false,autoShow:true,width:"180px",height:"180px",style:"width: 180px; height: 180px; background-size: 100%;",src:"lib/images/chart-icon.png"},{xtype:"button",iconCls:"add",html:"Add Chart",width:150,ui:"action",id:"chart1Button",style:"font-size: 14px; font-weight: normal; margin-left: 15px;",},]}]}});Ext.define("SenchaCon2013Demo.view.AddChartPanel2",{extend:"Ext.Panel",xtype:"addchartpanel2",fullscreen:true,config:{layout:{type:"vbox",pack:"center"},id:"addchartpanel2",cls:"add-chart-panel-style",items:[{xtype:"panel",fullscreen:true,centered:true,style:"background-color: transparent; cursor: pointer;",items:[{xtype:"image",id:"chart2Image",hidden:false,autoShow:true,width:"180px",height:"180px",style:"width: 180px; height: 180px; background-size: 100%;",src:"lib/images/chart-icon.png"},{xtype:"button",iconCls:"add",html:"Add Chart",width:150,ui:"action",id:"chart2Button",style:"font-size: 14px; font-weight: normal; margin-left: 15px;",},]}]}});Ext.define("SenchaCon2013Demo.view.AddChartPanel3",{extend:"Ext.Panel",xtype:"addchartpanel3",fullscreen:true,config:{layout:{type:"vbox",pack:"center"},id:"addchartpanel3",cls:"add-chart-panel-style",items:[{xtype:"panel",fullscreen:true,centered:true,style:"background-color: transparent; cursor: pointer;",items:[{xtype:"image",id:"chart3Image",hidden:false,autoShow:true,width:"180px",height:"180px",style:"width: 180px; height: 180px; background-size: 100%;",src:"lib/images/chart-icon.png"},{xtype:"button",iconCls:"add",html:"Add Chart",width:150,ui:"action",id:"chart3Button",style:"font-size: 14px; font-weight: normal; margin-left: 15px;",},]}]}});Ext.define("SenchaCon2013Demo.view.AddChartPanel4",{extend:"Ext.Panel",xtype:"addchartpanel4",fullscreen:true,config:{layout:{type:"vbox",pack:"center"},id:"addchartpanel4",cls:"add-chart-panel-style",items:[{xtype:"panel",fullscreen:true,centered:true,style:"background-color: transparent; cursor: pointer;",items:[{xtype:"image",id:"chart4Image",hidden:false,autoShow:true,width:"180px",height:"180px",style:"width: 180px; height: 180px; background-size: 100%;",src:"lib/images/chart-icon.png"},{xtype:"button",iconCls:"add",html:"Add Chart",width:150,ui:"action",id:"chart4Button",style:"font-size: 14px; font-weight: normal; margin-left: 15px;",},]}]}});Ext.define("SenchaCon2013Demo.view.Panel1",{extend:"Ext.Panel",xtype:"panel1",fullscreen:true,config:{id:"Panel1",layout:{type:"vbox",pack:"center"},flex:1,style:"padding-bottom:20px; background-color: white; color:black",items:[{xtype:"addchartpanel1",fullscreen:true,width:"100%",height:"100%",hidden:false,},]}});Ext.define("SenchaCon2013Demo.view.Panel2",{extend:"Ext.Panel",xtype:"panel2",config:{layout:{type:"vbox",pack:"center"},flex:1,style:"background-color: white; color:black",items:[{xtype:"addchartpanel2",fullscreen:true,width:"100%",height:"100%",},]}});Ext.define("SenchaCon2013Demo.view.Panel3",{extend:"Ext.Panel",xtype:"panel3",config:{layout:{type:"vbox",pack:"center"},flex:1,style:"background-color: white; color:black",items:[{xtype:"addchartpanel3",fullscreen:true,width:"100%",height:"100%",},]}});Ext.define("SenchaCon2013Demo.view.Panel4",{extend:"Ext.Panel",xtype:"panel4",config:{layout:{type:"vbox",pack:"center"},flex:1,style:"background-color: white; color:black",items:[{xtype:"addchartpanel4",fullscreen:true,width:"100%",height:"100%",},]}});var initController=undefined;var simpleLoadingScreen='<div><img width="50px" src="lib/images/loading.gif" alt="Please wait"></div>';Ext.define("SenchaCon2013Demo.controller.Init",{extend:"Ext.app.Controller",xtype:"initcontroller",config:{refs:{initController:"initcontroller",mainController:"maincontroller",mainScreen:"senchademomain",},},launch:function(){initController=this;clearAllStores();this.showMainScreen()},showMainScreen:function(){initController.getMainScreen().show();initController.getApplication().getController("Main").loadStores()},showMessageBox:function(b,a){hideLoadingMask();Ext.Msg.alert(b,a,this.handleMessageBox)},});Ext.define("CachedResponse",{responseText:"Unknown",status:"200"});var mainController;Ext.Ajax.on("beforerequest",function(e,c){var b=c.url;var d=loadData(b);if(d!=null){logMessage("Found local cached data. value= "+d);if(b.indexOf("getUnifiedData")==0){SenchaCon2013Demo.app.panelSettings[SenchaCon2013Demo.app.currentActivePanelIndex]=b;SenchaCon2013Demo.app.panelData[SenchaCon2013Demo.app.currentActivePanelIndex]=d}var a=new CachedResponse();a.responseText=d;if(typeof(c.success)!="undefined"){c.success(a);return false}else{if(typeof(c.callback)!="undefined"){c.callback(c,true,a);return false}else{return}}}});Ext.Ajax.on("requestcomplete",function(c,a,b){if(b.url.indexOf("getUnifiedData")==0){saveData(b.url,a.responseText);SenchaCon2013Demo.app.panelSettings[SenchaCon2013Demo.app.currentActivePanelIndex]=b.url;SenchaCon2013Demo.app.panelData[SenchaCon2013Demo.app.currentActivePanelIndex]=a.responseText}hideLoadingMask()});Ext.define("SenchaCon2013Demo.controller.Main",{extend:"Ext.app.Controller",xtype:"maincontroller",requires:["Ext.chart.axis.Numeric","Ext.chart.axis.Category","Ext.chart.series.Scatter","Ext.chart.series.Bar","Ext.util.Format","Ext.MessageBox","SenchaCon2013Demo.model.DataModel"],config:{refs:{mainController:"maincontroller",dataModel:"datamodel",mainContainer:"senchademomain",chart1:"chart[id=chart1]",chart2:"chart[id=chart2]",chart3:"chart[id=chart3]",chart4:"chart[id=chart4]",chart5:"chart[id=chart5]",panel1:"panel1",panel2:"panel2",panel3:"panel3",panel4:"panel4",slider0:"slider0",slider1:"slider1",slider2:"slider2",slider3:"slider3",slider4:"slider4",slider5:"slider5",fourPanelLayout:"fourpanellayout",bottomTwoPanelLayout:"bottomtwopanellayout",topTwoPanelLayout:"toptwopanellayout",settingsButton:"button[id=settingsbutton]",globalSyncButton:"segmentedbutton[id=globalsynctogglebutton]",},control:{chart1:{tap:"setFocusOnPanel1"},chart2:{tap:"setFocusOnPanel2"},chart3:{tap:"setFocusOnPanel3"},chart4:{tap:"setFocusOnPanel4"},panel1:{tap:"setFocusOnPanel1"},panel2:{tap:"setFocusOnPanel2"},panel3:{tap:"setFocusOnPanel3"},panel4:{tap:"setFocusOnPanel4"},}},launch:function(){mainController=this},clearAllPanels:function(){for(i=0;i<SenchaCon2013Demo.app.newChart.length;i++){var a=SenchaCon2013Demo.app.newChart[i];if(a!=undefined){if(a.getLegend()!=undefined){a.getLegend().destroy()}a.destroy()}}},handleTitleBarButtons:function(){this.getSettingsButton().setDisabled(false);this.getSettingsButton().show()},loadStores:function(){this.handleTitleBarButtons();this.checkForConfiguredGraphPanels();SenchaCon2013Demo.app.creatingGraphs=true;Ext.getStore("GlobalSettingsStore").load();if(Ext.getStore("GlobalSettingsStore").getData().items[0]!=undefined){SenchaCon2013Demo.app.playSpeed=Ext.getStore("GlobalSettingsStore").getData().items[0].getData().playSpeed;SenchaCon2013Demo.app.numberActivePanels=Ext.getStore("GlobalSettingsStore").getData().items[0].getData().NumberOfPanels}this.getApplication().getController("Settings").updateChartAnimationSettings();this.changePanels();var a=1;for(;a<=SenchaCon2013Demo.app.numberActivePanels;a++){Ext.getStore("UserSettings"+a).load();if(Ext.getStore("UserSettings"+a).getData().items[0]!=undefined){Ext.get("chart"+a+"Button").hide();Ext.get("chart"+a+"Image").hide();SenchaCon2013Demo.app.databaseSetting[a]=Ext.getStore("UserSettings"+a).getData().items[0].getData().Database;SenchaCon2013Demo.app.graphTitle[a]=Ext.getStore("UserSettings"+a).getData().items[0].getData().GraphTitle;SenchaCon2013Demo.app.xs[a]=Ext.getStore("UserSettings"+a).getData().items[0].getData().XAxis;SenchaCon2013Demo.app.ys[a]=Ext.getStore("UserSettings"+a).getData().items[0].getData().YAxis;SenchaCon2013Demo.app.granularities[a]=Ext.getStore("UserSettings"+a).getData().items[0].getData().Granularity;SenchaCon2013Demo.app.chartTypes[a]=Ext.getStore("UserSettings"+a).getData().items[0].getData().ChartType;SenchaCon2013Demo.app.groupBys[a]=Ext.getStore("UserSettings"+a).getData().items[0].getData().GroupBy;SenchaCon2013Demo.app.startDate[a]=new Date(Ext.getStore("UserSettings"+a).getData().items[0].getData().StartDate);SenchaCon2013Demo.app.currentStartDate[a]=new Date(Ext.getStore("UserSettings"+a).getData().items[0].getData().StartDate);SenchaCon2013Demo.app.currentDate[a]=new Date(Ext.getStore("UserSettings"+a).getData().items[0].getData().StartDate);SenchaCon2013Demo.app.currentEndDate[a]=new Date(Ext.getStore("UserSettings"+a).getData().items[0].getData().EndDate);SenchaCon2013Demo.app.currentActivePanelIndex=a;switch(SenchaCon2013Demo.app.granularities[SenchaCon2013Demo.app.currentActivePanelIndex]){case"Hourly":SenchaCon2013Demo.app.valueGranularities[SenchaCon2013Demo.app.currentActivePanelIndex]=1;break;case"Daily":SenchaCon2013Demo.app.valueGranularities[SenchaCon2013Demo.app.currentActivePanelIndex]=2;break;case"Weekly":SenchaCon2013Demo.app.valueGranularities[SenchaCon2013Demo.app.currentActivePanelIndex]=3;break;case"Monthly":SenchaCon2013Demo.app.valueGranularities[SenchaCon2013Demo.app.currentActivePanelIndex]=4;break}showLoadingMask();this.chartSetUp()}else{if(SenchaCon2013Demo.app.publicMode){Ext.get("chart"+a+"Button").hide()}else{Ext.get("addchartpanel"+a).show();Ext.get("chart"+a+"Button").show();Ext.get("chart"+a+"Image").show()}Ext.ComponentQuery.query("addchartpanel"+a)[0].setHtml("")}}this.changePanels();SenchaCon2013Demo.app.currentActivePanelIndex=1;this.setFocusOnPanel(SenchaCon2013Demo.app.currentActivePanelIndex);this.addPanelClickListener();hideLoadingMask();SenchaCon2013Demo.app.creatingGraphs=false},addPanelClickListener:function(){Ext.ComponentQuery.query("panel1")[0].element.on({singletap:{fn:function(){mainController.setFocusOnPanel(1)}}});Ext.ComponentQuery.query("panel2")[0].element.on({singletap:{fn:function(){mainController.setFocusOnPanel(2)}}});Ext.ComponentQuery.query("panel3")[0].element.on({singletap:{fn:function(){mainController.setFocusOnPanel(3)}}});Ext.ComponentQuery.query("panel4")[0].element.on({singletap:{fn:function(){mainController.setFocusOnPanel(4)}}})},changePanels:function(){if(SenchaCon2013Demo.app.numberActivePanels=="1"){switch(SenchaCon2013Demo.app.currentActivePanelIndex){case 1:this.getPanel2().hide();this.getBottomTwoPanelLayout().hide();break;case 2:this.getPanel1().hide();this.getBottomTwoPanelLayout().hide();break;case 3:this.getPanel4().hide();this.getTopTwoPanelLayout().hide();break;case 4:this.getPanel3().hide();this.getTopTwoPanelLayout().hide();break}}else{if(SenchaCon2013Demo.app.numberActivePanels=="2"){if(SenchaCon2013Demo.app.currentActivePanelIndex==1||SenchaCon2013Demo.app.currentActivePanelIndex==2){this.getTopTwoPanelLayout().show();this.getPanel1().show();this.getPanel2().show();this.getBottomTwoPanelLayout().hide()}else{this.getBottomTwoPanelLayout().show();this.getPanel3().show();this.getPanel4().show();this.getTopTwoPanelLayout().hide()}}else{this.getTopTwoPanelLayout().show();this.getBottomTwoPanelLayout().show();this.getPanel1().show();this.getPanel2().show();this.getPanel3().show();this.getPanel4().show()}}},chartSetUp:function(){mainController=this;this.checkForConfiguredGraphPanels();if(SenchaCon2013Demo.app.dateSet[SenchaCon2013Demo.currentActivePanelIndex]==true){showLoadingMask()}mainController.changeDateRangeLabel(SenchaCon2013Demo.currentActivePanelIndex);var a=SenchaCon2013Demo.app.currentActivePanelIndex;Ext.ComponentQuery.query("panel"+a)[0].setHtml("");var b=Ext.ComponentQuery.query("chart[id=chart"+a+"]")[0];if(b!=undefined){b.destroy()}SenchaCon2013Demo.app.chartCreated[SenchaCon2013Demo.app.currentActivePanelIndex]=false;mainController.configureGranularities(SenchaCon2013Demo.app.currentActivePanelIndex,SenchaCon2013Demo.app.startDate[SenchaCon2013Demo.app.currentActivePanelIndex],SenchaCon2013Demo.app.currentEndDate[SenchaCon2013Demo.app.currentActivePanelIndex])},getModelTypeForField:function(a){if(a.fieldType=="DATA_FIELD"){return"int"}if(a.fieldType=="CATEGORY_FIELD"||a.fieldType=="TIME_CATEGORY_FIELD"){return"text"}if(a.fieldType=="TIME_FIELD"){return"Date"}},changeModelFields:function(){var e=SenchaCon2013Demo.app.databaseSetting[SenchaCon2013Demo.app.currentActivePanelIndex];var f=this.getApplication().getController("DatabaseTable").getDatabaseTableIdForTableName(e);var c=this.getApplication().getController("DatabaseTable").getDatabaseTablesFieldsForDatabaseTableId(f);var b=new Array();if(c!=undefined){var a={name:"length",type:"int"};b.push(a);a={name:"groupByBar1",type:"int"};b.push(a);a={name:"groupByBar2",type:"int"};b.push(a);a={name:"groupByBar3",type:"int"};b.push(a);a={name:"groupByBar4",type:"int"};b.push(a);a={name:"Other",type:"text"};b.push(a);for(var d=0;d<c.length;d++){a={name:c[d].fieldLabel,type:mainController.getModelTypeForField(c[d])};b.push(a)}}SenchaCon2013Demo.model.DataModel.setFields(b)},configureGranularities:function(e,b,f){this.changeModelFields();var l=f.getFullYear()-b.getFullYear();var h=12*l+(f.getMonth()-b.getMonth());if(h==0){h=1}var c=this.DatedaysBetween(b,f);var d=Math.ceil(c/7);if(d==0){d=1}var g=this.DatehoursBetween(b,f);if(g<=0){g=24}var a=new Array();switch(SenchaCon2013Demo.app.granularities[e]){case"Hourly":SenchaCon2013Demo.app.differentialMultiplier[SenchaCon2013Demo.app.currentActivePanelIndex]=Math.round(100/g);Ext.ComponentQuery.query("slider"+e)[0].setMaxValue(SenchaCon2013Demo.app.differentialMultiplier[SenchaCon2013Demo.app.currentActivePanelIndex]*g);this.generateURLForChartData(a,e,g);break;case"Daily":SenchaCon2013Demo.app.differentialMultiplier[SenchaCon2013Demo.app.currentActivePanelIndex]=Math.round(100/c);Ext.ComponentQuery.query("slider"+e)[0].setMaxValue(SenchaCon2013Demo.app.differentialMultiplier[SenchaCon2013Demo.app.currentActivePanelIndex]*c);this.generateURLForChartData(a,e,c);break;case"Weekly":SenchaCon2013Demo.app.differentialMultiplier[SenchaCon2013Demo.app.currentActivePanelIndex]=Math.round(100/(d-1));Ext.ComponentQuery.query("slider"+e)[0].setMaxValue(SenchaCon2013Demo.app.differentialMultiplier[SenchaCon2013Demo.app.currentActivePanelIndex]*(d-1));mod=d%7;seven=7;if(mod==0){this.generateURLForChartData(a,e,d)}else{this.generateURLForChartData(a,e,d-1)}break;case"Monthly":SenchaCon2013Demo.app.differentialMultiplier[SenchaCon2013Demo.app.currentActivePanelIndex]=Math.round(100/h);Ext.ComponentQuery.query("slider"+e)[0].setMaxValue(SenchaCon2013Demo.app.differentialMultiplier[SenchaCon2013Demo.app.currentActivePanelIndex]*h);this.generateURLForChartData(a,e,h);break}},DatedaysBetween:function(f,e){var b=1000*60*60*24;var d=f.getTime();var c=e.getTime();var a=c-d;return Math.ceil(a/b)},DatehoursBetween:function(f,e){var c=1000*60*60;var d=f.getTime();var b=e.getTime();var a=b-d;return Math.ceil(a/c)},decodeUnifiedData:function(c,a,b){logMessage("JSON for decoding is=="+c.responseText);response=Ext.JSON.decode(c.responseText.trim());dateArray=new Array();SenchaCon2013Demo.app.groupByBarLabels=response.groupByBarArray;this.changeModelFields();for(index=0;index<response.data.length;index++){dateArray[index]=response.dateArray[index];b[index]=Ext.create("Ext.data.Store",{autoLoad:true,model:"SenchaCon2013Demo.model.DataModel",data:response.data[index],proxy:{type:"memory",reader:{type:"json",rootProperty:"data"}}})}SenchaCon2013Demo.app.globalDateArray[SenchaCon2013Demo.app.currentActivePanelIndex]=dateArray;SenchaCon2013Demo.app.jsonstore[SenchaCon2013Demo.app.currentActivePanelIndex]=b;SenchaCon2013Demo.app.dataFieldValues[SenchaCon2013Demo.app.currentActivePanelIndex]=response.dataField;SenchaCon2013Demo.app.categoryFieldValues[SenchaCon2013Demo.app.currentActivePanelIndex]=response.categoryField;if(a>5){return}SenchaCon2013Demo.app.maximumPositions[a]=Ext.ComponentQuery.query("slider"+a)[0].getMaxValue();if(response.yMax!=undefined){SenchaCon2013Demo.app.Ymax[SenchaCon2013Demo.app.currentActivePanelIndex]=response.yMax;SenchaCon2013Demo.app.YmaxReceived[SenchaCon2013Demo.app.currentActivePanelIndex]=true;if(SenchaCon2013Demo.app.Ymax[SenchaCon2013Demo.app.currentActivePanelIndex]!=undefined&&SenchaCon2013Demo.app.Ymax[SenchaCon2013Demo.app.currentActivePanelIndex]>0){SenchaCon2013Demo.app.Ymax[SenchaCon2013Demo.app.currentActivePanelIndex]=parseInt(SenchaCon2013Demo.app.Ymax[SenchaCon2013Demo.app.currentActivePanelIndex])+(parseInt(SenchaCon2013Demo.app.Ymax[SenchaCon2013Demo.app.currentActivePanelIndex])*SenchaCon2013Demo.app.graphMaxValueMargin);if(SenchaCon2013Demo.app.Ymax[SenchaCon2013Demo.app.currentActivePanelIndex]==0){SenchaCon2013Demo.app.Ymax[SenchaCon2013Demo.app.currentActivePanelIndex]=10}}}if(response.xMax!=undefined){SenchaCon2013Demo.app.Xmax[SenchaCon2013Demo.app.currentActivePanelIndex]=response.xMax;SenchaCon2013Demo.app.XmaxReceived[SenchaCon2013Demo.app.currentActivePanelIndex]=true;if(SenchaCon2013Demo.app.Xmax[SenchaCon2013Demo.app.currentActivePanelIndex]!=undefined&&SenchaCon2013Demo.app.Xmax[SenchaCon2013Demo.app.currentActivePanelIndex]>0){SenchaCon2013Demo.app.Xmax[SenchaCon2013Demo.app.currentActivePanelIndex]=parseInt(SenchaCon2013Demo.app.Xmax[SenchaCon2013Demo.app.currentActivePanelIndex])+(parseInt(SenchaCon2013Demo.app.Xmax[SenchaCon2013Demo.app.currentActivePanelIndex])*SenchaCon2013Demo.app.graphMaxValueMargin);if(SenchaCon2013Demo.app.Xmax[SenchaCon2013Demo.app.currentActivePanelIndex]==0){SenchaCon2013Demo.app.Xmax[SenchaCon2013Demo.app.currentActivePanelIndex]=10}}}this.getApplication().getController("Playback").resetFunction()},generateURLForChartData:function(c,e,d){var p=SenchaCon2013Demo.app.currentActivePanelIndex;var h=SenchaCon2013Demo.app.databaseSetting[p];var l=SenchaCon2013Demo.app.chartTypes[p];var m=dateFormat(SenchaCon2013Demo.app.startDate[p],"yyyy-mm-dd");var f=dateFormat(SenchaCon2013Demo.app.currentEndDate[p],"yyyy-mm-dd");var g=SenchaCon2013Demo.app.granularities[p];var n=SenchaCon2013Demo.app.xs[p];var b=SenchaCon2013Demo.app.ys[p];var o=SenchaCon2013Demo.app.groupBys[p];var a="getUnifiedData.do?databaseName="+h+"&chartType="+l+"&absStartDate="+m+"&absEndDate="+f+"&differential="+d+"&granularity="+g+"&x_axis="+n+"&y_axis="+b+"&groupBy="+o;this.getUnifiedData(a,e,c)},getUnifiedData:function(a,b,c){startTime=new Date();Ext.Ajax.request({url:a,disableCaching:false,success:function(d){mainController.decodeUnifiedData(d,b,c)},failure:function(d){hideLoadingMask();logMessage("Unified Request Failed for URL-"+a)},})},setFocusOnPanel:function(a){if(a!=0){if(this.getGlobalSyncButton().getPressedButtons().length!=0){this.getSettingsButton().setDisabled(false)}this.getGlobalSyncButton().setPressedButtons([false]);this.getFourPanelLayout().setCls("unselected-panel");this.getPanel1().setCls("unselected-panel");this.getPanel2().setCls("unselected-panel");this.getPanel3().setCls("unselected-panel");this.getPanel4().setCls("unselected-panel");this.getSlider0().hide();this.getSlider2().hide();this.getSlider3().hide();this.getSlider4().hide();this.getSlider1().hide();if(a!=5&&a!=0){Ext.ComponentQuery.query("panel"+a)[0].setCls("selected-panel")}Ext.ComponentQuery.query("slider"+a)[0].show();SenchaCon2013Demo.app.currentActivePanelIndex=a;this.getApplication().getController("Playback").pauseFunction();this.changeDateRangeLabel(a)}},setFocusOnPanel1:function(){this.setFocusOnPanel(1)},setFocusOnPanel2:function(){this.setFocusOnPanel(2)},setFocusOnPanel3:function(){this.setFocusOnPanel(3)},setFocusOnPanel4:function(){this.setFocusOnPanel(4)},changeDateRangeLabel:function(d){if(SenchaCon2013Demo.app.isChartConfigured[d]){try{var a=dateFormat(SenchaCon2013Demo.app.startDate[d],"m/d/yy");var e=dateFormat(SenchaCon2013Demo.app.currentEndDate[d],"m/d/yy");var b="<p class ='dateRangeLabelClass'>"+a+" - "+e+"</p>";Ext.ComponentQuery.query("container[id=daterangelabel]")[0].setHtml(b)}catch(c){Ext.ComponentQuery.query("container[id=daterangelabel]")[0].setHtml("")}}else{Ext.ComponentQuery.query("container[id=daterangelabel]")[0].setHtml("")}},checkForConfiguredGraphPanels:function(){var a=1;for(;a<=SenchaCon2013Demo.app.numberActivePanels;a++){Ext.getStore("UserSettings"+a).load();if(Ext.getStore("UserSettings"+a).getData().items[0]!=undefined){SenchaCon2013Demo.app.isChartConfigured[a]=true}}},});Ext.define("SenchaCon2013Demo.controller.Gauge",{extend:"Ext.app.Controller",xtype:"gaugecontroller",config:{refs:{initController:"initcontroller",mainController:"maincontroller",},},launch:function(){},createGaugeChart:function(a,d,b){var c=SenchaCon2013Demo.app.newChart[SenchaCon2013Demo.app.currentActivePanelIndex];if(c!=undefined){if(c.getLegend()!=undefined){c.getLegend().destroy()}c.destroy()}SenchaCon2013Demo.app.newChart[SenchaCon2013Demo.app.currentActivePanelIndex]=Ext.create("Ext.chart.SpaceFillingChart",{id:"chart"+SenchaCon2013Demo.app.currentActivePanelIndex,store:a,flex:1,animate:{easing:"elasticIn",duration:SenchaCon2013Demo.app.animateSpeed},innerPadding:{top:15,left:0,right:0,bottom:25},series:[{type:"gauge",field:SenchaCon2013Demo.app.dataFieldValues[SenchaCon2013Demo.app.currentActivePanelIndex],minimum:0,maximum:SenchaCon2013Demo.app.Xmax[SenchaCon2013Demo.app.currentActivePanelIndex],donut:30,style:{miterLimit:10,lineCap:"miter",lineWidth:2},subStyle:{fillStyle:["#115fa6","lightgrey"]}}]})},});Ext.define("SenchaCon2013Demo.controller.Pie",{extend:"Ext.app.Controller",xtype:"piecontroller",config:{refs:{initController:"initcontroller",mainController:"maincontroller",},},launch:function(){},createPieChart:function(b,e,a,c){var d=SenchaCon2013Demo.app.newChart[SenchaCon2013Demo.app.currentActivePanelIndex];if(d!=undefined){if(d.getLegend()!=undefined){d.getLegend().destroy()}d.destroy()}SenchaCon2013Demo.app.newChart[SenchaCon2013Demo.app.currentActivePanelIndex]=Ext.create("Ext.chart.PolarChart",{id:"chart"+SenchaCon2013Demo.app.currentActivePanelIndex,store:b,flex:1,interactions:["rotate"],legend:{position:"right",},innerPadding:{top:15,left:0,right:0,bottom:25},colors:["#115fa6","#94ae0a","#a61120","#ff8809","#ffd13e","#a61187","#24ad9a","#7c7474","#a66111"],series:[{type:"pie",labelField:a,xField:e,donut:0,showInLegend:true,contrast:true,animate:{duration:SenchaCon2013Demo.app.animateSpeed,delay:SenchaCon2013Demo.app.animateSpeed/2,easing:"ease"},label:{field:a,display:"rotate",contrast:true,},labelOverflowPadding:10,}],})},});Ext.define("SenchaCon2013Demo.controller.HorizontalBar",{extend:"Ext.app.Controller",xtype:"horizontalbarcontroller",config:{refs:{initController:"initcontroller",mainController:"maincontroller",},},launch:function(){},createHorizontalBarChart:function(a,c,b){var d=SenchaCon2013Demo.app.newChart[SenchaCon2013Demo.app.currentActivePanelIndex];if(d!=undefined){if(d.getLegend()!=undefined){d.getLegend().destroy()}d.destroy()}if(b==undefined){this.createHorizontalBarChartGroupByNone(a,c)}else{SenchaCon2013Demo.app.groupByValueBar=new Array();for(i=0;i<b.length;i++){SenchaCon2013Demo.app.groupByValueBar[i]="groupByBar"+(i+1)}if(b.length!=0&&b[b.length-1]!="other"){b[b.length]="Other";SenchaCon2013Demo.app.groupByValueBar[SenchaCon2013Demo.app.groupByValueBar]="Other"}this.createHorizontalBarChartGroupBy(a,c,b)}},createHorizontalBarChartGroupByNone:function(a,b){SenchaCon2013Demo.app.newChart[SenchaCon2013Demo.app.currentActivePanelIndex]=Ext.create("Ext.chart.CartesianChart",{id:"chart"+SenchaCon2013Demo.app.currentActivePanelIndex,flipXY:true,flex:1,store:a,insetPadding:{top:15,left:0,right:0,bottom:25},animate:{duration:SenchaCon2013Demo.app.animateSpeed,delay:SenchaCon2013Demo.app.animateSpeed/2,easing:"ease"},axes:[{type:"numeric",position:"bottom",style:{strokeStyle:"black",},label:{fontFamily:"Helvetica",color:"#4270A2"},fields:SenchaCon2013Demo.app.dataFieldValues[SenchaCon2013Demo.app.currentActivePanelIndex],minimum:0,maximum:SenchaCon2013Demo.app.Xmax[SenchaCon2013Demo.app.currentActivePanelIndex],title:{text:SenchaCon2013Demo.app.dataFieldValues[SenchaCon2013Demo.app.currentActivePanelIndex],fillStyle:"#4270A2",},},{type:"category",position:"left",label:{fontFamily:"Helvetica",color:"#4270A2"},fields:SenchaCon2013Demo.app.categoryFieldValues[SenchaCon2013Demo.app.currentActivePanelIndex],style:{strokeStyle:"black",},title:{text:SenchaCon2013Demo.app.categoryFieldValues[SenchaCon2013Demo.app.currentActivePanelIndex],fillStyle:"#4270A2",},}],series:[{type:"bar",xField:SenchaCon2013Demo.app.categoryFieldValues[SenchaCon2013Demo.app.currentActivePanelIndex],yField:SenchaCon2013Demo.app.dataFieldValues[SenchaCon2013Demo.app.currentActivePanelIndex],axis:"left",highlight:true,showInLegend:false,style:{stroke:"rgb(40,40,40)",},subStyle:{fill:["#115fa6","#94ae0a","#a61120","#ff8809","#ffd13e","#a61187","#24ad9a","#7c7474","#a66111"]}}]})},createHorizontalBarChartGroupBy:function(a,c,b){SenchaCon2013Demo.app.newChart[SenchaCon2013Demo.app.currentActivePanelIndex]=Ext.create("Ext.chart.CartesianChart",{id:"chart"+SenchaCon2013Demo.app.currentActivePanelIndex,flipXY:true,flex:1,store:a,insetPadding:{top:15,left:0,right:0,bottom:25},legend:{position:"right"},axes:[{type:"numeric",position:"bottom",style:{strokeStyle:"black",},label:{fontFamily:"Helvetica",color:"#4270A2"},minimum:0,maximum:SenchaCon2013Demo.app.Xmax[SenchaCon2013Demo.app.currentActivePanelIndex],title:{text:SenchaCon2013Demo.app.dataFieldValues[SenchaCon2013Demo.app.currentActivePanelIndex],fillStyle:"#4270A2",},},{type:"category",position:"left",label:{fontFamily:"Helvetica",color:"#4270A2"},fields:SenchaCon2013Demo.app.categoryFieldValues[SenchaCon2013Demo.app.currentActivePanelIndex],style:{strokeStyle:"black",},title:{text:SenchaCon2013Demo.app.categoryFieldValues[SenchaCon2013Demo.app.currentActivePanelIndex],fillStyle:"#4270A2",},}],series:[{type:"bar",xField:SenchaCon2013Demo.app.categoryFieldValues[SenchaCon2013Demo.app.currentActivePanelIndex],yField:SenchaCon2013Demo.app.groupByValueBar,title:b,axis:"left",highlight:true,animate:{duration:SenchaCon2013Demo.app.animateSpeed,delay:SenchaCon2013Demo.app.animateSpeed/2,easing:"ease"},style:{stroke:"rgb(40,40,40)",},subStyle:{fill:["#115fa6","#94ae0a","#a61120","#ff8809","#ffd13e","#a61187","#24ad9a","#7c7474","#a66111"]}}]})},});Ext.define("SenchaCon2013Demo.controller.LineBar",{extend:"Ext.app.Controller",xtype:"linebarcontroller",config:{refs:{initController:"initcontroller",mainController:"maincontroller",}},launch:function(){},createLineChart:function(a,c,b){var d=SenchaCon2013Demo.app.newChart[SenchaCon2013Demo.app.currentActivePanelIndex];if(d!=undefined){if(d.getLegend()!=undefined){d.getLegend().destroy()}d.destroy()}if(b==undefined){this.createLineChartGroupByNone(a,c)}else{SenchaCon2013Demo.app.groupByValueBar=new Array();for(i=0;i<b.length;i++){SenchaCon2013Demo.app.groupByValueBar[i]="groupByBar"+(i+1)}if(b.length!=0&&b[b.length-1]!="other"){b[b.length]="Other";SenchaCon2013Demo.app.groupByValueBar[SenchaCon2013Demo.app.groupByValueBar]="Other"}if(b.length==2){this.createLineChartGroupBy1(a,c,b)}else{if(b.length==3){this.createLineChartGroupBy2(a,c,b)}else{if(b.length==4){this.createLineChartGroupBy3(a,c,b)}else{if(b.length==5){this.createLineChartGroupBy4(a,c,b)}}}}}},createLineChartGroupByNone:function(a,b){SenchaCon2013Demo.app.newChart[SenchaCon2013Demo.app.currentActivePanelIndex]=Ext.create("Ext.chart.CartesianChart",{id:"chart"+SenchaCon2013Demo.app.currentActivePanelIndex,flex:1,store:a,shadow:true,insetPadding:{top:15,left:0,right:0,bottom:25},animate:{duration:SenchaCon2013Demo.app.animateSpeed,delay:SenchaCon2013Demo.app.animateSpeed/2,easing:"ease"},innerPadding:{top:15,left:0,right:0,bottom:25},axes:[{type:"numeric",position:"left",style:{strokeStyle:"black",shadowColor:"black",},label:{fontFamily:"Helvetica",color:"#4270A2"},fields:SenchaCon2013Demo.app.dataFieldValues[SenchaCon2013Demo.app.currentActivePanelIndex],minimum:0,maximum:SenchaCon2013Demo.app.Ymax[SenchaCon2013Demo.app.currentActivePanelIndex],title:{text:SenchaCon2013Demo.app.dataFieldValues[SenchaCon2013Demo.app.currentActivePanelIndex],strokeStyle:"#4270A2",fillStyle:"#4270A2",shadowColor:"black",},},{type:"category",position:"bottom",label:{fontFamily:"Helvetica",color:"#4270A2"},fields:SenchaCon2013Demo.app.categoryFieldValues[SenchaCon2013Demo.app.currentActivePanelIndex],style:{strokeStyle:"black",shadowColor:"black",},title:{text:SenchaCon2013Demo.app.categoryFieldValues[SenchaCon2013Demo.app.currentActivePanelIndex],strokeStyle:"#4270A2",fillStyle:"#4270A2",shadowColor:"black",},}],series:[{type:"line",xField:SenchaCon2013Demo.app.categoryFieldValues[SenchaCon2013Demo.app.currentActivePanelIndex],yField:SenchaCon2013Demo.app.dataFieldValues[SenchaCon2013Demo.app.currentActivePanelIndex],axis:"bottom",highlight:true,showInLegend:false,shadow:true,animate:{duration:SenchaCon2013Demo.app.animateSpeed,delay:SenchaCon2013Demo.app.animateSpeed/2,easing:"ease"},style:{stroke:"#115fa6",fillOpacity:0,lineWidth:3,smooth:true,},subStyle:{fill:["#115fa6","#94ae0a","#a61120","#ff8809","#ffd13e","#a61187","#24ad9a","#7c7474","#a66111"]}}]})},createLineChartGroupBy1:function(a,c,b){SenchaCon2013Demo.app.newChart[SenchaCon2013Demo.app.currentActivePanelIndex]=Ext.create("Ext.chart.CartesianChart",{id:"chart"+SenchaCon2013Demo.app.currentActivePanelIndex,flex:1,store:a,shadow:true,insetPadding:{top:15,left:0,right:0,bottom:25},animate:{duration:SenchaCon2013Demo.app.animateSpeed,delay:SenchaCon2013Demo.app.animateSpeed/2,easing:"ease"},legend:{position:"right"},axes:[{type:"numeric",position:"left",style:{strokeStyle:"black",shadowColor:"black",},label:{fontFamily:"Helvetica",color:"#4270A2"},minimum:0,maximum:SenchaCon2013Demo.app.Ymax[SenchaCon2013Demo.app.currentActivePanelIndex],title:{text:SenchaCon2013Demo.app.dataFieldValues[SenchaCon2013Demo.app.currentActivePanelIndex],strokeStyle:"#4270A2",fillStyle:"#4270A2",shadowColor:"black",},},{type:"category",position:"bottom",label:{fontFamily:"Helvetica",color:"#4270A2"},fields:SenchaCon2013Demo.app.categoryFieldValues[SenchaCon2013Demo.app.currentActivePanelIndex],style:{strokeStyle:"black",shadowColor:"black",},title:{text:SenchaCon2013Demo.app.categoryFieldValues[SenchaCon2013Demo.app.currentActivePanelIndex],strokeStyle:"#4270A2",fillStyle:"#4270A2",shadowColor:"black",},}],series:[{type:"line",xField:SenchaCon2013Demo.app.categoryFieldValues[SenchaCon2013Demo.app.currentActivePanelIndex],yField:SenchaCon2013Demo.app.groupByValueBar[0],title:b[0],axis:"bottom",highlight:true,showInLegend:true,shadow:true,animate:{duration:SenchaCon2013Demo.app.animateSpeed,delay:SenchaCon2013Demo.app.animateSpeed/2,easing:"ease"},style:{stroke:"#115fa6",fillOpacity:0,lineWidth:3,smooth:true,},marker:{type:"circle",radius:4,lineWidth:3}},{type:"line",xField:SenchaCon2013Demo.app.categoryFieldValues[SenchaCon2013Demo.app.currentActivePanelIndex],yField:SenchaCon2013Demo.app.groupByValueBar[1],title:b[1],axis:"bottom",highlight:true,showInLegend:true,shadow:true,animate:{duration:SenchaCon2013Demo.app.animateSpeed,delay:SenchaCon2013Demo.app.animateSpeed/2,easing:"ease"},style:{stroke:"#94ae0a",fillOpacity:0,lineWidth:3,smooth:true,},marker:{type:"circle",radius:4,lineWidth:3}},]})},createLineChartGroupBy2:function(a,c,b){SenchaCon2013Demo.app.newChart[SenchaCon2013Demo.app.currentActivePanelIndex]=Ext.create("Ext.chart.CartesianChart",{id:"chart"+SenchaCon2013Demo.app.currentActivePanelIndex,flex:1,store:a,shadow:true,insetPadding:{top:15,left:0,right:0,bottom:25},animate:{duration:SenchaCon2013Demo.app.animateSpeed,delay:SenchaCon2013Demo.app.animateSpeed/2,easing:"ease"},legend:{position:"right"},axes:[{type:"numeric",position:"left",style:{strokeStyle:"black",shadowColor:"black",},label:{fontFamily:"Helvetica",color:"#4270A2"},minimum:0,maximum:SenchaCon2013Demo.app.Ymax[SenchaCon2013Demo.app.currentActivePanelIndex],title:{text:SenchaCon2013Demo.app.dataFieldValues[SenchaCon2013Demo.app.currentActivePanelIndex],strokeStyle:"#4270A2",fillStyle:"#4270A2",shadowColor:"black",},},{type:"category",position:"bottom",label:{fontFamily:"Helvetica",color:"#4270A2"},fields:SenchaCon2013Demo.app.categoryFieldValues[SenchaCon2013Demo.app.currentActivePanelIndex],style:{strokeStyle:"black",shadowColor:"black",},title:{text:SenchaCon2013Demo.app.categoryFieldValues[SenchaCon2013Demo.app.currentActivePanelIndex],strokeStyle:"#4270A2",fillStyle:"#4270A2",shadowColor:"black",},}],series:[{type:"line",xField:SenchaCon2013Demo.app.categoryFieldValues[SenchaCon2013Demo.app.currentActivePanelIndex],yField:SenchaCon2013Demo.app.groupByValueBar[0],title:b[0],axis:"bottom",highlight:true,showInLegend:true,shadow:true,animate:{duration:SenchaCon2013Demo.app.animateSpeed,delay:SenchaCon2013Demo.app.animateSpeed/2,easing:"ease"},style:{stroke:"#115fa6",fillOpacity:0,lineWidth:3,smooth:true,},marker:{type:"circle",radius:4,lineWidth:3}},{type:"line",xField:SenchaCon2013Demo.app.categoryFieldValues[SenchaCon2013Demo.app.currentActivePanelIndex],yField:SenchaCon2013Demo.app.groupByValueBar[1],title:b[1],axis:"bottom",highlight:true,showInLegend:true,shadow:true,animate:{duration:SenchaCon2013Demo.app.animateSpeed,delay:SenchaCon2013Demo.app.animateSpeed/2,easing:"ease"},style:{stroke:"#94ae0a",fillOpacity:0,lineWidth:3,smooth:true,},marker:{type:"circle",radius:4,lineWidth:3}},{type:"line",xField:SenchaCon2013Demo.app.categoryFieldValues[SenchaCon2013Demo.app.currentActivePanelIndex],yField:SenchaCon2013Demo.app.groupByValueBar[2],title:b[2],axis:"bottom",highlight:true,showInLegend:true,shadow:true,animate:{duration:SenchaCon2013Demo.app.animateSpeed,delay:SenchaCon2013Demo.app.animateSpeed/2,easing:"ease"},style:{stroke:"#a61120",fillOpacity:0,lineWidth:3,smooth:true,},marker:{type:"circle",radius:4,lineWidth:3}},]})},createLineChartGroupBy3:function(a,c,b){SenchaCon2013Demo.app.newChart[SenchaCon2013Demo.app.currentActivePanelIndex]=Ext.create("Ext.chart.CartesianChart",{id:"chart"+SenchaCon2013Demo.app.currentActivePanelIndex,flex:1,store:a,shadow:true,insetPadding:{top:15,left:0,right:0,bottom:25},animate:{duration:SenchaCon2013Demo.app.animateSpeed,delay:SenchaCon2013Demo.app.animateSpeed/2,easing:"ease"},legend:{position:"right"},axes:[{type:"numeric",position:"left",style:{strokeStyle:"black",shadowColor:"black",},label:{fontFamily:"Helvetica",color:"#4270A2"},minimum:0,maximum:SenchaCon2013Demo.app.Ymax[SenchaCon2013Demo.app.currentActivePanelIndex],title:{text:SenchaCon2013Demo.app.dataFieldValues[SenchaCon2013Demo.app.currentActivePanelIndex],strokeStyle:"#4270A2",fillStyle:"#4270A2",shadowColor:"black",},},{type:"category",position:"bottom",label:{fontFamily:"Helvetica",color:"#4270A2"},fields:SenchaCon2013Demo.app.categoryFieldValues[SenchaCon2013Demo.app.currentActivePanelIndex],style:{strokeStyle:"black",shadowColor:"black",},title:{text:SenchaCon2013Demo.app.categoryFieldValues[SenchaCon2013Demo.app.currentActivePanelIndex],strokeStyle:"#4270A2",fillStyle:"#4270A2",shadowColor:"black",},}],series:[{type:"line",xField:SenchaCon2013Demo.app.categoryFieldValues[SenchaCon2013Demo.app.currentActivePanelIndex],yField:SenchaCon2013Demo.app.groupByValueBar[0],title:b[0],axis:"bottom",highlight:true,showInLegend:true,shadow:true,animate:{duration:SenchaCon2013Demo.app.animateSpeed,delay:SenchaCon2013Demo.app.animateSpeed/2,easing:"ease"},style:{stroke:"#115fa6",fillOpacity:0,lineWidth:3,smooth:true,},marker:{type:"circle",radius:4,lineWidth:3}},{type:"line",xField:SenchaCon2013Demo.app.categoryFieldValues[SenchaCon2013Demo.app.currentActivePanelIndex],yField:SenchaCon2013Demo.app.groupByValueBar[1],title:b[1],axis:"bottom",highlight:true,showInLegend:true,shadow:true,animate:{duration:SenchaCon2013Demo.app.animateSpeed,delay:SenchaCon2013Demo.app.animateSpeed/2,easing:"ease"},style:{stroke:"#94ae0a",fillOpacity:0,lineWidth:3,smooth:true,},marker:{type:"circle",radius:4,lineWidth:3}},{type:"line",xField:SenchaCon2013Demo.app.categoryFieldValues[SenchaCon2013Demo.app.currentActivePanelIndex],yField:SenchaCon2013Demo.app.groupByValueBar[2],title:b[2],axis:"bottom",highlight:true,showInLegend:true,shadow:true,animate:{duration:SenchaCon2013Demo.app.animateSpeed,delay:SenchaCon2013Demo.app.animateSpeed/2,easing:"ease"},style:{stroke:"#a61120",fillOpacity:0,lineWidth:3,smooth:true,},marker:{type:"circle",radius:4,lineWidth:3}},{type:"line",xField:SenchaCon2013Demo.app.categoryFieldValues[SenchaCon2013Demo.app.currentActivePanelIndex],yField:SenchaCon2013Demo.app.groupByValueBar[3],title:b[3],axis:"bottom",highlight:true,showInLegend:true,shadow:true,animate:{duration:SenchaCon2013Demo.app.animateSpeed,delay:SenchaCon2013Demo.app.animateSpeed/2,easing:"ease"},style:{stroke:"#ff8809",fillOpacity:0,lineWidth:3,smooth:true,},marker:{type:"circle",radius:4,lineWidth:3}},]})},createLineChartGroupBy4:function(a,c,b){SenchaCon2013Demo.app.newChart[SenchaCon2013Demo.app.currentActivePanelIndex]=Ext.create("Ext.chart.CartesianChart",{id:"chart"+SenchaCon2013Demo.app.currentActivePanelIndex,flex:1,store:a,shadow:true,insetPadding:{top:15,left:0,right:0,bottom:25},animate:{duration:SenchaCon2013Demo.app.animateSpeed,delay:SenchaCon2013Demo.app.animateSpeed/2,easing:"ease"},legend:{position:"right"},axes:[{type:"numeric",position:"left",style:{strokeStyle:"black",},label:{fontFamily:"Helvetica",color:"#4270A2"},fields:b,minimum:0,maximum:SenchaCon2013Demo.app.Ymax[SenchaCon2013Demo.app.currentActivePanelIndex],title:{text:SenchaCon2013Demo.app.dataFieldValues[SenchaCon2013Demo.app.currentActivePanelIndex],strokeStyle:"#4270A2",fillStyle:"#4270A2",shadowColor:"black",},},{type:"category",position:"bottom",label:{fontFamily:"Helvetica",color:"#4270A2"},fields:SenchaCon2013Demo.app.categoryFieldValues[SenchaCon2013Demo.app.currentActivePanelIndex],style:{strokeStyle:"black",shadowColor:"black",},title:{text:SenchaCon2013Demo.app.categoryFieldValues[SenchaCon2013Demo.app.currentActivePanelIndex],strokeStyle:"#4270A2",fillStyle:"#4270A2",shadowColor:"black",},}],series:[{type:"line",xField:SenchaCon2013Demo.app.categoryFieldValues[SenchaCon2013Demo.app.currentActivePanelIndex],yField:SenchaCon2013Demo.app.groupByValueBar[0],title:b[0],axis:"bottom",highlight:true,showInLegend:true,shadow:true,animate:{duration:SenchaCon2013Demo.app.animateSpeed,delay:SenchaCon2013Demo.app.animateSpeed/2,easing:"ease"},style:{stroke:"#115fa6",fillOpacity:0,lineWidth:3,smooth:true,},marker:{type:"circle",radius:4,lineWidth:3}},{type:"line",xField:SenchaCon2013Demo.app.categoryFieldValues[SenchaCon2013Demo.app.currentActivePanelIndex],yField:SenchaCon2013Demo.app.groupByValueBar[1],title:b[1],axis:"bottom",highlight:true,showInLegend:true,shadow:true,animate:{duration:SenchaCon2013Demo.app.animateSpeed,delay:SenchaCon2013Demo.app.animateSpeed/2,easing:"ease"},style:{stroke:"#94ae0a",fillOpacity:0,lineWidth:3,smooth:true,},marker:{type:"circle",radius:4,lineWidth:3}},{type:"line",xField:SenchaCon2013Demo.app.categoryFieldValues[SenchaCon2013Demo.app.currentActivePanelIndex],yField:SenchaCon2013Demo.app.groupByValueBar[2],title:b[2],axis:"bottom",highlight:true,showInLegend:true,shadow:true,animate:{duration:SenchaCon2013Demo.app.animateSpeed,delay:SenchaCon2013Demo.app.animateSpeed/2,easing:"ease"},style:{stroke:"#a61120",fillOpacity:0,lineWidth:3,smooth:true,},marker:{type:"circle",radius:4,lineWidth:3}},{type:"line",xField:SenchaCon2013Demo.app.categoryFieldValues[SenchaCon2013Demo.app.currentActivePanelIndex],yField:SenchaCon2013Demo.app.groupByValueBar[3],title:b[3],axis:"bottom",highlight:true,showInLegend:true,shadow:true,animate:{duration:SenchaCon2013Demo.app.animateSpeed,delay:SenchaCon2013Demo.app.animateSpeed/2,easing:"ease"},style:{stroke:"#ff8809",fillOpacity:0,lineWidth:3,smooth:true,},marker:{type:"circle",radius:4,lineWidth:3}},{type:"line",xField:SenchaCon2013Demo.app.categoryFieldValues[SenchaCon2013Demo.app.currentActivePanelIndex],yField:SenchaCon2013Demo.app.groupByValueBar[4],title:b[4],axis:"bottom",highlight:true,showInLegend:true,shadow:true,animate:{duration:SenchaCon2013Demo.app.animateSpeed,delay:SenchaCon2013Demo.app.animateSpeed/2,easing:"ease"},style:{stroke:"#ff8809",fillOpacity:0,lineWidth:3,smooth:true,},marker:{type:"circle",radius:4,lineWidth:3}},]})},});Ext.define("SenchaCon2013Demo.controller.Scatter",{extend:"Ext.app.Controller",xtype:"scattercontroller",config:{refs:{initController:"initcontroller",mainController:"maincontroller",},},launch:function(){},createScatterChart:function(e,b,a,g,d,c){var f=SenchaCon2013Demo.app.newChart[SenchaCon2013Demo.app.currentActivePanelIndex];if(f!=undefined){if(f.getLegend()!=undefined){f.getLegend().destroy()}f.destroy()}SenchaCon2013Demo.app.newChart[SenchaCon2013Demo.app.currentActivePanelIndex]=Ext.create("Ext.chart.CartesianChart",{id:"chart"+SenchaCon2013Demo.app.currentActivePanelIndex,animate:true,renderTo:Ext.getBody(),flex:1,autoShow:true,store:b,axes:[{type:"numeric",position:"bottom",fields:[a],style:{strokeStyle:"black",shadowColor:"black",},label:{fontFamily:"Helvetica",color:"#4270A2"},title:{text:a,strokeStyle:"#4270A2",fillStyle:"#4270A2",shadowColor:"black",},minimum:0,maximum:SenchaCon2013Demo.app.Xmax[SenchaCon2013Demo.app.currentActivePanelIndex],},{type:"numeric",position:"left",fields:[g],style:{strokeStyle:"black",shadowColor:"black",},label:{fontFamily:"Helvetica",color:"#4270A2"},title:{text:g,strokeStyle:"#4270A2",fillStyle:"#4270A2",shadowColor:"black",},minimum:0,maximum:SenchaCon2013Demo.app.Ymax[SenchaCon2013Demo.app.currentActivePanelIndex],}],series:[{type:"scatter",fill:true,xField:a,yField:g,animate:{duration:SenchaCon2013Demo.app.animateSpeed,delay:SenchaCon2013Demo.app.animateSpeed/2,easing:"ease"},marker:{type:"circle",fill:"#a00",fillOpacity:1,radius:10,lineWidth:1,strokeOpacity:1,strokeStyle:"black",shadowColor:"black",shadowOffestX:2,shadowOffsetY:2,}}]})},createScatterChartGroupBy:function(d,b,a,e,c){},});Ext.define("SenchaCon2013Demo.controller.VerticalBar",{extend:"Ext.app.Controller",xtype:"verticalbarcontroller",config:{refs:{mainController:"maincontroller",},},launch:function(){},createVerticalBarChart:function(a,c,b){var d=SenchaCon2013Demo.app.newChart[SenchaCon2013Demo.app.currentActivePanelIndex];if(d!=undefined){if(d.getLegend()!=undefined){d.get().destroy()}d.destroy()}if(b==undefined){this.createVerticalBarChartGroupByNone(a,c)}else{SenchaCon2013Demo.app.groupByValueBar=new Array();for(i=0;i<b.length;i++){SenchaCon2013Demo.app.groupByValueBar[i]="groupByBar"+(i+1)}if(b.length!=0&&b[b.length-1]!="other"){b[b.length]="Other";SenchaCon2013Demo.app.groupByValueBar[SenchaCon2013Demo.app.groupByValueBar]="Other"}this.createVerticalBarChartGroupBy(a,c,b)}},createVerticalBarChartGroupByNone:function(a,b){SenchaCon2013Demo.app.newChart[SenchaCon2013Demo.app.currentActivePanelIndex]=Ext.create("Ext.chart.CartesianChart",{id:"chart"+SenchaCon2013Demo.app.currentActivePanelIndex,flipXY:false,flex:1,store:a,shadow:true,animate:{duration:SenchaCon2013Demo.app.animateSpeed,delay:SenchaCon2013Demo.app.animateSpeed/2,easing:"ease"},axes:[{type:"numeric",position:"left",style:{strokeStyle:"black",shadowColor:"black",},label:{fontFamily:"Helvetica",color:"#4270A2"},fields:SenchaCon2013Demo.app.dataFieldValues[SenchaCon2013Demo.app.currentActivePanelIndex],minimum:0,maximum:SenchaCon2013Demo.app.Ymax[SenchaCon2013Demo.app.currentActivePanelIndex],title:{text:SenchaCon2013Demo.app.dataFieldValues[SenchaCon2013Demo.app.currentActivePanelIndex],strokeStyle:"#4270A2",fillStyle:"#4270A2",shadowColor:"black",},},{type:"category",position:"bottom",label:{fontFamily:"Helvetica",color:"#4270A2"},fields:SenchaCon2013Demo.app.categoryFieldValues[SenchaCon2013Demo.app.currentActivePanelIndex],style:{strokeStyle:"black",shadowColor:"black",},title:{text:SenchaCon2013Demo.app.categoryFieldValues[SenchaCon2013Demo.app.currentActivePanelIndex],strokeStyle:"#4270A2",fillStyle:"#4270A2",shadowColor:"black",},}],series:[{type:"bar",xField:SenchaCon2013Demo.app.categoryFieldValues[SenchaCon2013Demo.app.currentActivePanelIndex],yField:SenchaCon2013Demo.app.dataFieldValues[SenchaCon2013Demo.app.currentActivePanelIndex],axis:"bottom",highlight:true,showInLegend:false,shadow:true,style:{stroke:"rgb(40,40,40)",},subStyle:{fill:["#115fa6","#94ae0a","#a61120","#ff8809","#ffd13e","#a61187","#24ad9a","#7c7474","#a66111"]}}]})},createVerticalBarChartGroupBy:function(a,c,b){SenchaCon2013Demo.app.newChart[SenchaCon2013Demo.app.currentActivePanelIndex]=Ext.create("Ext.chart.CartesianChart",{id:"chart"+SenchaCon2013Demo.app.currentActivePanelIndex,flipXY:false,flex:1,store:a,shadow:true,animate:{duration:SenchaCon2013Demo.app.animateSpeed,delay:SenchaCon2013Demo.app.animateSpeed/2,easing:"ease"},legend:{position:"right"},axes:[{type:"numeric",position:"left",style:{strokeStyle:"black",shadowColor:"black",},label:{fontFamily:"Helvetica",color:"#4270A2"},minimum:0,maximum:SenchaCon2013Demo.app.Ymax[SenchaCon2013Demo.app.currentActivePanelIndex],title:{text:SenchaCon2013Demo.app.dataFieldValues[SenchaCon2013Demo.app.currentActivePanelIndex],strokeStyle:"#4270A2",fillStyle:"#4270A2",shadowColor:"black",},},{type:"category",position:"bottom",label:{fontFamily:"Helvetica",color:"#4270A2"},fields:SenchaCon2013Demo.app.categoryFieldValues[SenchaCon2013Demo.app.currentActivePanelIndex],style:{strokeStyle:"black",shadowColor:"black",},title:{text:SenchaCon2013Demo.app.categoryFieldValues[SenchaCon2013Demo.app.currentActivePanelIndex],strokeStyle:"#4270A2",fillStyle:"#4270A2",shadowColor:"black",},}],series:[{type:"bar",xField:SenchaCon2013Demo.app.categoryFieldValues[SenchaCon2013Demo.app.currentActivePanelIndex],yField:SenchaCon2013Demo.app.groupByValueBar,title:b,highlight:true,showInLegend:true,stacked:true,shadow:true,style:{stroke:"rgb(40,40,40)",},subStyle:{fill:["#115fa6","#94ae0a","#a61120","#ff8809","#ffd13e","#a61187","#24ad9a","#7c7474","#a66111"]}}]})},});Ext.define("SenchaCon2013Demo.controller.GlobalSync",{extend:"Ext.app.Controller",xtype:"globalsynccontroller",config:{refs:{initController:"initcontroller",mainController:"maincontroller",slider0:"slider0",slider1:"slider1",slider2:"slider2",slider3:"slider3",slider4:"slider4",panel1:"panel1",panel2:"panel2",panel3:"panel3",panel4:"panel4",fourPanelLayout:"fourpanellayout",globalSyncButton:"segmentedbutton[id=globalsynctogglebutton]",settingsButton:"button[id=settingsbutton]",globalSettingsButton:"button[id=globalsettingsbutton]",},control:{globalSyncButton:{toggle:"globalSyncToggle"},},},globalSyncToggle:function(c,b,a){this.getApplication().getController("Playback").pauseFunction();if(a==true){this.calculateGlobalSyncVariables();this.getFourPanelLayout().setCls("selected-panel");this.getPanel1().setCls("unselected-panel");this.getPanel2().setCls("unselected-panel");this.getPanel3().setCls("unselected-panel");this.getPanel4().setCls("unselected-panel");this.getSlider4().hide();this.getSlider2().hide();this.getSlider3().hide();this.getSlider1().hide();this.getSlider0().show();SenchaCon2013Demo.app.currentActivePanelIndex=0;this.getApplication().getController("Main").checkForConfiguredGraphPanels();this.getApplication().getController("Playback").resetBackwardFunction();this.getSettingsButton().setDisabled(true)}else{this.getSettingsButton().setDisabled(false);this.getFourPanelLayout().setCls("unselected-panel");this.getPanel1().setCls("selected-panel");this.getPanel2().setCls("unselected-panel");this.getPanel3().setCls("unselected-panel");this.getPanel4().setCls("unselected-panel");this.getSlider0().hide();this.getSlider2().hide();this.getSlider3().hide();this.getSlider4().hide();this.getSlider1().show();SenchaCon2013Demo.app.currentActivePanelIndex=1}},calculateGlobalSyncVariables:function(){var m=0;for(i=0;i<15;i++){SenchaCon2013Demo.app.chartLengths[i]=0}var b=0;for(i=0;i<5;i++){SenchaCon2013Demo.app.chartValue[i]=0}for(i=0;i<5;i++){if(SenchaCon2013Demo.app.startDate[i]!=undefined){SenchaCon2013Demo.app.currentStartDate[i]=new Date(SenchaCon2013Demo.app.startDate[i])}}for(i=0;i<5;i++){SenchaCon2013Demo.app.chartIsRunning[i]=false;SenchaCon2013Demo.app.chartIsPaused[i]=false;SenchaCon2013Demo.app.chartFinished[i]=false;SenchaCon2013Demo.app.initialPosition[i]=true}SenchaCon2013Demo.app.numberActiveCharts=0;for(i=1;i<5;i++){if(SenchaCon2013Demo.app.dateSet[i]==true){SenchaCon2013Demo.app.numberActiveCharts=SenchaCon2013Demo.app.numberActiveCharts+1}}SenchaCon2013Demo.app.chartsFinished=0;SenchaCon2013Demo.app.globalIndex=0;SenchaCon2013Demo.app.firstGlobalDate=true;SenchaCon2013Demo.app.globalSyncPressed=true;SenchaCon2013Demo.app.nullSearchReturnedTrue=false;SenchaCon2013Demo.app.finishCall=false;SenchaCon2013Demo.app.sandwich=false;SenchaCon2013Demo.app.testNextIncrement=null;var n=new Array();var l=new Array();var e=new Array();var d=new Array();var h=new Array();var a=0;var g=0;var c=new Array();c=SenchaCon2013Demo.app.valueGranularities;for(i=1;i<5;i++){if(SenchaCon2013Demo.app.dateSet[i]==true){l[g]=SenchaCon2013Demo.app.currentStartDate[i].getTime();n[g]=i;e[g]=SenchaCon2013Demo.app.currentEndDate[i].getTime();g=g+1}}for(i=0;i<g;i++){if(g==0){}else{if(g==1){SenchaCon2013Demo.app.globalStartDate=l[i];d[0]=n[i]}else{if(g==2){if(l[i]<=l[(i+1)%g]){SenchaCon2013Demo.app.globalStartDate=l[i];d[0]=n[i];if(l[i]==l[(i+1)%g]){d[1]=n[(i+1)%g]}}if(e[i]>=e[(i+1)%g]){SenchaCon2013Demo.app.globalEndDate=e[i]}}else{if(g==3){if(l[i]<=l[(i+1)%g]&&l[i]<=l[(i+2)%g]){SenchaCon2013Demo.app.globalStartDate=l[i];d[0]=n[i];if(l[i]==l[(i+1)%g]&&l[i]!=l[(i+2)%g]){d[1]=n[(i+1)%g]}else{if(l[i]==l[(i+2)%g]&&l[i]!=l[(i+1)%g]){d[1]=n[(i+2)%g]}else{if(l[i]==l[(i+1)%g]&&l[i]==l[(i+2)%g]){d[1]=n[(i+1)%g];d[2]=n[(i+2)%g]}}}}if(e[i]>=e[(i+1)%g]&&e[i]>=e[(i+2)%g]){SenchaCon2013Demo.app.globalEndDate=e[i]}}else{if(l[i]<=l[(i+1)%g]&&l[i]<=l[(i+2)%g]&&l[i]<=l[(i+3)%g]){SenchaCon2013Demo.app.globalStartDate=l[i];d[0]=n[i];if(l[i]==l[(i+1)%g]&&l[i]!=l[(i+2)%g]&&l[i]!=l[(i+3)%g]){d[1]=n[(i+1)%g]}else{if(l[i]==l[(i+2)%g]&&l[i]!=l[(i+1)%g]&&l[i]!=l[(i+3)%g]){d[1]=n[(i+2)%g]}else{if(l[i]==l[(i+3)%g]&&l[i]!=l[(i+1)%g]&&l[i]!=l[(i+2)%g]){d[1]=n[(i+3)%g]}else{if(l[i]==l[(i+1)%g]&&l[i]==l[(i+2)%g]&&l[i]!=l[(i+3)%g]){d[1]=n[(i+1)%g];d[2]=n[(i+2)%g]}else{if(l[i]==l[(i+1)%g]&&l[i]!=l[(i+2)%g]&&l[i]==l[(i+3)%g]){d[1]=n[(i+1)%g];d[2]=n[(i+3)%g]}else{if(l[i]!=l[(i+1)%g]&&l[i]==l[(i+2)%g]&&l[i]==l[(i+3)%g]){d[1]=n[(i+2)%g];d[2]=n[(i+3)%g]}else{if(l[i]==l[(i+1)%g]&&l[i]==l[(i+2)%g]&&l[i]==l[(i+3)%g]){d[1]=n[(i+1)%g];d[2]=n[(i+2)%g];d[3]=n[(i+3)%g]}}}}}}}}if(e[i]>=e[(i+1)%g]&&e[i]>=e[(i+2)%g]&&e[i]>=e[(i+3)%g]){SenchaCon2013Demo.app.globalEndDate=e[i]}}}}}}for(i=0;i<d.length;i++){if(d.length==0){}else{if(d.length==1){h[0]=d[0]}else{if(d.length==2){if(c[d[i]]>=c[d[(i+1)%d.length]]){h[0]=d[i];if(c[d[i]]==c[d[(i+1)%d.length]]){h[1]=d[(i+1)%d.length]}}}else{if(d.length==3){if(c[d[i]]>=c[d[(i+1)%d.length]]&&c[d[i]]>=c[d[(i+2)%d.length]]){h[0]=d[i];if(c[d[i]]==c[d[(i+1)%d.length]]&&c[d[i]]!=c[d[(i+2)%d.length]]){h[1]=d[(i+1)%d.length]}else{if(c[d[i]]!=c[d[(i+1)%d.length]]&&c[d[i]]==c[d[(i+2)%d.length]]){h[1]=d[(i+2)%d.length]}else{if(c[d[i]]==c[d[(i+1)%d.length]]&&c[d[i]]==c[d[(i+2)%d.length]]){h[1]=d[(i+1)%d.length];h[2]=d[(i+2)%d.length]}}}}}else{if(c[d[i]]>=c[d[(i+1)%d.length]]&&c[d[i]]>=c[d[(i+2)%d.length]]&&c[d[i]]>=c[d[(i+3)%d.length]]){h[0]=d[i];if(c[d[i]]==c[d[(i+1)%d.length]]&&c[d[i]]!=c[d[(i+2)%d.length]]&&c[d[i]]!=c[d[(i+3)%d.length]]){h[1]=d[(i+1)%d.length]}else{if(c[d[i]]!=c[d[(i+1)%d.length]]&&c[d[i]]==c[d[(i+2)%d.length]]&&c[d[i]]!=c[d[(i+3)%d.length]]){h[1]=d[(i+2)%d.length]}else{if(c[d[i]]!=c[d[(i+1)%d.length]]&&c[d[i]]!=c[d[(i+2)%d.length]]&&c[d[i]]==c[d[(i+3)%d.length]]){h[1]=d[(i+3)%d.length]}else{if(c[d[i]]==c[d[(i+1)%d.length]]&&c[d[i]]==c[d[(i+2)%d.length]]&&c[d[i]]!=c[d[(i+3)%d.length]]){h[1]=d[(i+1)%d.length];h[2]=d[(i+2)%d.length]}else{if(c[d[i]]==c[d[(i+1)%d.length]]&&c[d[i]]!=c[d[(i+2)%d.length]]&&c[d[i]]==c[d[(i+3)%d.length]]){h[1]=d[(i+1)%d.length];h[2]=d[(i+3)%d.length]}else{if(c[d[i]]!=c[d[(i+1)%d.length]]&&c[d[i]]==c[d[(i+2)%d.length]]&&c[d[i]]==c[d[(i+3)%d.length]]){h[1]=d[(i+2)%d.length];h[2]=d[(i+3)%d.length]}else{if(c[d[i]]==c[d[(i+1)%d.length]]&&c[d[i]]==c[d[(i+2)%d.length]]&&c[d[i]]==c[d[(i+3)%d.length]]){h[2]=d[(i+2)%d.length];h[3]=d[(i+3)%d.length];h[1]=d[(i+1)%d.length]}}}}}}}}}}}}}for(i=0;i<h.length;i++){SenchaCon2013Demo.app.chartIsRunning[h[i]]=true;SenchaCon2013Demo.app.initialPosition[h[i]]=false}this.globalSync();var f=0;for(i=0;i<SenchaCon2013Demo.app.chartSection.length;i++){if(!isNaN(SenchaCon2013Demo.app.chartLengths[i])){f=f+SenchaCon2013Demo.app.chartLengths[i]}}SenchaCon2013Demo.app.differentialMultiplier[m]=1;Ext.ComponentQuery.query("slider"+m)[0].setMaxValue(SenchaCon2013Demo.app.differentialMultiplier[m]*f);SenchaCon2013Demo.app.maximumPositions[m]=Ext.ComponentQuery.query("slider"+m)[0].getMaxValue();hideLoadingMask();SenchaCon2013Demo.app.testcount=SenchaCon2013Demo.app.testcount+1;logMessage("chartIndex in global end "+m);this.calculateGlobalSyncChartPositionsMap()},globalSyncSliderFunctionChange:function(b,a){this.playChartsGlobal(b)},globalSync:function(){var a=0;while(SenchaCon2013Demo.app.chartsFinished!=SenchaCon2013Demo.app.numberActiveCharts&&a<100){var e=false;var d=1;while(d<5){if(SenchaCon2013Demo.app.currentStartDate[d]<=SenchaCon2013Demo.app.currentEndDate[d]){if(SenchaCon2013Demo.app.chartIsRunning[d]==true&&SenchaCon2013Demo.app.chartIsPaused[d]!=true){previousDate=new Date(SenchaCon2013Demo.app.currentStartDate[d]);switch(SenchaCon2013Demo.app.granularities[d]){case"Hourly":SenchaCon2013Demo.app.currentStartDate[d].setMinutes(SenchaCon2013Demo.app.currentStartDate[d].getMinutes()+60);break;case"Daily":SenchaCon2013Demo.app.currentStartDate[d].setDate(SenchaCon2013Demo.app.currentStartDate[d].getDate()+1);break;case"Weekly":SenchaCon2013Demo.app.currentStartDate[d].setDate(SenchaCon2013Demo.app.currentStartDate[d].getDate()+7);break;case"Monthly":SenchaCon2013Demo.app.currentStartDate[d].setMonth(SenchaCon2013Demo.app.currentStartDate[d].getMonth()+1);SenchaCon2013Demo.app.currentStartDate[d].setDate(1);break}var g;if(SenchaCon2013Demo.app.chartFinished[d]!=true&&SenchaCon2013Demo.app.currentStartDate[d].getTime()>SenchaCon2013Demo.app.currentEndDate[d].getTime()){SenchaCon2013Demo.app.chartFinished[d]=true;SenchaCon2013Demo.app.chartsFinished=SenchaCon2013Demo.app.chartsFinished+1;if(SenchaCon2013Demo.app.chartsFinished==SenchaCon2013Demo.app.numberActiveCharts){var f=new Array();var c=0;for(d=1;d<5;d++){if(SenchaCon2013Demo.app.chartIsRunning[d]==true&&SenchaCon2013Demo.app.chartIsPaused[d]!=true){f[c]=d;c=c+1;SenchaCon2013Demo.app.chartIsPaused[d]=true}}SenchaCon2013Demo.app.chartSection[SenchaCon2013Demo.app.globalIndex]=f;SenchaCon2013Demo.app.chartLengths[SenchaCon2013Demo.app.globalIndex]=SenchaCon2013Demo.app.chartLengths[SenchaCon2013Demo.app.globalIndex]-1;return}var f=new Array();var c=0;for(var b=1;b<5;b++){if(SenchaCon2013Demo.app.chartIsRunning[b]==true&&SenchaCon2013Demo.app.chartIsPaused[b]!=true){f[c]=b;c=c+1;SenchaCon2013Demo.app.chartIsPaused[b]=true}}if(this.nullSearch(SenchaCon2013Demo.app.currentStartDate[d],previousDate)==true){SenchaCon2013Demo.app.nullSearchReturnedTrue=true}SenchaCon2013Demo.app.chartSection[SenchaCon2013Demo.app.globalIndex]=f;SenchaCon2013Demo.app.globalIndex=SenchaCon2013Demo.app.globalIndex+1;SenchaCon2013Demo.app.finishCall=true;this.globalSyncLogic(SenchaCon2013Demo.app.globalEndDate,previousDate,d)}if(e==false){g=this.globalSyncLogic(SenchaCon2013Demo.app.currentStartDate[d],previousDate,d);if(g!=true){e=true}}}}else{if(SenchaCon2013Demo.app.currentStartDate[d]==undefined){}else{if(SenchaCon2013Demo.app.chartFinished[d]!=true&&SenchaCon2013Demo.app.currentStartDate[d].getTime()>SenchaCon2013Demo.app.currentEndDate[d].getTime()){SenchaCon2013Demo.app.chartFinished[d]=true;SenchaCon2013Demo.app.chartsFinished=SenchaCon2013Demo.app.chartsFinished+1;if(SenchaCon2013Demo.app.chartsFinished==SenchaCon2013Demo.app.numberActiveCharts){var f=new Array();var c=0;for(d=1;d<5;d++){if(SenchaCon2013Demo.app.chartIsRunning[d]==true&&SenchaCon2013Demo.app.chartIsPaused[d]!=true){f[c]=d;c=c+1;SenchaCon2013Demo.app.chartIsPaused[d]=true}}SenchaCon2013Demo.app.chartSection[SenchaCon2013Demo.app.globalIndex]=f;SenchaCon2013Demo.app.chartLengths[SenchaCon2013Demo.app.globalIndex]=SenchaCon2013Demo.app.chartLengths[SenchaCon2013Demo.app.globalIndex]-1;return}var f=new Array();var c=0;for(ii=1;ii<5;ii++){if(SenchaCon2013Demo.app.chartIsRunning[ii]==true&&SenchaCon2013Demo.app.chartIsPaused[ii]!=true){f[c]=ii;c=c+1;SenchaCon2013Demo.app.chartIsPaused[ii]=true}}SenchaCon2013Demo.app.chartSection[SenchaCon2013Demo.app.globalIndex]=f;SenchaCon2013Demo.app.chartLengths[SenchaCon2013Demo.app.globalIndex]=SenchaCon2013Demo.app.chartLengths[SenchaCon2013Demo.app.globalIndex]-1;SenchaCon2013Demo.app.globalIndex=SenchaCon2013Demo.app.globalIndex+1;SenchaCon2013Demo.app.finishCall=true;this.globalSyncLogic(SenchaCon2013Demo.app.globalEndDate,SenchaCon2013Demo.app.currentStartDate[d],d)}}}d++}a=a+1}var c=0;for(d=1;d<5;d++){if(SenchaCon2013Demo.app.chartIsRunning[d]==true&&SenchaCon2013Demo.app.chartIsPaused[d]!=true){f[c]=d;c=c+1;SenchaCon2013Demo.app.chartIsPaused[d]=true}}SenchaCon2013Demo.app.chartSection[SenchaCon2013Demo.app.globalIndex]=f;return},globalSyncLogic:function(o,s,f){var e=new Array();var v=new Array();var m=new Array();var l=new Array();var q=false;var d=false;var a=false;var c=new Array();var g=0;var p=new Array();p=SenchaCon2013Demo.app.valueGranularities;for(i=1;i<5;i++){if(SenchaCon2013Demo.app.dateSet[i]==true&&(SenchaCon2013Demo.app.chartIsRunning[i]==false||SenchaCon2013Demo.app.chartIsPaused[i]==true)&&SenchaCon2013Demo.app.chartFinished[i]==false&&SenchaCon2013Demo.app.currentStartDate[i]<o&&SenchaCon2013Demo.app.currentStartDate[i]>=s){e[g]=SenchaCon2013Demo.app.currentStartDate[i].getTime();l[g]=i;g=g+1;q=true}}if(q==false){SenchaCon2013Demo.app.chartLengths[SenchaCon2013Demo.app.globalIndex]=SenchaCon2013Demo.app.chartLengths[SenchaCon2013Demo.app.globalIndex]+1;return false}for(i=0;i<g;i++){if(g==0){}else{if(g==1){v[0]=l[i]}else{if(g==2){if(e[i]<=e[(i+1)%g]){v[0]=l[i];if(e[i]==e[(i+1)%g]){v[1]=l[(i+1)%g]}}}else{if(g==3){if(e[i]<=e[(i+1)%g]&&e[i]<=e[(i+2)%g]){v[0]=l[i];if(e[i]==e[(i+1)%g]&&e[i]!=e[(i+2)%g]){v[1]=l[(i+1)%g]}else{if(e[i]==e[(i+2)%g]&&e[i]!=e[(i+1)%g]){v[1]=l[(i+2)%g]}else{if(e[i]==e[(i+1)%g]&&e[i]==e[(i+2)%g]){v[1]=l[(i+1)%g];v[2]=l[(i+2)%g]}}}}}else{if(e[i]<=e[(i+1)%g]&&e[i]<=e[(i+2)%g]&&e[i]<=e[(i+3)%g]){v[0]=l[i];if(e[i]==e[(i+1)%g]&&e[i]!=e[(i+2)%g]&&e[i]!=e[(i+3)%g]){v[1]=l[(i+1)%g]}else{if(e[i]==e[(i+2)%g]&&e[i]!=e[(i+1)%g]&&e[i]!=e[(i+3)%g]){v[1]=l[(i+2)%g]}else{if(e[i]==e[(i+3)%g]&&e[i]!=e[(i+1)%g]&&e[i]!=e[(i+2)%g]){v[1]=l[(i+3)%g]}else{if(e[i]==e[(i+1)%g]&&e[i]==e[(i+2)%g]&&e[i]!=e[(i+3)%g]){v[1]=l[(i+1)%g];v[2]=l[(i+2)%g]}else{if(e[i]==e[(i+1)%g]&&e[i]!=e[(i+2)%g]&&e[i]==e[(i+3)%g]){v[1]=l[(i+1)%g];v[2]=l[(i+3)%g]}else{if(e[i]!=e[(i+1)%g]&&e[i]==e[(i+2)%g]&&e[i]==e[(i+3)%g]){v[1]=l[(i+2)%g];v[2]=l[(i+3)%g]}else{if(e[i]==e[(i+1)%g]&&e[i]==e[(i+2)%g]&&e[i]==e[(i+3)%g]){v[1]=l[(i+1)%g];v[2]=l[(i+2)%g];v[3]=l[(i+3)%g]}}}}}}}}}}}}}for(i=0;i<v.length;i++){if(v.length==0){}else{if(v.length==1){m[0]=v[0]}else{if(v.length==2){if(p[v[i]]>=p[v[(i+1)%v.length]]){m[0]=v[i];if(p[v[i]]==p[v[(i+1)%v.length]]){m[1]=v[(i+1)%v.length]}}}else{if(v.length==3){if(p[v[i]]>=p[v[(i+1)%v.length]]&&p[v[i]]>=p[v[(i+2)%v.length]]){m[0]=v[i];if(p[v[i]]==p[v[(i+1)%v.length]]&&p[v[i]]!=p[v[(i+2)%v.length]]){m[1]=v[(i+1)%v.length]}else{if(p[v[i]]!=p[v[(i+1)%v.length]]&&p[v[i]]==p[v[(i+2)%v.length]]){m[1]=v[(i+2)%v.length]}else{if(p[v[i]]==p[v[(i+1)%v.length]]&&p[v[i]]==p[v[(i+2)%v.length]]){m[1]=v[(i+1)%v.length];m[2]=v[(i+2)%v.length]}}}}}else{if(p[v[i]]>=p[v[(i+1)%v.length]]&&p[v[i]]>=p[v[(i+2)%v.length]]&&p[v[i]]>=p[v[(i+3)%v.length]]){m[0]=v[i];if(p[v[i]]==p[v[(i+1)%v.length]]&&p[v[i]]!=p[v[(i+2)%v.length]]&&p[v[i]]!=p[v[(i+3)%v.length]]){m[1]=v[(i+1)%v.length]}else{if(p[v[i]]!=p[v[(i+1)%v.length]]&&p[v[i]]==p[v[(i+2)%v.length]]&&p[v[i]]!=p[v[(i+3)%v.length]]){m[1]=v[(i+2)%v.length]}else{if(p[v[i]]!=p[v[(i+1)%v.length]]&&p[v[i]]!=p[v[(i+2)%v.length]]&&p[v[i]]==p[v[(i+3)%v.length]]){m[1]=v[(i+3)%v.length]}else{if(p[v[i]]==p[v[(i+1)%v.length]]&&p[v[i]]==p[v[(i+2)%v.length]]&&p[v[i]]!=p[v[(i+3)%v.length]]){m[1]=v[(i+1)%v.length];m[2]=v[(i+2)%v.length]}else{if(p[v[i]]==p[v[(i+1)%v.length]]&&p[v[i]]!=p[v[(i+2)%v.length]]&&p[v[i]]==p[v[(i+3)%v.length]]){m[1]=v[(i+1)%v.length];m[2]=v[(i+3)%v.length]}else{if(p[v[i]]!=p[v[(i+1)%v.length]]&&p[v[i]]==p[v[(i+2)%v.length]]&&p[v[i]]==p[v[(i+3)%v.length]]){m[1]=v[(i+2)%v.length];m[2]=v[(i+3)%v.length]}else{if(p[v[i]]==p[v[(i+1)%v.length]]&&p[v[i]]==p[v[(i+2)%v.length]]&&p[v[i]]==p[v[(i+3)%v.length]]){m[2]=v[(i+2)%v.length];m[3]=v[(i+3)%v.length];m[1]=v[(i+1)%v.length]}}}}}}}}}}}}}var h=false;if(SenchaCon2013Demo.app.finishCall==true&&p[f]<p[m[0]]&&m[0]<f&&SenchaCon2013Demo.app.chartsFinished==SenchaCon2013Demo.app.numberActiveCharts-1){SenchaCon2013Demo.app.chartLengths[SenchaCon2013Demo.app.globalIndex]=SenchaCon2013Demo.app.chartLengths[SenchaCon2013Demo.app.globalIndex]+1}if(SenchaCon2013Demo.app.finishCall==true&&p[f]<p[m[0]]&&m[0]>f&&SenchaCon2013Demo.app.chartsFinished==SenchaCon2013Demo.app.numberActiveCharts-1){SenchaCon2013Demo.app.chartLengths[SenchaCon2013Demo.app.globalIndex]=SenchaCon2013Demo.app.chartLengths[SenchaCon2013Demo.app.globalIndex]+2}if(SenchaCon2013Demo.app.finishCall==true&&SenchaCon2013Demo.app.chartSection[SenchaCon2013Demo.app.globalIndex-1].length<2){for(iii=0;iii<m.length;iii++){c[iii]=m[iii]}}var w=0;var t=0;if(SenchaCon2013Demo.app.finishCall==true&&SenchaCon2013Demo.app.chartsFinished<SenchaCon2013Demo.app.numberActiveCharts-1){if(SenchaCon2013Demo.app.chartSection[SenchaCon2013Demo.app.globalIndex-1].length>1){for(u=0;u<m.length;u++){for(uu=0;uu<SenchaCon2013Demo.app.chartSection[SenchaCon2013Demo.app.globalIndex-1].length;uu++){if(m[u]==SenchaCon2013Demo.app.chartSection[SenchaCon2013Demo.app.globalIndex-1][uu]&&m[u]<f){w=w+1}else{if(m[u]==SenchaCon2013Demo.app.chartSection[SenchaCon2013Demo.app.globalIndex-1][uu]&&m[u]>f){t=t+1}}}}}}if(SenchaCon2013Demo.app.finishCall==true&&SenchaCon2013Demo.app.chartsFinished<SenchaCon2013Demo.app.numberActiveCharts-1&&m[0]<f&&SenchaCon2013Demo.app.initialPosition[m[0]]==true){SenchaCon2013Demo.app.chartLengths[SenchaCon2013Demo.app.globalIndex]=SenchaCon2013Demo.app.chartLengths[SenchaCon2013Demo.app.globalIndex]-1}if(w!=0){SenchaCon2013Demo.app.chartLengths[SenchaCon2013Demo.app.globalIndex-1]=SenchaCon2013Demo.app.chartLengths[SenchaCon2013Demo.app.globalIndex-1]-1;SenchaCon2013Demo.app.chartLengths[SenchaCon2013Demo.app.globalIndex]=SenchaCon2013Demo.app.chartLengths[SenchaCon2013Demo.app.globalIndex]+1;for(iii=0;iii<m.length;iii++){c[iii]=m[iii]}}if(t!=0){for(iii=0;iii<m.length;iii++){c[iii]=m[iii]}}if(SenchaCon2013Demo.app.finishCall==true&&SenchaCon2013Demo.app.firstGlobalDate!=true&&SenchaCon2013Demo.app.chartSection[SenchaCon2013Demo.app.globalIndex-1].length>1&&SenchaCon2013Demo.app.chartsFinished==SenchaCon2013Demo.app.numberActiveCharts-1){SenchaCon2013Demo.app.chartLengths[SenchaCon2013Demo.app.globalIndex]=SenchaCon2013Demo.app.chartLengths[SenchaCon2013Demo.app.globalIndex]+1;for(iii=0;iii<m.length;iii++){c[iii]=m[iii]}}else{if(SenchaCon2013Demo.app.finishCall==true&&SenchaCon2013Demo.app.firstGlobalDate==true&&m[0]>f&&SenchaCon2013Demo.app.chartSection[SenchaCon2013Demo.app.globalIndex-1].length>1&&SenchaCon2013Demo.app.chartsFinished==SenchaCon2013Demo.app.numberActiveCharts-1){for(iii=0;iii<m.length;iii++){c[iii]=m[iii]}}else{if(SenchaCon2013Demo.app.finishCall==true&&SenchaCon2013Demo.app.firstGlobalDate==true&&m[0]<f&&SenchaCon2013Demo.app.chartSection[SenchaCon2013Demo.app.globalIndex-1].length>1&&SenchaCon2013Demo.app.chartsFinished==SenchaCon2013Demo.app.numberActiveCharts-1){SenchaCon2013Demo.app.chartLengths[SenchaCon2013Demo.app.globalIndex-1]=SenchaCon2013Demo.app.chartLengths[SenchaCon2013Demo.app.globalIndex-1]-1;SenchaCon2013Demo.app.chartLengths[SenchaCon2013Demo.app.globalIndex]=SenchaCon2013Demo.app.chartLengths[SenchaCon2013Demo.app.globalIndex]+2;for(iii=0;iii<m.length;iii++){c[iii]=m[iii]}}}}var r=0;var n=0;if(SenchaCon2013Demo.app.finishCall==false){for(i=1;i<5;i++){if(SenchaCon2013Demo.app.chartIsRunning[i]==true&&SenchaCon2013Demo.app.chartIsPaused[i]!=true){c[n]=i;n=n+1;SenchaCon2013Demo.app.chartIsPaused[i]=true}}}if(n==2){switch(SenchaCon2013Demo.app.granularities[c[1]]){case"Hourly":SenchaCon2013Demo.app.currentStartDate[c[1]].setMinutes(SenchaCon2013Demo.app.currentStartDate[c[1]].getMinutes()+60);break;case"Daily":SenchaCon2013Demo.app.currentStartDate[c[1]].setDate(SenchaCon2013Demo.app.currentStartDate[c[1]].getDate()+1);break;case"Weekly":SenchaCon2013Demo.app.currentStartDate[c[1]].setDate(SenchaCon2013Demo.app.currentStartDate[c[1]].getDate()+7);break;case"Monthly":SenchaCon2013Demo.app.currentStartDate[c[1]].setDate(1);SenchaCon2013Demo.app.currentStartDate[c[1]].setMonth(SenchaCon2013Demo.app.currentStartDate[c[1]].getMonth()+1);break}if(SenchaCon2013Demo.app.chartFinished[c[1]]!=true&&SenchaCon2013Demo.app.currentStartDate[c[1]].getTime()>SenchaCon2013Demo.app.currentEndDate[c[1]].getTime()){SenchaCon2013Demo.app.chartFinished[c[1]]=true;SenchaCon2013Demo.app.chartsFinished=SenchaCon2013Demo.app.chartsFinished+1}}else{if(n==3){switch(SenchaCon2013Demo.app.granularities[c[1]]){case"Hourly":SenchaCon2013Demo.app.currentStartDate[c[1]].setMinutes(SenchaCon2013Demo.app.currentStartDate[c[1]].getMinutes()+60);break;case"Daily":SenchaCon2013Demo.app.currentStartDate[c[1]].setDate(SenchaCon2013Demo.app.currentStartDate[c[1]].getDate()+1);break;case"Weekly":SenchaCon2013Demo.app.currentStartDate[c[1]].setDate(SenchaCon2013Demo.app.currentStartDate[c[1]].getDate()+7);break;case"Monthly":SenchaCon2013Demo.app.currentStartDate[c[1]].setDate(1);SenchaCon2013Demo.app.currentStartDate[c[1]].setMonth(SenchaCon2013Demo.app.currentStartDate[c[1]].getMonth()+1);break}if(SenchaCon2013Demo.app.chartFinished[c[1]]!=true&&SenchaCon2013Demo.app.currentStartDate[c[1]].getTime()>SenchaCon2013Demo.app.currentEndDate[c[1]].getTime()){SenchaCon2013Demo.app.chartFinished[c[1]]=true;SenchaCon2013Demo.app.chartsFinished=SenchaCon2013Demo.app.chartsFinished+1}switch(SenchaCon2013Demo.app.granularities[c[2]]){case"Hourly":SenchaCon2013Demo.app.currentStartDate[c[2]].setMinutes(SenchaCon2013Demo.app.currentStartDate[c[2]].getMinutes()+60);break;case"Daily":SenchaCon2013Demo.app.currentStartDate[c[2]].setDate(SenchaCon2013Demo.app.currentStartDate[c[2]].getDate()+1);break;case"Weekly":SenchaCon2013Demo.app.currentStartDate[c[2]].setDate(SenchaCon2013Demo.app.currentStartDate[c[2]].getDate()+7);break;case"Monthly":SenchaCon2013Demo.app.currentStartDate[c[2]].setDate(1);SenchaCon2013Demo.app.currentStartDate[c[2]].setMonth(SenchaCon2013Demo.app.currentStartDate[c[2]].getMonth()+1);break}if(SenchaCon2013Demo.app.chartFinished[c[2]]!=true&&SenchaCon2013Demo.app.currentStartDate[c[2]].getTime()>SenchaCon2013Demo.app.currentEndDate[c[2]].getTime()){SenchaCon2013Demo.app.chartFinished[c[2]]=true;SenchaCon2013Demo.app.chartsFinished=SenchaCon2013Demo.app.chartsFinished+1}}}if(SenchaCon2013Demo.app.chartLengths[SenchaCon2013Demo.app.globalIndex]!=0){for(ii=0;ii<m.length;ii++){if(SenchaCon2013Demo.app.currentStartDate[f]>SenchaCon2013Demo.app.currentEndDate[m[ii]]){}}if(r!=0){SenchaCon2013Demo.app.chartLengths[SenchaCon2013Demo.app.globalIndex+1]=SenchaCon2013Demo.app.chartLengths[SenchaCon2013Demo.app.globalIndex+1]+1}SenchaCon2013Demo.app.chartSection[SenchaCon2013Demo.app.globalIndex]=c;if(SenchaCon2013Demo.app.chartSection[SenchaCon2013Demo.app.globalIndex].length>1){for(i=0;i<SenchaCon2013Demo.app.chartSection[SenchaCon2013Demo.app.globalIndex].length;i++){if(SenchaCon2013Demo.app.currentEndDate[SenchaCon2013Demo.app.chartSection[SenchaCon2013Demo.app.globalIndex][0]]>SenchaCon2013Demo.app.currentEndDate[SenchaCon2013Demo.app.chartSection[SenchaCon2013Demo.app.globalIndex][(i+1)]]){d=true}}}if(d==true){if(r!=0){SenchaCon2013Demo.app.chartLengths[SenchaCon2013Demo.app.globalIndex]=SenchaCon2013Demo.app.chartLengths[SenchaCon2013Demo.app.globalIndex]-1}}SenchaCon2013Demo.app.globalIndex=SenchaCon2013Demo.app.globalIndex+1}var b=0;for(i=0;i<m.length;i++){if(SenchaCon2013Demo.app.currentStartDate[m[i]].getTime()==s.getTime()&&p[m[i]]==p[f]&&SenchaCon2013Demo.app.currentStartDate[f]<=SenchaCon2013Demo.app.currentEndDate[f]){if(SenchaCon2013Demo.app.currentEndDate[f]>SenchaCon2013Demo.app.currentEndDate[m[i]]){SenchaCon2013Demo.app.sandwich=true}b=b+1;SenchaCon2013Demo.app.chartIsPaused[f]=false;if(m[i]<f){switch(SenchaCon2013Demo.app.granularities[m[i]]){case"Hourly":SenchaCon2013Demo.app.currentStartDate[m[i]].setMinutes(SenchaCon2013Demo.app.currentStartDate[m[i]].getMinutes()+60);break;case"Daily":SenchaCon2013Demo.app.currentStartDate[m[i]].setDate(SenchaCon2013Demo.app.currentStartDate[m[i]].getDate()+1);break;case"Weekly":SenchaCon2013Demo.app.currentStartDate[m[i]].setDate(SenchaCon2013Demo.app.currentStartDate[m[i]].getDate()+7);break;case"Monthly":SenchaCon2013Demo.app.currentStartDate[m[i]].setDate(1);SenchaCon2013Demo.app.currentStartDate[m[i]].setMonth(SenchaCon2013Demo.app.currentStartDate[m[i]].getMonth()+1);break}}}}if(b!=0){SenchaCon2013Demo.app.chartLengths[SenchaCon2013Demo.app.globalIndex]=SenchaCon2013Demo.app.chartLengths[SenchaCon2013Demo.app.globalIndex]+1}if(p[f]<p[m[0]]&&SenchaCon2013Demo.app.chartFinished[f]!=true&&SenchaCon2013Demo.app.initialPosition[m[0]]==false){SenchaCon2013Demo.app.chartLengths[SenchaCon2013Demo.app.globalIndex]=SenchaCon2013Demo.app.chartLengths[SenchaCon2013Demo.app.globalIndex]+1}if(p[f]>p[m[0]]&&SenchaCon2013Demo.app.chartFinished[f]!=true&&SenchaCon2013Demo.app.initialPosition[m[0]]==false){SenchaCon2013Demo.app.chartLengths[SenchaCon2013Demo.app.globalIndex]=SenchaCon2013Demo.app.chartLengths[SenchaCon2013Demo.app.globalIndex]+1}for(i=0;i<m.length;i++){SenchaCon2013Demo.app.chartIsRunning[m[i]]=true;SenchaCon2013Demo.app.chartIsPaused[m[i]]=false;SenchaCon2013Demo.app.initialPosition[m[i]]=false}SenchaCon2013Demo.app.firstGlobalDate=false;if(b!=0){return false}SenchaCon2013Demo.app.nullSearchReturnedTrue=false;SenchaCon2013Demo.app.finishCall=false;return true},nullSearch:function(a,c){var b=false;for(i=1;i<5;i++){if(SenchaCon2013Demo.app.dateSet[i]==true&&(SenchaCon2013Demo.app.chartIsRunning[i]==false||SenchaCon2013Demo.app.chartIsPaused[i]==true)&&SenchaCon2013Demo.app.chartFinished[i]==false&&SenchaCon2013Demo.app.currentStartDate[i]<a&&SenchaCon2013Demo.app.currentStartDate[i]>=c){b=true}}if(b==false){return false}else{return true}},playChartsGlobal:function(a){for(i=1;i<5;i++){chartPos=SenchaCon2013Demo.app.globalSyncChartPositions[a][i];if(chartPos!=undefined&&SenchaCon2013Demo.app.isChartConfigured[i]){this.getApplication().getController("Playback").setPanelDateCaption(i,chartPos);SenchaCon2013Demo.app.newChart[i].bindStore(SenchaCon2013Demo.app.jsonstore[i][chartPos])}}},calculateGlobalSyncChartPositionsMap:function(){this.getApplication().getController("Main").checkForConfiguredGraphPanels();var c=SenchaCon2013Demo.app.maximumPositions[0];SenchaCon2013Demo.app.globalSyncChartPositions=new Array();for(i=0;i<=c;i++){SenchaCon2013Demo.app.globalSyncChartPositions[i]=new Array();for(j=0;j<5;j++){SenchaCon2013Demo.app.globalSyncChartPositions[i][j]=0}}for(var b=1;b<=c;b++){if(b<=SenchaCon2013Demo.app.chartLengths[0]){for(j=0;j<SenchaCon2013Demo.app.chartSection[0].length;j++){SenchaCon2013Demo.app.chartValue[SenchaCon2013Demo.app.chartSection[0][j]]=SenchaCon2013Demo.app.chartValue[SenchaCon2013Demo.app.chartSection[0][j]]+1;for(k=0;k<5;k++){if(SenchaCon2013Demo.app.globalSyncChartPositions[b][k]==0){SenchaCon2013Demo.app.globalSyncChartPositions[b][k]=SenchaCon2013Demo.app.globalSyncChartPositions[b-1][k]}}SenchaCon2013Demo.app.globalSyncChartPositions[b][SenchaCon2013Demo.app.chartSection[0][j]]=SenchaCon2013Demo.app.chartValue[SenchaCon2013Demo.app.chartSection[0][j]]}continue}var a=0;for(i=0;i<SenchaCon2013Demo.app.chartSection.length-1;i++){a=a+SenchaCon2013Demo.app.chartLengths[i];if(b>a&&b<=(SenchaCon2013Demo.app.chartLengths[i+1]+a)){for(j=0;j<SenchaCon2013Demo.app.chartSection[i+1].length;j++){SenchaCon2013Demo.app.chartValue[SenchaCon2013Demo.app.chartSection[i+1][j]]=SenchaCon2013Demo.app.chartValue[SenchaCon2013Demo.app.chartSection[i+1][j]]+1;for(k=0;k<5;k++){if(SenchaCon2013Demo.app.globalSyncChartPositions[b][k]==0){SenchaCon2013Demo.app.globalSyncChartPositions[b][k]=SenchaCon2013Demo.app.globalSyncChartPositions[b-1][k]}}SenchaCon2013Demo.app.globalSyncChartPositions[b][SenchaCon2013Demo.app.chartSection[i+1][j]]=SenchaCon2013Demo.app.chartValue[SenchaCon2013Demo.app.chartSection[i+1][j]]}continue}}}},});var settingsController;Ext.define("SenchaCon2013Demo.controller.Settings",{extend:"Ext.app.Controller",xtype:"settingscontroller",config:{refs:{initController:"initcontroller",mainController:"maincontroller",fourPanelLayout:"fourpanellayout",settingsPanel:"settingspanel",globalSettingsPanel:"globalsettingspanel",settingsButton:"button[id=settingsbutton]",globalSettingsButton:"button[id=globalsettingsbutton]",databaseSetting:"selectfield[id=databaseselectfield]",graphTitleSetting:"textfield[label=Graph Title:]",xAxisSetting:"selectfield[label=X-Axis:]",yAxisSetting:"selectfield[label=Y-Axis:]",groupBySetting:"selectfield[label=Group By:]",granularitySetting:"selectfield[label=Granularity:]",numberActivePanelsSetting:"selectfield[id=activepanelsfield]",chartTypeSetting:"selectfield[label=Chart Type:]",startDateSetting:"datepickerfield[label=Start Date:]",endDateSetting:"datepickerfield[label=End Date:]",playSpeedSettings:"selectfield[id=playspeedsetting]",doneButtonSettings:"button[id=settingsdonebutton]",cancelButtonSettings:"button[id=settingscancelbutton]",clearPanelSettings:"button[id=clearpanelbutton]",doneButtonGlobalSettings:"button[id=globalsettingsdonebutton]",cancelButtonGlobalSettings:"button[id=globalsettingscancelbutton]",clearCacheButtonGlobalSettings:"button[id=clearcachebuttonglobalsettings]",addChart1Settings:"button[id=chart1Button]",addChart2Settings:"button[id=chart2Button]",addChart3Settings:"button[id=chart3Button]",addChart4Settings:"button[id=chart4Button]",},control:{settingsButton:{tap:"showSettingsPanel"},globalSettingsButton:{tap:"showGlobalSettingsPanel"},addChart1Settings:{tap:"showSettingsPanel1"},addChart2Settings:{tap:"showSettingsPanel2"},addChart3Settings:{tap:"showSettingsPanel3"},addChart4Settings:{tap:"showSettingsPanel4"},doneButtonGlobalSettings:{tap:"doneGlobalSettingsPanel"},cancelButtonGlobalSettings:{tap:"cancelGlobalSettingsPanel"},doneButtonSettings:{tap:"hideSettingsPanel"},cancelButtonSettings:{tap:"cancelSettingsPanel"},clearCacheButtonGlobalSettings:{tap:"clearLocalCache"},clearPanelSettings:{tap:"clearPanelSettingsStore"},chartTypeSetting:{change:"manageDimensions"},yAxisSetting:{change:"manageFieldValueChangeForyAxisField"},xAxisSetting:{change:"manageFieldValueChangeForxAxisField"},},},launch:function(){settingsController=this;SenchaCon2013Demo.app.GranularityFieldStore=[{text:"None Defined",value:"none"},{text:"Hourly",value:"Hourly"},{text:"Daily",value:"Daily"},{text:"Weekly",value:"Weekly"},{text:"Monthly",value:"Monthly"}]},showSettingsPanel1:function(){this.getApplication().getController("Main").setFocusOnPanel1();this.showSettingsPanel()},showSettingsPanel2:function(){this.getApplication().getController("Main").setFocusOnPanel2();this.showSettingsPanel()},showSettingsPanel3:function(){this.getApplication().getController("Main").setFocusOnPanel3();this.showSettingsPanel()},showSettingsPanel4:function(){this.getApplication().getController("Main").setFocusOnPanel4();this.showSettingsPanel()},manageDimensions:function(){var e=SenchaCon2013Demo.app.currentActivePanelIndex;var a=SenchaCon2013Demo.app.EmptyFieldStore;var d=SenchaCon2013Demo.app.EmptyFieldStore;var b=SenchaCon2013Demo.app.EmptyFieldStore;var c=SenchaCon2013Demo.app.GranularityFieldStore;if(SenchaCon2013Demo.app.PanelDataFieldStore[e]!=undefined){a=SenchaCon2013Demo.app.PanelDataFieldStore[e]}if(SenchaCon2013Demo.app.PanelCategoryFieldStore[e]!=undefined){d=SenchaCon2013Demo.app.PanelCategoryFieldStore[e]}if(SenchaCon2013Demo.app.PanelCategoryFieldStoreWithTime[e]!=undefined){b=SenchaCon2013Demo.app.PanelCategoryFieldStoreWithTime[e]}this.getGranularitySetting().setOptions(c);switch(this.getChartTypeSetting().getValue()){case"scatter":this.getGroupBySetting().show("fadeIn");this.getXAxisSetting().setLabel("X-Axis:");this.getYAxisSetting().show("fadeIn");this.getGroupBySetting().hide();this.getGroupBySetting().setValue("none");this.getXAxisSetting().setOptions(a);this.getYAxisSetting().setOptions(a);break;case"horizontalbar":this.getGroupBySetting().show("fadeIn");this.getYAxisSetting().show("fadeIn");this.getXAxisSetting().setLabel("X-Axis:");this.getXAxisSetting().setOptions(a);this.getYAxisSetting().setOptions(b);this.getGroupBySetting().setOptions(d);break;case"verticalbar":this.getGroupBySetting().show("fadeIn");this.getXAxisSetting().setLabel("X-Axis:");this.getYAxisSetting().show("fadeIn");this.getYAxisSetting().setOptions(a);this.getXAxisSetting().setOptions(b);this.getGroupBySetting().setOptions(d);break;case"line":this.getGroupBySetting().show("fadeIn");this.getXAxisSetting().setLabel("X-Axis:");this.getYAxisSetting().show("fadeIn");this.getYAxisSetting().setOptions(a);this.getXAxisSetting().setOptions(b);this.getGroupBySetting().setOptions(d);break;case"area":this.getGroupBySetting().show("fadeIn");this.getXAxisSetting().setLabel("X-Axis:");this.getYAxisSetting().show("fadeIn");this.getYAxisSetting().setOptions(a);this.getXAxisSetting().setOptions(b);this.getGroupBySetting().setOptions(d);break;case"pie":this.getGroupBySetting().show("fadeIn");this.getXAxisSetting().setLabel("Data Value:");this.getYAxisSetting().hide("fadeOut");this.getGroupBySetting().setOptions(d);this.getXAxisSetting().setOptions(a);break;case"gauge":this.getGroupBySetting().hide("fadeOut");this.getXAxisSetting().setLabel("Data Value:");this.getYAxisSetting().hide("fadeOut");this.getXAxisSetting().setOptions(a);break;case"radar":this.getGroupBySetting().show("fadeIn");this.getXAxisSetting().setLabel("Data Value:");this.getYAxisSetting().hide("fadeOut");this.getGroupBySetting().setOptions(d);this.getXAxisSetting().setOptions(a);break;case"none":this.getGroupBySetting().show("fadeIn");this.getXAxisSetting().setLabel("Data Value:");this.getYAxisSetting().hide("fadeOut");this.getGroupBySetting().setOptions(SenchaCon2013Demo.app.EmptyFieldStore);this.getXAxisSetting().setOptions(SenchaCon2013Demo.app.EmptyFieldStore);this.getYAxisSetting().setOptions(SenchaCon2013Demo.app.EmptyFieldStore)}},manageFieldValueChangeForyAxisField:function(){this.manageGranularitySettings()},manageFieldValueChangeForxAxisField:function(){this.manageGranularitySettings()},manageGranularitySettings:function(){if(this.getChartTypeSetting().getValue()=="horizontalbar"){var a=this.getYAxisSetting().getValue()}else{if(this.getChartTypeSetting().getValue()=="verticalbar"||this.getChartTypeSetting().getValue()=="line"){var a=this.getXAxisSetting().getValue()}}switch(a){case"Hour":this.getGranularitySetting().setOptions([{text:"None Defined",value:"none"},{text:"Hourly",value:"Hourly"}]);break;case"Date":this.getGranularitySetting().setOptions([{text:"None Defined",value:"none"},{text:"Hourly",value:"Hourly"},{text:"Daily",value:"Daily"}]);break;case"DayOfWeek":this.getGranularitySetting().setOptions([{text:"None Defined",value:"none"},{text:"Hourly",value:"Hourly"},{text:"Daily",value:"Daily"}]);break;case"Week":this.getGranularitySetting().setOptions([{text:"None Defined",value:"none"},{text:"Hourly",value:"Hourly"},{text:"Daily",value:"Daily"},{text:"Weekly",value:"Weekly"}]);break;case"Month":this.getGranularitySetting().setOptions([{text:"None Defined",value:"none"},{text:"Hourly",value:"Hourly"},{text:"Daily",value:"Daily"},{text:"Weekly",value:"Weekly"},{text:"Monthly",value:"Monthly"}]);break}},showGlobalSettingsPanel:function(){this.getNumberActivePanelsSetting().setValue(SenchaCon2013Demo.app.numberActivePanels);this.getInterestingMomentsSetting().setValue(SenchaCon2013Demo.app.interestingMoments);this.getReplayCommentsSetting().setValue(SenchaCon2013Demo.app.replayCommentsSetting);this.getPlaySpeedSettings().setValue(SenchaCon2013Demo.app.playSpeed);this.getImType3Setting().setValue(SenchaCon2013Demo.app.interestingMomentType3Setting);this.getImType4Setting().setValue(SenchaCon2013Demo.app.interestingMomentType4Setting);this.getImType1Setting().setValue(SenchaCon2013Demo.app.interestingMomentType1Setting);this.getImType2Setting().setValue(SenchaCon2013Demo.app.interestingMomentType2Setting);this.getGlobalSettingsPanel().show()},showSettingsPanel:function(){this.getApplication().getController("DatabaseTable").getAllDatabaseTables()},configureSettingsPanel:function(){this.getDatabaseSetting().setOptions(SenchaCon2013Demo.app.DatabaseTableFieldStore);this.getDatabaseSetting().setValue(SenchaCon2013Demo.app.databaseSetting[SenchaCon2013Demo.app.currentActivePanelIndex]);this.getApplication().getController("DatabaseTable").getDatabaseTableFieldsForDatabase()},showConfiguredSettingsPanel:function(){this.getChartTypeSetting().setValue(SenchaCon2013Demo.app.chartTypes[SenchaCon2013Demo.app.currentActivePanelIndex]);this.manageDimensions();this.getXAxisSetting().setValue(SenchaCon2013Demo.app.xs[SenchaCon2013Demo.app.currentActivePanelIndex]);this.getYAxisSetting().setValue(SenchaCon2013Demo.app.ys[SenchaCon2013Demo.app.currentActivePanelIndex]);this.getGranularitySetting().setValue(SenchaCon2013Demo.app.granularities[SenchaCon2013Demo.app.currentActivePanelIndex]);this.getGroupBySetting().setValue(SenchaCon2013Demo.app.groupBys[SenchaCon2013Demo.app.currentActivePanelIndex]);this.getStartDateSetting().setValue(SenchaCon2013Demo.app.startDate[SenchaCon2013Demo.app.currentActivePanelIndex]);this.getEndDateSetting().setValue(SenchaCon2013Demo.app.currentEndDate[SenchaCon2013Demo.app.currentActivePanelIndex]);this.getSettingsPanel().show();this.manageGranularitySettings()},cancelSettingsPanel:function(){this.getSettingsPanel().hide(true)},cancelGlobalSettingsPanel:function(){this.getGlobalSettingsPanel().hide(true)},clearLocalCache:function(){if(developerMode){try{for(i=0;i<=localStorage.length-1;){key=localStorage.key(i);if(key.indexOf("get")=="0"){localStorage.removeItem(key)}else{i++}}}catch(a){}this.getGlobalSettingsPanel().hide(true)}else{localStorage.clear();resetSettings()}},clearPanelSettingsStore:function(){clearStore("UserSettings"+SenchaCon2013Demo.app.currentActivePanelIndex);Ext.get("chart"+SenchaCon2013Demo.app.currentActivePanelIndex+"Button").show();Ext.get("chart"+SenchaCon2013Demo.app.currentActivePanelIndex+"Image").show();var b=SenchaCon2013Demo.app.newChart[SenchaCon2013Demo.app.currentActivePanelIndex];if(b!=undefined){if(b.getLegend()!=undefined){b.getLegend().destroy()}b.destroy()}SenchaCon2013Demo.app.panelSettings[SenchaCon2013Demo.app.currentActivePanelIndex]="";SenchaCon2013Demo.app.panelData[SenchaCon2013Demo.app.currentActivePanelIndex]="";var a=SenchaCon2013Demo.app.currentActivePanelIndex;Ext.ComponentQuery.query("addchartpanel"+a)[0].setHtml("");this.manageDimensions();this.getApplication().getController("Main").checkForConfiguredGraphPanels()},doneGlobalSettingsPanel:function(){SenchaCon2013Demo.app.numberActivePanels=this.getNumberActivePanelsSetting().getValue();SenchaCon2013Demo.app.playSpeed=this.getPlaySpeedSettings().getValue();var a;a=[{NumberOfPanels:this.getNumberActivePanelsSetting().getValue(),PlaySpeed:this.getPlaySpeedSettings().getValue()}];Ext.getStore("GlobalSettingsStore").setData(a);Ext.getStore("GlobalSettingsStore").sync();this.getApplication().getController("Main").changePanels();this.updateChartAnimationSettings();this.cancelGlobalSettingsPanel()},updateChartAnimationSettings:function(){SenchaCon2013Demo.app.animateSpeed=SenchaCon2013Demo.app.playSpeed-100;for(i=0;i<SenchaCon2013Demo.app.newChart.length;i++){if(SenchaCon2013Demo.app.newChart[i]!=null){var a=SenchaCon2013Demo.app.newChart[i].getSeries();for(j=0;j<a.length;j++){a[j].setAnimate({duration:SenchaCon2013Demo.app.animateSpeed,delay:SenchaCon2013Demo.app.animateSpeed/2,easing:"ease"})}SenchaCon2013Demo.app.newChart[i].setAnimate({duration:SenchaCon2013Demo.app.animateSpeed,delay:SenchaCon2013Demo.app.animateSpeed/2,easing:"ease"})}}},showSettingsErrorMessage:function(){Ext.Msg.alert("Error","Please select all required fields to proceed.",Ext.emptyFn)},hideSettingsPanel:function(){$starttime=new Date();if(this.getChartTypeSetting().getValue()=="scatter"&&(this.getXAxisSetting().getValue()=="none"||this.getYAxisSetting().getValue()=="none"||this.getGranularitySetting().getValue()=="none")){this.showSettingsErrorMessage()}else{if((this.getChartTypeSetting().getValue()=="line"||this.getChartTypeSetting().getValue()=="verticalbar"||this.getChartTypeSetting().getValue()=="area")&&(this.getXAxisSetting().getValue()=="none"||this.getYAxisSetting().getValue()=="none"||this.getGroupBySetting().getValue()=="none"||this.getGranularitySetting().getValue()=="none")){this.showSettingsErrorMessage()}else{if(this.getChartTypeSetting().getValue()=="pie"&&(this.getXAxisSetting().getValue()=="none"||this.getGroupBySetting().getValue()=="none"||this.getGranularitySetting().getValue()=="none")){this.showSettingsErrorMessage()}else{if(this.getChartTypeSetting().getValue()=="horizontalbar"&&(this.getXAxisSetting().getValue()=="none"||this.getYAxisSetting().getValue()=="none"||this.getGranularitySetting().getValue()=="none")){this.showSettingsErrorMessage()}else{if(this.getChartTypeSetting().getValue()=="radar"&&(this.getXAxisSetting().getValue()=="none"||this.getGroupBySetting().getValue()=="none"||this.getGranularitySetting().getValue()=="none")){this.showSettingsErrorMessage()}else{if(this.getChartTypeSetting().getValue()=="gauge"&&(this.getXAxisSetting().getValue()=="none"||this.getGranularitySetting().getValue()=="none")){this.showSettingsErrorMessage()}else{if(SenchaCon2013Demo.app.currentActivePanelIndex==1){Ext.get("chart1Button").hide();Ext.get("chart1Image").hide()}else{if(SenchaCon2013Demo.app.currentActivePanelIndex==2){Ext.get("chart2Button").hide();Ext.get("chart2Image").hide()}else{if(SenchaCon2013Demo.app.currentActivePanelIndex==3){Ext.get("chart3Button").hide();Ext.get("chart3Image").hide()}else{Ext.get("chart4Button").hide();Ext.get("chart4Image").hide()}}}SenchaCon2013Demo.app.databaseSetting[SenchaCon2013Demo.app.currentActivePanelIndex]=this.getDatabaseSetting().getValue();SenchaCon2013Demo.app.graphTitle[SenchaCon2013Demo.app.currentActivePanelIndex]=this.getGraphTitleSetting().getValue();SenchaCon2013Demo.app.xs[SenchaCon2013Demo.app.currentActivePanelIndex]=this.getXAxisSetting().getValue();SenchaCon2013Demo.app.ys[SenchaCon2013Demo.app.currentActivePanelIndex]=this.getYAxisSetting().getValue();SenchaCon2013Demo.app.granularities[SenchaCon2013Demo.app.currentActivePanelIndex]=this.getGranularitySetting().getValue();SenchaCon2013Demo.app.chartTypes[SenchaCon2013Demo.app.currentActivePanelIndex]=this.getChartTypeSetting().getValue();SenchaCon2013Demo.app.groupBys[SenchaCon2013Demo.app.currentActivePanelIndex]=this.getGroupBySetting().getValue();SenchaCon2013Demo.app.startDate[SenchaCon2013Demo.app.currentActivePanelIndex]=new Date(this.getStartDateSetting().getValue());SenchaCon2013Demo.app.currentStartDate[SenchaCon2013Demo.app.currentActivePanelIndex]=new Date(this.getStartDateSetting().getValue());SenchaCon2013Demo.app.currentDate[SenchaCon2013Demo.app.currentActivePanelIndex]=new Date(this.getStartDateSetting().getValue());SenchaCon2013Demo.app.currentEndDate[SenchaCon2013Demo.app.currentActivePanelIndex]=new Date(this.getEndDateSetting().getValue());SenchaCon2013Demo.app.XmaxReceived[SenchaCon2013Demo.app.currentActivePanelIndex]=false;SenchaCon2013Demo.app.YmaxReceived[SenchaCon2013Demo.app.currentActivePanelIndex]=false;switch(SenchaCon2013Demo.app.granularities[SenchaCon2013Demo.app.currentActivePanelIndex]){case"Hourly":SenchaCon2013Demo.app.valueGranularities[SenchaCon2013Demo.app.currentActivePanelIndex]=1;break;case"Daily":SenchaCon2013Demo.app.valueGranularities[SenchaCon2013Demo.app.currentActivePanelIndex]=2;break;case"Weekly":SenchaCon2013Demo.app.valueGranularities[SenchaCon2013Demo.app.currentActivePanelIndex]=3;break;case"Monthly":SenchaCon2013Demo.app.valueGranularities[SenchaCon2013Demo.app.currentActivePanelIndex]=4;break}var e=SenchaCon2013Demo.app.currentEndDate[SenchaCon2013Demo.app.currentActivePanelIndex]-SenchaCon2013Demo.app.currentStartDate[SenchaCon2013Demo.app.currentActivePanelIndex];var d=Math.floor(e/(1000*60*60*24));var b=SenchaCon2013Demo.app.currentStartDate[SenchaCon2013Demo.app.currentActivePanelIndex]-SenchaCon2013Demo.app.currentEndDate[SenchaCon2013Demo.app.currentActivePanelIndex];var c=Math.floor(b/(1000*60*60*24));if(c>0){Ext.Msg.alert("Check Dates","Start date must be earlier than end date.")}else{if(d<=0&&SenchaCon2013Demo.app.granularities[SenchaCon2013Demo.app.currentActivePanelIndex]!="Hourly"){Ext.Msg.alert("Check Dates","Start and end date can not be same")}else{var a;a=[{Database:this.getDatabaseSetting().getValue(),GraphTitle:this.getGraphTitleSetting().getValue(),XAxis:this.getXAxisSetting().getValue(),YAxis:this.getYAxisSetting().getValue(),GroupBy:this.getGroupBySetting().getValue(),Granularity:this.getGranularitySetting().getValue(),ChartType:this.getChartTypeSetting().getValue(),StartDate:this.getStartDateSetting().getValue(),EndDate:this.getEndDateSetting().getValue()}];Ext.getStore("UserSettings"+SenchaCon2013Demo.app.currentActivePanelIndex).setData(a);Ext.getStore("UserSettings"+SenchaCon2013Demo.app.currentActivePanelIndex).sync();this.getSettingsPanel().hide(true);SenchaCon2013Demo.app.dateSet[SenchaCon2013Demo.app.currentActivePanelIndex]=true;showLoadingMask();this.getApplication().getController("Main").chartSetUp()}}}}}}}}},});var playbackController;Ext.define("SenchaCon2013Demo.controller.Playback",{extend:"Ext.app.Controller",xtype:"playbackcontroller",config:{refs:{initController:"initcontroller",mainController:"maincontroller",fourPanelLayout:"fourpanellayout",resetBackwardButton:"button[id=ResetBackwardButton]",stepBackwardButton:"button[id=StepBackwardButton]",playBackwardButton:"button[id=PlayBackwardButton]",pauseButton:"button[id=PauseButton]",playForwardButton:"button[id=PlayForwardButton]",stepForwardButton:"button[id=StepForwardButton]",resetForwardButton:"button[id=ResetForwardButton]",slider0:"slider0",slider1:"slider1",slider2:"slider2",slider3:"slider3",slider4:"slider4",slider5:"slider5",},control:{resetBackwardButton:{tap:"resetBackwardFunction"},stepBackwardButton:{tap:"stepBackwardFunction"},playBackwardButton:{tap:"playBackwardFunction"},pauseButton:{tap:"pauseFunction"},playForwardButton:{tap:"playForwardFunction"},stepForwardButton:{tap:"stepForwardFunction"},resetForwardButton:{tap:"resetForwardFunction"},slider0:{change:"sliderListenerFunctionChange",drag:"sliderListenerFunctionDrag"},slider1:{change:"sliderListenerFunctionChange",drag:"sliderListenerFunctionDrag"},slider2:{change:"sliderListenerFunctionChange",drag:"sliderListenerFunctionDrag"},slider3:{change:"sliderListenerFunctionChange",drag:"sliderListenerFunctionDrag"},slider4:{change:"sliderListenerFunctionChange",drag:"sliderListenerFunctionDrag"},slider5:{change:"sliderListenerFunctionChange",drag:"sliderListenerFunctionDrag"},},},launch:function(){playbackController=this},resumeLastPlaybackAction:function(){var a=SenchaCon2013Demo.app.currentActivePanelIndex;logInfo("ResumePlayback called for chart="+a+" at sliderValue="+SenchaCon2013Demo.app.sliders[a].getValue()[0]+" and Last action is == "+SenchaCon2013Demo.app.lastPlaybackAction);if(SenchaCon2013Demo.app.lastPlaybackAction!=undefined){if(SenchaCon2013Demo.app.lastPlaybackAction=="playForward"){this.playForwardFunction()}else{if(SenchaCon2013Demo.app.lastPlaybackAction=="playBackward"){this.playBackwardFunction()}}}},sliderListenerFunctionDrag:function(c,a,d){d=d[0];var b=SenchaCon2013Demo.app.currentActivePanelIndex;SenchaCon2013Demo.app.currentPositions[b]=SenchaCon2013Demo.app.sliders[b].getValue()[0];this.sliderListenerFunctionChange(c)},setPanelDateCaption:function(d,f){var c="";var g="ddd mmm dd yyyy HH:MM:ss";var a="";try{a=SenchaCon2013Demo.app.globalDateArray[d][f]}catch(e){}if(SenchaCon2013Demo.app.granularities[d]!="Hourly"){g="ddd mmm dd yyyy"}try{a=dateFormat(a,g)}catch(e){logInfo("Error converting date"+e);a=this.dateConversion(a)}if(d!=0&&d!=5){var b=SenchaCon2013Demo.app.graphTitle[d];c='<h1 style="text-align:center; color: black; z-index: 10; font-size: 14px; padding:10px"><b>'+a+"</b></h1>";Ext.ComponentQuery.query("panel"+d)[0].setHtml(c)}return c},dateConversion:function(b){var a=new Array("Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec");var c=a[parseInt(b.substring(5,7))-1]+" "+b.substring(8,10)+", "+b.substring(0,4);return c},updateSliderInterval:function(){var a=SenchaCon2013Demo.app.sliders[SenchaCon2013Demo.app.currentActivePanelIndex].getValue();SenchaCon2013Demo.app.sliders[SenchaCon2013Demo.app.currentActivePanelIndex].setValue(a%SenchaCon2013Demo.app.differentialMultiplier[SenchaCon2013Demo.app.currentActivePanelIndex])},showCharts:function(){var a=SenchaCon2013Demo.app.currentActivePanelIndex;var b=0;if(SenchaCon2013Demo.app.chartTypes[a]=="scatter"){if(SenchaCon2013Demo.app.groupBys[SenchaCon2013Demo.app.currentActivePanelIndex]!="none"){}else{this.getApplication().getController("Scatter").createScatterChart(SenchaCon2013Demo.app.chartTypes[a],SenchaCon2013Demo.app.jsonstore[a][b],SenchaCon2013Demo.app.dataFieldValues[a],SenchaCon2013Demo.app.categoryFieldValues[a],a,null)}}else{if(SenchaCon2013Demo.app.chartTypes[a]=="horizontalbar"||SenchaCon2013Demo.app.chartTypes[a]=="verticalbar"||SenchaCon2013Demo.app.chartTypes[a]=="line"||SenchaCon2013Demo.app.chartTypes[a]=="area"){this.getApplication().getController("Main").changeModelFields();if(SenchaCon2013Demo.app.chartTypes[a]=="horizontalbar"){if(SenchaCon2013Demo.app.groupBys[SenchaCon2013Demo.app.currentActivePanelIndex]!="none"){SenchaCon2013Demo.app.getController("HorizontalBar").createHorizontalBarChart(SenchaCon2013Demo.app.jsonstore[a][b],a,SenchaCon2013Demo.app.groupByBarLabels)}else{SenchaCon2013Demo.app.getController("HorizontalBar").createHorizontalBarChart(SenchaCon2013Demo.app.jsonstore[a][b],a,null)}}else{if(SenchaCon2013Demo.app.chartTypes[a]=="verticalbar"){if(SenchaCon2013Demo.app.groupBys[SenchaCon2013Demo.app.currentActivePanelIndex]!="none"){SenchaCon2013Demo.app.getController("VerticalBar").createVerticalBarChart(SenchaCon2013Demo.app.jsonstore[a][b],a,SenchaCon2013Demo.app.groupByBarLabels)}else{SenchaCon2013Demo.app.getController("VerticalBar").createVerticalBarChart(SenchaCon2013Demo.app.jsonstore[a][b],a,null)}}else{if(SenchaCon2013Demo.app.chartTypes[a]=="area"){if(SenchaCon2013Demo.app.groupBys[SenchaCon2013Demo.app.currentActivePanelIndex]!="none"){SenchaCon2013Demo.app.getController("AreaBar").createAreaChart(SenchaCon2013Demo.app.jsonstore[a][b],a,SenchaCon2013Demo.app.groupByBarLabels)}else{SenchaCon2013Demo.app.getController("AreaBar").createAreaChart(SenchaCon2013Demo.app.jsonstore[a][b],a,null)}}else{if(SenchaCon2013Demo.app.groupBys[SenchaCon2013Demo.app.currentActivePanelIndex]=="none"){SenchaCon2013Demo.app.getController("LineBar").createLineChart(SenchaCon2013Demo.app.jsonstore[a][b],a,null)}else{SenchaCon2013Demo.app.getController("LineBar").createLineChart(SenchaCon2013Demo.app.jsonstore[a][b],a,SenchaCon2013Demo.app.groupByBarLabels)}}}}}else{if(SenchaCon2013Demo.app.chartTypes[a]=="pie"){this.getApplication().getController("Pie").createPieChart(SenchaCon2013Demo.app.jsonstore[a][b],SenchaCon2013Demo.app.dataFieldValues[a],SenchaCon2013Demo.app.categoryFieldValues[a],a)}else{if(SenchaCon2013Demo.app.chartTypes[a]=="gauge"){this.getApplication().getController("Gauge").createGaugeChart(SenchaCon2013Demo.app.jsonstore[a][b],SenchaCon2013Demo.app.dataFieldValues[a],a)}else{if(SenchaCon2013Demo.app.chartTypes[a]=="radar"){this.getApplication().getController("Radar").createRadarChart(SenchaCon2013Demo.app.jsonstore[a][b],SenchaCon2013Demo.app.dataFieldValues[a],SenchaCon2013Demo.app.categoryFieldValues[a],a)}}}}}SenchaCon2013Demo.app.chartCreated[a]=true;if(SenchaCon2013Demo.app.dateSet[a]==true){this.getApplication().getController("Main").setFocusOnPanel(a)}else{SenchaCon2013Demo.app.dateSet[a]=true}this.setPanelDateCaption(a,b);Ext.ComponentQuery.query("panel"+a)[0].add(SenchaCon2013Demo.app.newChart[a]);hideLoadingMask()},resetFunction:function(){var a=SenchaCon2013Demo.app.currentActivePanelIndex;clearInterval(SenchaCon2013Demo.app.waitvariables[a]);var b;b=SenchaCon2013Demo.app.minimumPositions[a];SenchaCon2013Demo.app.sliders[a].setValue(b);SenchaCon2013Demo.app.currentPositions[a]=b;this.showCharts();if(a!=0){SenchaCon2013Demo.app.sliders[a].fireEvent("change",SenchaCon2013Demo.app.sliders[a],a)}if(a==0){for(i=1;i<5;i++){SenchaCon2013Demo.app.currentActivePanelIndex=i;SenchaCon2013Demo.app.sliders[i].setValue(b);SenchaCon2013Demo.app.sliders[i].fireEvent("change",SenchaCon2013Demo.app.sliders[i],i)}SenchaCon2013Demo.app.currentActivePanelIndex=0}},sliderListenerFunctionChange:function(b){var a=SenchaCon2013Demo.app.currentActivePanelIndex;var d=b.getValue()[0];var c=Math.floor(d/SenchaCon2013Demo.app.differentialMultiplier[SenchaCon2013Demo.app.currentActivePanelIndex]);SenchaCon2013Demo.app.currentPositions[SenchaCon2013Demo.app.currentActivePanelIndex]=SenchaCon2013Demo.app.sliders[SenchaCon2013Demo.app.currentActivePanelIndex].getValue()[0];logInfo("sliderValue="+d+" & differential="+SenchaCon2013Demo.app.differentialMultiplier[SenchaCon2013Demo.app.currentActivePanelIndex]+" & value="+c);if(a!=0){this.setPanelDateCaption(a,c);SenchaCon2013Demo.app.newChart[a].bindStore(SenchaCon2013Demo.app.jsonstore[a][c])}else{if(a==0){this.getApplication().getController("GlobalSync").globalSyncSliderFunctionChange(d,a)}}},resetBackwardFunction:function(){var a=SenchaCon2013Demo.app.currentActivePanelIndex;SenchaCon2013Demo.app.lastPlaybackAction="resetBackward";clearInterval(SenchaCon2013Demo.app.waitvariables[a]);var b;b=SenchaCon2013Demo.app.minimumPositions[a];SenchaCon2013Demo.app.sliders[a].setValue(b);SenchaCon2013Demo.app.currentPositions[a]=b;SenchaCon2013Demo.app.sliders[a].fireEvent("change",SenchaCon2013Demo.app.sliders[a],a)},stepBackwardFunction:function(){var a=SenchaCon2013Demo.app.currentActivePanelIndex;if(SenchaCon2013Demo.app.currentPositions[a]!=SenchaCon2013Demo.app.minimumPositions[a]){this.updateSliderInterval()}SenchaCon2013Demo.app.lastPlaybackAction="stepBackward";clearInterval(SenchaCon2013Demo.app.waitvariables[a]);if(SenchaCon2013Demo.app.currentPositions[a]>SenchaCon2013Demo.app.minimumPositions[a]){newPosition=SenchaCon2013Demo.app.currentPositions[a]-SenchaCon2013Demo.app.differentialMultiplier[SenchaCon2013Demo.app.currentActivePanelIndex];SenchaCon2013Demo.app.sliders[a].setValue(newPosition);SenchaCon2013Demo.app.sliders[a].fireEvent("change",SenchaCon2013Demo.app.sliders[a],a)}},playBackwardFunction:function(){var a=SenchaCon2013Demo.app.currentActivePanelIndex;if(SenchaCon2013Demo.app.currentPositions[a]!=SenchaCon2013Demo.app.minimumPositions[a]){this.updateSliderInterval()}this.stepBackwardFunction();SenchaCon2013Demo.app.lastPlaybackAction="playBackward";clearInterval(SenchaCon2013Demo.app.waitvariables[a]);SenchaCon2013Demo.app.currentPositions[a]=SenchaCon2013Demo.app.sliders[a].getValue()[0];SenchaCon2013Demo.app.waitvariables[a]=setInterval(function(){var b;if(SenchaCon2013Demo.app.currentPositions[a]>SenchaCon2013Demo.app.minimumPositions[a]){b=SenchaCon2013Demo.app.currentPositions[a]-SenchaCon2013Demo.app.differentialMultiplier[SenchaCon2013Demo.app.currentActivePanelIndex];SenchaCon2013Demo.app.sliders[a].setValue(b);SenchaCon2013Demo.app.sliders[a].fireEvent("change",SenchaCon2013Demo.app.sliders[a],a)}else{clearInterval(SenchaCon2013Demo.app.waitvariables[a])}},SenchaCon2013Demo.app.playSpeed)},pauseFunction:function(){var a=SenchaCon2013Demo.app.currentActivePanelIndex;logInfo("pauseFunction called for Chart "+a+" at sliderValue="+SenchaCon2013Demo.app.sliders[a].getValue()[0]);clearInterval(SenchaCon2013Demo.app.waitvariables[a]);if(a==0){for(i=1;i<5;i++){clearInterval(SenchaCon2013Demo.app.waitvariables[i])}}},playForwardFunction:function(){var a=SenchaCon2013Demo.app.currentActivePanelIndex;if(SenchaCon2013Demo.app.currentPositions[a]!=SenchaCon2013Demo.app.maximumPositions[a]){this.updateSliderInterval()}this.stepForwardFunction();SenchaCon2013Demo.app.lastPlaybackAction="playForward";clearInterval(SenchaCon2013Demo.app.waitvariables[a]);SenchaCon2013Demo.app.currentPositions[a]=SenchaCon2013Demo.app.sliders[a].getValue()[0];if(SenchaCon2013Demo.app.currentPositions[a]!=SenchaCon2013Demo.app.maximumPositions[a]){SenchaCon2013Demo.app.waitvariables[a]=setInterval(function(){logInfo("Inside setInterval for playForwardFunction at currentPos="+SenchaCon2013Demo.app.currentPositions[a]+" & newPos="+(SenchaCon2013Demo.app.currentPositions[a]+SenchaCon2013Demo.app.differentialMultiplier[a]));var b;if(SenchaCon2013Demo.app.currentPositions[a]<SenchaCon2013Demo.app.maximumPositions[a]){b=SenchaCon2013Demo.app.currentPositions[a]+SenchaCon2013Demo.app.differentialMultiplier[a];SenchaCon2013Demo.app.sliders[a].setValue(b);SenchaCon2013Demo.app.sliders[a].fireEvent("change",SenchaCon2013Demo.app.sliders[a],a)}else{clearInterval(SenchaCon2013Demo.app.waitvariables[a])}},SenchaCon2013Demo.app.playSpeed)}},stepForwardFunction:function(){var a=SenchaCon2013Demo.app.currentActivePanelIndex;if(SenchaCon2013Demo.app.currentPositions[a]!=SenchaCon2013Demo.app.maximumPositions[a]){this.updateSliderInterval()}SenchaCon2013Demo.app.lastPlaybackAction="stepForward";clearInterval(SenchaCon2013Demo.app.waitvariables[a]);if(SenchaCon2013Demo.app.currentPositions[a]<SenchaCon2013Demo.app.maximumPositions[a]){newPosition=SenchaCon2013Demo.app.currentPositions[a]+SenchaCon2013Demo.app.differentialMultiplier[SenchaCon2013Demo.app.currentActivePanelIndex];SenchaCon2013Demo.app.sliders[a].setValue(newPosition);SenchaCon2013Demo.app.sliders[a].fireEvent("change",SenchaCon2013Demo.app.sliders[a],a)}},resetForwardFunction:function(){var a=SenchaCon2013Demo.app.currentActivePanelIndex;SenchaCon2013Demo.app.lastPlaybackAction="resetForward";logMessage("resetForwardFunction for Chart "+SenchaCon2013Demo.app.currentActivePanelIndex);clearInterval(SenchaCon2013Demo.app.waitvariables[a]);var b;b=SenchaCon2013Demo.app.maximumPositions[a];SenchaCon2013Demo.app.sliders[a].setValue(b);SenchaCon2013Demo.app.currentPositions[a]=b;SenchaCon2013Demo.app.sliders[a].fireEvent("change",SenchaCon2013Demo.app.sliders[a],a)}});var databaseTableController;Ext.define("SenchaCon2013Demo.controller.DatabaseTable",{extend:"Ext.app.Controller",xtype:"databasetablecontroller",config:{refs:{initController:"initcontroller",mainController:"maincontroller",databaseSetting:"selectfield[id=databaseselectfield]",chartTypeSetting:"selectfield[label=Chart Type:]",},control:{databaseSetting:{change:"getDatabaseTableFieldsForDatabase",},},},launch:function(){databaseTableController=this},getAllDatabaseTables:function(){if(SenchaCon2013Demo.app.CachedDatabaseTables.length==0){showLoadingMask();Ext.Ajax.request({url:"getAllDatabaseTables.do",method:"GET",success:function(a){hideLoadingMask();var b=Ext.JSON.decode(a.responseText.trim());SenchaCon2013Demo.app.CachedDatabaseTables=b;databaseTableController.decodeDatabaseTableData(b)},failure:function(a){hideLoadingMask();logMessage("Failure Logging in.")},})}else{databaseTableController.decodeDatabaseTableData(SenchaCon2013Demo.app.CachedDatabaseTables)}},decodeDatabaseTableData:function(b){SenchaCon2013Demo.app.DatabaseTableFieldStore=new Array();temp={text:"None Defined",value:"none"};SenchaCon2013Demo.app.DatabaseTableFieldStore.push(temp);for(var a=0;a<b.length;a++){temp={text:b[a].name,value:b[a].tableName};SenchaCon2013Demo.app.DatabaseTableFieldStore.push(temp)}this.getApplication().getController("Settings").configureSettingsPanel()},getDatabaseTableIdForTableName:function(a){var c=0;if(SenchaCon2013Demo.app.CachedDatabaseTables!=undefined&&SenchaCon2013Demo.app.CachedDatabaseTables.length>0){for(var b=0;b<SenchaCon2013Demo.app.CachedDatabaseTables.length;b++){if(SenchaCon2013Demo.app.CachedDatabaseTables[b].tableName==a){c=SenchaCon2013Demo.app.CachedDatabaseTables[b].id;return c}}}return c},saveDatabaseTablesFieldsForDatabaseTableId:function(c,b){if(SenchaCon2013Demo.app.CachedDatabaseTables!=undefined&&SenchaCon2013Demo.app.CachedDatabaseTables.length>0){for(var a=0;a<SenchaCon2013Demo.app.CachedDatabaseTables.length;a++){if(SenchaCon2013Demo.app.CachedDatabaseTables[a].id==c){break}}SenchaCon2013Demo.app.CachedDatabaseTables[a].tableFields=b}},getDatabaseTablesFieldsForDatabaseTableId:function(b){if(SenchaCon2013Demo.app.CachedDatabaseTables!=undefined&&SenchaCon2013Demo.app.CachedDatabaseTables.length>0){for(var a=0;a<SenchaCon2013Demo.app.CachedDatabaseTables.length;a++){if(SenchaCon2013Demo.app.CachedDatabaseTables[a].id==b){return SenchaCon2013Demo.app.CachedDatabaseTables[a].tableFields}}}return undefined},getDatabaseTableFieldsForDatabase:function(){var b=this.getDatabaseSetting().getValue();if(b!="none"){var c=this.getDatabaseTableIdForTableName(b);var a=this.getDatabaseTablesFieldsForDatabaseTableId(c);if(a!=undefined&&a!=""){this.decodeDatabaseTableFieldsData(a)}else{showLoadingMask();Ext.Ajax.request({url:"getAllDatabaseTableFieldsForTable.do",method:"POST",params:{databaseTableId:c,},success:function(d){hideLoadingMask();var e=Ext.JSON.decode(d.responseText.trim());databaseTableController.saveDatabaseTablesFieldsForDatabaseTableId(c,e);databaseTableController.decodeDatabaseTableFieldsData(e)},failure:function(d){hideLoadingMask();logMessage("Failure Logging in.")},})}}},decodeDatabaseTableFieldsData:function(e){var g=new Array();var c=new Array();var a=new Array();var f=new Array();var b={text:"None Defined",value:"none"};g.push(b);c.push(b);for(var d=0;d<e.length;d++){b={text:e[d].fieldLabel,value:e[d].fieldName};if(e[d].fieldType=="DATA_FIELD"){g.push(b)}else{if(e[d].fieldType=="CATEGORY_FIELD"){c.push(b)}else{if(e[d].fieldType=="TIME_CATEGORY_FIELD"){f.push(b)}}}}for(var d=0;d<c.length;d++){a.push(c[d])}for(var d=0;d<f.length;d++){a.push(f[d])}var h=SenchaCon2013Demo.app.currentActivePanelIndex;SenchaCon2013Demo.app.PanelDataFieldStore[h]=g;SenchaCon2013Demo.app.PanelCategoryFieldStore[h]=c;SenchaCon2013Demo.app.PanelCategoryFieldStoreWithTime[h]=a;this.getApplication().getController("Settings").showConfiguredSettingsPanel()},cacheDatabaseTableDataForDashboard:function(a){var b=new Array();for(var c=0;c<a.length;c++){if(c==0){b.push(a[c])}else{var d=false;for(var e=0;e<b.length;e++){if(b[e]==a[c]){d=true;break}}if(!d){b.push(a[c])}}}if(b.length>0){showLoadingMask();Ext.Ajax.request({url:"getAllDatabaseTablesDataForCaching.do",method:"POST",params:{databasesToCache:new Array(a),},success:function(f){hideLoadingMask();var g=Ext.JSON.decode(f.responseText.trim());SenchaCon2013Demo.app.CachedDatabaseTables=g;initController.showMainScreen()},failure:function(f){hideLoadingMask();logMessage("Failure Caching data")},})}else{initController.showMainScreen()}},});Ext.define("SenchaCon2013Demo.controller.Radar",{extend:"Ext.app.Controller",xtype:"radarcontroller",config:{refs:{initController:"initcontroller",mainController:"maincontroller",},},launch:function(){},createRadarChart:function(b,e,a,c){var d=SenchaCon2013Demo.app.newChart[SenchaCon2013Demo.app.currentActivePanelIndex];if(d!=undefined){if(d.getLegend()!=undefined){d.getLegend().destroy()}d.destroy()}SenchaCon2013Demo.app.newChart[SenchaCon2013Demo.app.currentActivePanelIndex]=Ext.create("Ext.chart.PolarChart",{id:"chart"+SenchaCon2013Demo.app.currentActivePanelIndex,store:b,flex:1,interactions:["rotate"],innerPadding:{top:15,left:0,right:0,bottom:25},axes:[{type:"numeric",position:"radial",fields:e,grid:true,style:{estStepSize:20},label:{fill:"black",}},{type:"category",position:"angular",fields:a,grid:true,style:{estStepSize:2},label:{fill:"black"}}],series:[{type:"radar",xField:a,yField:e,animate:{duration:SenchaCon2013Demo.app.animateSpeed,delay:SenchaCon2013Demo.app.animateSpeed/2,easing:"ease"},style:{fillStyle:"rgba(0,255,0,0.2)",strokeStyle:"rgba(0,0,0,0.8)",lineWidth:1}}],})},});Ext.define("SenchaCon2013Demo.controller.AreaBar",{extend:"Ext.app.Controller",xtype:"areabarcontroller",config:{refs:{initController:"initcontroller",mainController:"maincontroller",}},launch:function(){},createAreaChart:function(a,c,b){var d=SenchaCon2013Demo.app.newChart[SenchaCon2013Demo.app.currentActivePanelIndex];if(d!=undefined){if(d.getLegend()!=undefined){d.getLegend().destroy()}d.destroy()}if(b==undefined){this.createAreaChartGroupByNone(a,c)}else{SenchaCon2013Demo.app.groupByValueBar=new Array();for(i=0;i<b.length;i++){SenchaCon2013Demo.app.groupByValueBar[i]="groupByBar"+(i+1)}if(b.length!=0&&b[b.length-1]!="other"){b[b.length]="Other";SenchaCon2013Demo.app.groupByValueBar[SenchaCon2013Demo.app.groupByValueBar]="Other"}if(b.length==2){this.createAreaChartGroupBy(a,c,b)}else{if(b.length==3){this.createAreaChartGroupBy(a,c,b)}else{if(b.length==4){this.createAreaChartGroupBy(a,c,b)}else{if(b.length==5){this.createAreaChartGroupBy(a,c,b)}}}}}},createAreaChartGroupByNone:function(a,b){SenchaCon2013Demo.app.newChart[SenchaCon2013Demo.app.currentActivePanelIndex]=Ext.create("Ext.chart.CartesianChart",{id:"chart"+SenchaCon2013Demo.app.currentActivePanelIndex,flex:1,store:a,shadow:true,insetPadding:{top:15,left:0,right:0,bottom:25},animate:{duration:SenchaCon2013Demo.app.animateSpeed,delay:SenchaCon2013Demo.app.animateSpeed/2,easing:"ease"},innerPadding:{top:15,left:0,right:0,bottom:25},axes:[{type:"numeric",position:"left",style:{strokeStyle:"black",shadowColor:"black",},label:{fontFamily:"Helvetica",color:"#4270A2"},fields:SenchaCon2013Demo.app.dataFieldValues[SenchaCon2013Demo.app.currentActivePanelIndex],minimum:0,maximum:SenchaCon2013Demo.app.Ymax[SenchaCon2013Demo.app.currentActivePanelIndex],title:{text:SenchaCon2013Demo.app.dataFieldValues[SenchaCon2013Demo.app.currentActivePanelIndex],strokeStyle:"#4270A2",fillStyle:"#4270A2",shadowColor:"black",},},{type:"category",position:"bottom",label:{fontFamily:"Helvetica",color:"#4270A2"},fields:SenchaCon2013Demo.app.categoryFieldValues[SenchaCon2013Demo.app.currentActivePanelIndex],style:{strokeStyle:"black",shadowColor:"black",},title:{text:SenchaCon2013Demo.app.categoryFieldValues[SenchaCon2013Demo.app.currentActivePanelIndex],strokeStyle:"#4270A2",fillStyle:"#4270A2",shadowColor:"black",},}],series:[{type:"area",xField:SenchaCon2013Demo.app.categoryFieldValues[SenchaCon2013Demo.app.currentActivePanelIndex],yField:SenchaCon2013Demo.app.dataFieldValues[SenchaCon2013Demo.app.currentActivePanelIndex],axis:"bottom",highlight:true,showInLegend:false,shadow:true,animate:{duration:SenchaCon2013Demo.app.animateSpeed,delay:SenchaCon2013Demo.app.animateSpeed/2,easing:"ease"},style:{stroke:"black",fillOpacity:0.8,smooth:true,},subStyle:{fill:["#115fa6"]}}]})},createAreaChartGroupBy:function(a,c,b){SenchaCon2013Demo.app.newChart[SenchaCon2013Demo.app.currentActivePanelIndex]=Ext.create("Ext.chart.CartesianChart",{id:"chart"+SenchaCon2013Demo.app.currentActivePanelIndex,flipXY:false,flex:1,store:a,shadow:true,animate:{duration:SenchaCon2013Demo.app.animateSpeed,delay:SenchaCon2013Demo.app.animateSpeed/2,easing:"ease"},legend:{position:"right"},axes:[{type:"numeric",position:"left",style:{strokeStyle:"black",shadowColor:"black",},label:{fontFamily:"Helvetica",color:"#4270A2"},minimum:0,maximum:SenchaCon2013Demo.app.Ymax[SenchaCon2013Demo.app.currentActivePanelIndex],title:{text:SenchaCon2013Demo.app.dataFieldValues[SenchaCon2013Demo.app.currentActivePanelIndex],strokeStyle:"#4270A2",fillStyle:"#4270A2",shadowColor:"black",},},{type:"category",position:"bottom",label:{fontFamily:"Helvetica",color:"#4270A2"},fields:SenchaCon2013Demo.app.categoryFieldValues[SenchaCon2013Demo.app.currentActivePanelIndex],style:{strokeStyle:"black",shadowColor:"black",},title:{text:SenchaCon2013Demo.app.categoryFieldValues[SenchaCon2013Demo.app.currentActivePanelIndex],strokeStyle:"#4270A2",fillStyle:"#4270A2",shadowColor:"black",},}],series:[{type:"area",xField:SenchaCon2013Demo.app.categoryFieldValues[SenchaCon2013Demo.app.currentActivePanelIndex],yField:SenchaCon2013Demo.app.groupByValueBar,title:b,highlight:true,showInLegend:true,stacked:true,shadow:true,style:{stroke:"rgb(40,40,40)",},subStyle:{fill:["#115fa6","#94ae0a","#a61120","#ff8809","#ffd13e","#a61187","#24ad9a","#7c7474","#a66111"]}}]})},});Ext.define("SenchaCon2013Demo.store.TempStore",{extend:"Ext.data.Store",requires:["SenchaCon2013Demo.model.DataModel"],config:{model:"SenchaCon2013Demo.model.DataModel",proxy:{type:"localstorage",id:"tempstore"}}});Ext.define("SenchaCon2013Demo.store.UserSettings4",{extend:"Ext.data.Store",requires:["SenchaCon2013Demo.model.UserSettings"],config:{model:"SenchaCon2013Demo.model.UserSettings",proxy:{type:"localstorage",id:"usersettings4"}}});Ext.define("SenchaCon2013Demo.store.UserSettings3",{extend:"Ext.data.Store",requires:["SenchaCon2013Demo.model.UserSettings"],config:{model:"SenchaCon2013Demo.model.UserSettings",proxy:{type:"localstorage",id:"usersettings3"}}});Ext.define("SenchaCon2013Demo.store.UserSettings2",{extend:"Ext.data.Store",requires:["SenchaCon2013Demo.model.UserSettings"],config:{model:"SenchaCon2013Demo.model.UserSettings",proxy:{type:"localstorage",id:"usersettings2"}}});Ext.define("SenchaCon2013Demo.view.BottomPlaybackToolbar",{extend:"Ext.Toolbar",xtype:"bottomplaybacktoolbar",requires:["Ext.Toolbar","SenchaCon2013Demo.view.Slider0","SenchaCon2013Demo.view.Slider1","SenchaCon2013Demo.view.Slider2","SenchaCon2013Demo.view.Slider3","SenchaCon2013Demo.view.Slider4",],config:{docked:"bottom",height:"55px",layout:{type:"hbox",pack:"center",align:"middle"},items:[{xtype:"spacer",width:"10px"},{xtype:"button",id:"ResetBackwardButton",iconCls:"resetbackward",},{xtype:"button",id:"StepBackwardButton",delay:0,iconCls:"stepbackward",},{xtype:"button",id:"PlayBackwardButton",delay:0,iconCls:"playbackward",},{xtype:"button",id:"PauseButton",delay:0,iconCls:"pause",},{xtype:"button",id:"PlayForwardButton",delay:0,iconCls:"play",},{xtype:"button",id:"StepForwardButton",delay:0,iconCls:"stepforward",},{xtype:"button",id:"ResetForwardButton",iconCls:"resetforward",},{xtype:"spacer",width:"10px"},{xtype:"slider0"},{xtype:"slider1"},{xtype:"slider2"},{xtype:"slider3"},{xtype:"slider4"},{xtype:"spacer",width:"10px"},{xtype:"container",id:"daterangelabel",},{xtype:"segmentedbutton",id:"globalsynctogglebutton",allowDepress:true,items:[{text:"Play All",pressed:false,id:"globalsyncon",iconCls:"sync",},]},]}});Ext.define("SenchaCon2013Demo.store.UserSettings1",{extend:"Ext.data.Store",requires:["SenchaCon2013Demo.model.UserSettings"],config:{model:"SenchaCon2013Demo.model.UserSettings",proxy:{type:"localstorage",id:"usersettings1"}}});Ext.define("SenchaCon2013Demo.view.TopTwoPanelLayout",{extend:"Ext.Panel",xtype:"toptwopanellayout",requires:["SenchaCon2013Demo.view.Panel1","SenchaCon2013Demo.view.Panel2"],config:{layout:{type:"hbox",pack:"center",align:"stretch"},flex:1,style:"background-color: white; color:white",items:[{xtype:"panel1"},{xtype:"panel2"}]}});Ext.define("SenchaCon2013Demo.view.BottomTwoPanelLayout",{extend:"Ext.Panel",xtype:"bottomtwopanellayout",requires:["SenchaCon2013Demo.view.Panel3","SenchaCon2013Demo.view.Panel4",],config:{layout:"hbox",flex:1,style:"background-color: white; color:white",items:[{xtype:"panel3"},{xtype:"panel4"}]}});Ext.define("SenchaCon2013Demo.view.FourPanelLayout",{extend:"Ext.Panel",xtype:"fourpanellayout",requires:["SenchaCon2013Demo.view.TopTwoPanelLayout","SenchaCon2013Demo.view.BottomTwoPanelLayout"],config:{layout:{type:"vbox",},autoShow:true,id:"fourpanellayout",style:"margin:10px; border-radius:10px;",align:"stretch",flex:1,items:[{xtype:"toptwopanellayout"},{xtype:"bottomtwopanellayout"}]}});Ext.define("SenchaCon2013Demo.view.Main",{extend:"Ext.Container",xtype:"senchademomain",requires:["SenchaCon2013Demo.view.TitleBar","SenchaCon2013Demo.view.FourPanelLayout","SenchaCon2013Demo.view.BottomPlaybackToolbar"],config:{fullscreen:true,hidden:false,style:"background: white;",layout:{type:"vbox"},items:[{docked:"top",xtype:"senchademotitlebar"},{xtype:"fourpanellayout"},{docked:"bottom",xtype:"bottomplaybacktoolbar"}]},});
