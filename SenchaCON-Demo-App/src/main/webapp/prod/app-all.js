/*
Copyright(c) 2013
*/
var developerMode=true;var showAllLogs=false;var infoString="Last updated June 25th, 2013";var emailBody_part1="Replay Analytics is a great way to animate time sequenced data.\n\nCheck out these Replay Analytics:\n\n";var emailBody_part2='\n\nUse the navigation at the bottom of the application to Play, Fast forward, pause or rewind the animation.\n"Interesting Moments" in the data will appear automatically.\n\n\nSincerely,\n\nThe Replay Analytics Team\nReplay Analytics is a Mind over Metrics application. Copyright 2013. All rights reserved.';function logMessage(a){if(developerMode&&showAllLogs){console.log(a)}}function logInfo(a){if(developerMode){console.info(a)}}function showLoadingMask(){Ext.Viewport.setMasked({xtype:"loadmask",message:"Loading..",})}function hideLoadingMask(){Ext.Viewport.setMasked(false)}function saveData(a,c){if(a.indexOf("getUnifiedData")!=0){return}if(typeof(localStorage)!="undefined"){try{localStorage.setItem(a,c)}catch(b){console.info("localstorage failed."+b);try{sessionStorage.setItem(a,c)}catch(b){console.info("sessionstorage failed"+b);createCookie(a,c,300)}}}else{createCookie(a,c,300)}}function loadData(a){var b=null;if(typeof(localStorage)!="undefined"){b=localStorage.getItem(a)}else{if(typeof(sessionStorage)!="undefined"){b=sessionStorage.getItem(a)}else{b=readCookie(a)}}return b}function eraseData(a){if(typeof(localStorage)!="undefined"){localStorage.removeItem(a)}else{eraseCookie(a)}}function createCookie(c,d,e){if(e){var b=new Date();b.setTime(b.getTime()+(e*24*60*60*1000));var a="; expires="+b.toGMTString()}else{var a=""}document.cookie=c+"="+d+a+"; path=/"}function readCookie(b){var e=b+"=";var a=document.cookie.split(";");for(var d=0;d<a.length;d++){var f=a[d];while(f.charAt(0)==" "){f=f.substring(1,f.length)}if(f.indexOf(e)==0){return f.substring(e.length,f.length)}}return null}function eraseCookie(a){createCookie(a,"",-1)}function refreshPage(){document.location.reload(true)}function clearStore(b){var a=Ext.getStore(b);a.getProxy().clear();a.data.clear();a.sync();return}function resetSettings(){clearStore("UserSettings1");clearStore("UserSettings2");clearStore("UserSettings3");clearStore("UserSettings4");refreshPage()}function clearAllStores(){clearStore("UserSettings1");clearStore("UserSettings2");clearStore("UserSettings3");clearStore("UserSettings4");clearStore("GlobalSettingsStore")}function verifyString(a){}Ext.Loader.setConfig({enabled:true});Ext.Loader.setPath({"Ext.ux":"lib"});Ext.application({name:"ReplayAnalytics",stores:["GlobalSettingsStore","UserSettings1","UserSettings2","UserSettings3","UserSettings4","TempStore"],controllers:["Admin","DatabaseTable","Pie","LineBar","Scatter","VerticalBar","HorizontalBar","Main","Login","GlobalSync","Help","InterestingMoment","Playback","Settings","Radar","AreaBar"],views:["Main","AdminPanel","DataSourceUploadPanel","DataSourceDeletePanel","DataSourceManagePanel","DataSourceConfigurationPanel","DataSourceTypeSelectionPanel","LoginScreen","SaveDashboardDialog","ShareDashboardDialog","ManualIMDialog","ManualIMCallout","FilterFieldsPanel","FilterListPanel","DashboardGridRow","AddDashboardThumbnail","DashboardThumbnail","DashboardScreen","InterestingMomentGraphPanel","InterestingMomentFoundDialog","SettingsPanel","GlobalSettingsPanel","AddChartPanel1","AddChartPanel2","AddChartPanel3","AddChartPanel4","HelpPanel","SettingsHelpPanel","PlaybackHelpPanel","GlobalSyncHelpPanel","ChartHelpPanel","GestureHelpPanel","SliderHelpPanel","Slider5"],launch:function(){this.publicMode=false;this.uniqueDashboardId=undefined;this.isHelpPanelShowing=false;this.creatingGraphs=false;this.sessionCookie="ReplayAnalyticsUserSession";this.panelSettings=new Array();for(i=0;i<5;i++){this.panelSettings[i]=""}this.panelData=new Array();for(i=0;i<5;i++){this.panelData[i]=""}this.currentUploadingDataSource=undefined;this.currentDashboard=undefined;this.currentUserSession=undefined;this.userDashboards=new Array();this.userDashboardDetails=new Array();this.isDashboardEditMode=false;this.isDashboardShareMode=false;this.currentManualIMs=new Array();this.currentChartManualIMs=new Array();this.globalManualIMs=new Array();this.CachedDatabaseTables=new Array();this.GranularityFieldStore=undefined;this.DatabaseTableFieldStore=undefined;this.EmptyFieldStore=[{text:"None Defined",value:"none"}];this.PanelDataFieldStore=new Array();this.PanelCategoryFieldStore=new Array();this.PanelCategoryFieldStoreWithTime=new Array();this.databaseSetting=new Array();this.filterToggle=new Array();this.Panels=new Array();this.charts=new Array();this.fullStores=new Array();this.instanceStores=new Array();this.sliders=new Array();this.loadIndex=1;this.isChartConfigured=new Array();for(i=0;i<5;i++){this.isChartConfigured[i]=false}this.groupByBarLabels=new Array();this.differentialMultiplier=new Array();for(i=0;i<6;i++){this.differentialMultiplier[i]=1}this.redirect=false;this.redirectUrl=undefined;this.startDate=new Array();this.currentDate=new Array();this.currentStartDate=new Array();this.currentEndDate=new Array();this.dateSet=new Array();this.globalDateArray=new Array();for(i=0;i<6;i++){this.dateSet[i]=false}this.sizeByDataRecieved=new Array();for(i=0;i<6;i++){this.sizeByDataRecieved[i]=false}this.responseCount=0;this.sizeByStoreGlobal=new Array();this.sizeByStore=new Array();this.chartCreated=new Array();this.newChart=new Array();this.lastPlaybackAction=undefined;this.granularities=new Array();this.valueGranularities=new Array();this.chartTypes=new Array();this.xs=new Array();this.ys=new Array();this.groupBys=new Array();this.sizeBys=new Array();this.interestingMoments="Off";this.replayCommentsSetting="Off";this.graphTitle=new Array();this.accumulate=new Array();this.numberActivePanels="4";this.dataFieldValues=new Array();this.categoryFieldValues=new Array();this.interestingMomentsPoints=new Array();this.previousActivePanelIndex="1";this.interestingMomentType3Setting="-1";this.interestingMomentType4Setting="-1";this.interestingMomentType1Setting="-1";this.interestingMomentType2Setting="-1";this.isIMGraphRunning=false;this.interestingMomentGraphIndex=5;this.activeIMPointIndex=0;this.allIMPointsAtCurrentIndex=new Array();this.playbackTasks=new Array();this.waitvariables=new Array();this.currentPositions=new Array();this.minimumPositions=new Array();this.maximumPositions=new Array();this.currentActivePanelIndex=1;this.replaySpeed=1000;this.graphMaxValueMargin=0.1;this.animateSpeed=this.replaySpeed-100;this.globalStartDate;this.globalEndDate;this.firstGlobalDate;this.chartIsRunning=new Array();this.chartIsPaused=new Array();this.globalSyncPressed=false;this.nullSearchReturnedTrue=false;this.globalSliderValue;this.finishCall;this.chartSection=new Array();this.chartLengths=new Array();for(i=0;i<20;i++){this.chartLengths[i]=0}this.globalindex=0;this.chartsFinished=0;this.numberActiveCharts=0;this.chartValue=new Array();this.chartFinished=new Array();for(i=0;i<6;i++){this.chartFinished[i]=false}this.initialPosition=new Array();for(i=0;i<6;i++){this.initialPosition[i]=true}for(i=1;i<6;i++){this.chartIsRunning[i]=false}this.globalSyncChartPositions=new Array();for(i=1;i<6;i++){this.globalSyncChartPositions[i]=new Array()}this.groupByValueBar=["groupByBar1","groupByBar2","groupByBar3","groupByBar4","Other"];this.fixOrder=new Array();this.Xmax=new Array();this.Ymax=new Array();this.XmaxReceived=new Array();this.YmaxReceived=new Array();this.setDefaultValues=function(){for(i=0;i<6;i++){this.databaseSetting[i]="demo_data";this.filterToggle[i]="Off";this.granularities[i]="Daily";this.valueGranularities[i]=2;this.chartTypes[i]="pie";this.xs[i]="none";this.ys[i]="none";this.chartCreated[i]=false;this.startDate[i]=new Date();this.startDate[i].setHours(0,0,0,0);this.startDate[i].setFullYear(this.startDate[i].getFullYear()-2);this.startDate[i].setDate(this.startDate[i].getDate()-3);this.currentEndDate[i]=new Date();this.currentEndDate[i].setHours(0,0,0,0);this.currentEndDate[i].setFullYear(this.currentEndDate[i].getFullYear()-2);this.accumulate[i]="Off";this.graphTitle[i]="Title";this.groupBys[i]="none";this.XmaxReceived[i]=false;this.YmaxReceived[i]=false}this.interestingMoments="Off";this.replayCommentsSetting="Off";this.jsonstore=new Array();this.interestingMomentType3Setting="-1";this.interestingMomentType4Setting="-1";this.interestingMomentType1Setting="-1";this.interestingMomentType2Setting="-1";this.numberActivePanels="4";this.currentActivePanelIndex=1;this.replaySpeed=3200;this.interestingMomentsPoints=new Array();this.allIMPointsAtCurrentIndex=new Array();this.currentManualIMs=new Array();this.currentChartManualIMs=new Array();this.panelData=new Array();this.panelSettings=new Array();this.dataFieldValues=new Array();this.categoryFieldValues=new Array();this.currentSelectedFilterCategory="";this.granularities[1]="Daily";this.valueGranularities[1]=2;this.chartTypes[1]="pie";this.xs[1]="data_3";this.ys[1]="none";this.groupBys[1]="category_c";this.startDate[1]=new Date("2011-02-01");this.currentEndDate[1]=new Date("2011-02-28");this.granularities[2]="Daily";this.valueGranularities[2]=2;this.chartTypes[2]="verticalbar";this.xs[2]="date";this.ys[2]="data_1";this.groupBys[2]="category_b";this.startDate[2]=new Date("2011-02-01");this.currentEndDate[2]=new Date("2011-02-10");this.granularities[3]="Daily";this.valueGranularities[3]=2;this.chartTypes[3]="scatter";this.xs[3]="data_3";this.ys[3]="data_4";this.groupBys[3]="none";this.startDate[3]=new Date("2011-02-01");this.currentEndDate[3]=new Date("2011-02-28");this.granularities[4]="Daily";this.valueGranularities[4]=2;this.chartTypes[4]="line";this.xs[4]="category_b";this.ys[4]="data_1";this.groupBys[4]="category_d";this.startDate[4]=new Date("2011-02-01");this.currentEndDate[4]=new Date("2011-02-28")};this.setDefaultValues();Ext.get("loading").setVisible(false);Ext.Viewport.add({xtype:"loginscreen"});Ext.Viewport.add({xtype:"dashboardscreen"});Ext.Viewport.add({xtype:"replayanalyticsmain"});Ext.Viewport.add({xtype:"interestingmomentgraphpanel"});Ext.Viewport.add({xtype:"imfounddialog"});Ext.Viewport.add({xtype:"manualimcallout"});Ext.Viewport.add({xtype:"savedashboarddialog"});Ext.Viewport.add({xtype:"sharedashboarddialog"});Ext.Viewport.add({xtype:"manualimdialog"});Ext.Viewport.add({xtype:"settingspanel"});Ext.Viewport.add({xtype:"globalsettingspanel"});Ext.Viewport.add({xtype:"helppanel"});Ext.Viewport.add({xtype:"settingshelppanel"});Ext.Viewport.add({xtype:"playbackhelppanel"});Ext.Viewport.add({xtype:"globalsynchelppanel"});Ext.Viewport.add({xtype:"charthelppanel"});Ext.Viewport.add({xtype:"sliderhelppanel"});Ext.Viewport.add({xtype:"gesturehelppanel"});Ext.Viewport.add({xtype:"filterfieldspanel"});Ext.Viewport.add({xtype:"filterlistpanel"});Ext.Viewport.add({xtype:"adminpanel"});Ext.Viewport.add({xtype:"datasourceuploadpanel"});Ext.Viewport.add({xtype:"datasourceconfigurationpanel"});Ext.Viewport.add({xtype:"datasourcetypeselectionpanel"});Ext.Viewport.add({xtype:"datasourcemanagepanel"});Ext.Viewport.add({xtype:"datasourcedeletepanel"});for(i=0;i<6;i++){this.sliders[i]=Ext.ComponentQuery.query("slider"+i)[0]}for(i=0;i<6;i++){this.maximumPositions[i]=Ext.ComponentQuery.query("slider"+i)[0].getMaxValue();this.minimumPositions[i]=Ext.ComponentQuery.query("slider"+i)[0].getMinValue();this.currentPositions[i]=this.minimumPositions[i]}}});Ext.define("ReplayAnalytics.view.FilterFieldsPanel",{extend:"Ext.Panel",xtype:"filterfieldspanel",requires:["Ext.Toolbar",],config:{modal:true,layout:"fit",zIndex:20,hideOnMaskTap:true,width:300,height:300,centered:true,hidden:true,items:[{xtype:"list",id:"filterfieldslist",scrollable:"vertical",itemTpl:"{text}",}]}});Ext.define("ReplayAnalytics.view.FilterListPanel",{extend:"Ext.Panel",xtype:"filterlistpanel",requires:["Ext.Toolbar",],config:{modal:true,layout:"vbox",zIndex:40,width:350,height:360,centered:true,hidden:true,items:[{xtype:"list",id:"filterlist",scrollable:"vertical",width:350,height:300,itemTpl:'<div style="border: 1px solid transparent;"><label><input type="checkbox" class="x-form-check-focus" id="{Field}" name="filter" checked="{Checked}" > <span class="Field">{FieldLabel} </span></label></div>'},{xtype:"toolbar",docked:"bottom",layout:{type:"hbox",pack:"justify"},items:[{xtype:"button",id:"filterlistcancelbutton",align:"left",iconCls:"delete",},{xtype:"button",id:"filterlistselectunselectallbutton",text:"Unselect All",align:"left",iconCls:"list",},{xtype:"button",id:"filterlistdonebutton",ui:"action",align:"right",iconCls:"done",}]}]}});Ext.define("ReplayAnalytics.view.ManualIMCallout",{extend:"Ext.Panel",xtype:"manualimcallout",config:{modal:true,hidden:true,centered:true,width:250,height:125,layout:{type:"vbox",align:"center",pack:"top"},hideOnMaskTap:true,xIndex:100,fullscreen:false,style:"background-image: url(lib/images/callout-image-inverted.png); background-color: transparent; padding-left:12px; background-size: 100%;",}});Ext.define("ReplayAnalytics.view.ManualIMDialog",{extend:"Ext.Panel",xtype:"manualimdialog",requires:["Ext.Toolbar",],config:{layout:"vbox",modal:true,zIndex:10,hideOnMaskTap:true,centered:true,width:450,scroll:"vertical",hidden:true,items:[{xtype:"toolbar",maxHeight:"50px",docked:"top",flex:"1",title:"Replay Comment",},{xtype:"spacer",height:"15px",style:"background-color: #F0F0F0;",},{xtype:"textareafield",label:"Message",id:"manualimmessagefield",labelWidth:"30%",},{xtype:"spacer",height:"15px",style:"background-color: #F0F0F0;",},{xtype:"toolbar",layout:{type:"hbox",pack:"justify"},items:[{xtype:"button",id:"closemanualimdialogbutton",text:"Cancel",align:"left",iconCls:"delete",},{xtype:"button",id:"savemanualimbutton",text:"Save",ui:"action",align:"right",iconCls:"save",}]}]}});Ext.define("ReplayAnalytics.view.ShareDashboardDialog",{extend:"Ext.Panel",xtype:"sharedashboarddialog",requires:["Ext.Toolbar",],config:{layout:"vbox",modal:true,zIndex:10,hideOnMaskTap:true,centered:true,scroll:"vertical",hidden:true,items:[{xtype:"toolbar",maxHeight:"50px",docked:"top",flex:"1",title:"Share Dashboard",},{xtype:"textareafield",label:"Copy and paste this link in a browser window to open the shared dashboard<br />or send the link to anyone you would like to share the Replay Analytics.",labelAlign:"top",id:"dashboardlinkfield",clearIcon:false,readOnly:true,},{xtype:"toolbar",layout:{type:"hbox",pack:"justify"},items:[{xtype:"button",id:"emaildashboardlink",text:"Email",align:"left",ui:"confirm",iconCls:"mail",},{xtype:"button",id:"openinnewtabbutton",text:"Open In New Tab",align:"left",ui:"confirm",iconCls:"window",},{xtype:"button",id:"closesharedashboarddialog",text:"Close",ui:"action",align:"right",iconCls:"done",}]}]}});Ext.define("ReplayAnalytics.view.SaveDashboardDialog",{extend:"Ext.Panel",xtype:"savedashboarddialog",requires:["Ext.Toolbar",],config:{layout:"vbox",modal:true,zIndex:10,hideOnMaskTap:true,centered:true,width:450,scroll:"vertical",hidden:true,items:[{xtype:"toolbar",maxHeight:"50px",docked:"top",flex:"1",title:"Save Dashboard",},{xtype:"spacer",height:"15px",style:"background-color: #F0F0F0;",},{xtype:"textfield",label:"Dashboard Title",id:"dashboardtitlefield",maxLength:25,labelWidth:"40%",},{xtype:"spacer",height:"15px",style:"background-color: #F0F0F0;",},{xtype:"toolbar",layout:{type:"hbox",pack:"justify"},items:[{xtype:"button",id:"closesavedashboarddialog",text:"Cancel",align:"left",iconCls:"delete",},{xtype:"button",id:"savedashboardsubmit",text:"Save",ui:"action",align:"right",iconCls:"save",}]}]}});Ext.define("ReplayAnalytics.view.DashboardGridRow",{extend:"Ext.Container",xtype:"dashboardgridrow",config:{fullscreen:true,hidden:false,width:"100%",height:"290px",layout:{type:"hbox",pack:"center",align:"start"},flex:1,},});Ext.define("ReplayAnalytics.view.AddDashboardThumbnail",{extend:"Ext.Panel",xtype:"adddashboardthumbnail",fullscreen:true,config:{layout:{type:"vbox",pack:"center"},width:"250px",height:"250px",cls:"thumbnail",items:[{xtype:"image",hidden:false,autoShow:true,centered:true,width:"48px",height:"48px",style:"width: 48px; height: 48px; background-size: 100%;",src:"lib/images/plus-icon-gray.png"},{docked:"bottom",xtype:"label",html:"Add New Dashboard",style:"margin-bottom: 5px; font-weight: normal; font-size: 14px;",}],}});Ext.define("ReplayAnalytics.view.DashboardThumbnail",{extend:"Ext.Panel",xtype:"dashboardthumbnail",fullscreen:true,config:{layout:{type:"vbox",pack:"center"},width:"250px",dashboardIndex:undefined,dashboardId:undefined,height:"250px",cls:"thumbnail",items:[{xtype:"container",docked:"top",layout:{type:"hbox",pack:"right",},items:[{xtype:"container",customId:"dashboard-updated-icon",style:"color: white;",hidden:true,align:"right",layout:{type:"hbox",pack:"right",},items:[{xtype:"image",src:"lib/images/chat2_white.png",align:"right",cls:"callout-icon-thumbnail",},]},{xtype:"container",customId:"dashboard-shared-icon",style:"color: white;",hidden:true,align:"right",layout:{type:"hbox",pack:"right",},items:[{xtype:"image",src:"lib/images/link-blue-icon.png",align:"right",cls:"dashboard-icon-style",},]},{xtype:"container",customId:"dashboard-lock-icon",style:"color: white;",hidden:true,align:"left",layout:{type:"hbox",pack:"right",},items:[{xtype:"image",src:"lib/images/lock-icon.png",align:"left",cls:"dashboard-icon-style",},]},{xtype:"container",customId:"dashboard-delete-icon",style:"color: white;",hidden:true,align:"right",layout:{type:"hbox",pack:"right",},items:[{xtype:"image",src:"lib/images/delete-red-icon.png",align:"right",cls:"dashboard-icon-style",},]},]},{xtype:"image",hidden:false,autoShow:true,centered:true,width:"100px",height:"100px",style:"width: 100px; height: 100px; background-size: 100%;",src:"lib/images/chart-icon-big.png"},{docked:"bottom",xtype:"label",html:"Dashboard",style:"margin-bottom: 5px; font-weight: normal; font-size: 14px;",}]}});Ext.define("ReplayAnalytics.view.InterestingMomentFoundDialog",{extend:"Ext.Panel",xtype:"imfounddialog",config:{modal:true,hidden:true,centered:true,width:250,height:125,layout:{type:"vbox",align:"center",pack:"top"},stopMaskTapEvent:false,xIndex:100,fullscreen:false,style:"background-image: url(lib/images/callout-image.png); background-color: transparent; padding-left:12px; background-size: 100%;",}});Ext.define("ReplayAnalytics.view.DashboardScreen",{extend:"Ext.Container",xtype:"dashboardscreen",config:{fullscreen:true,hiddden:true,layout:{type:"vbox",},style:"background-color:#001919;",scrollable:{direction:"vertical",directionLock:false,},items:[{docked:"top",xtype:"titlebar",title:"My Replay Dashboards",docked:"top",layout:"hbox",height:"60px",width:"100%",items:[{xtype:"image",hidden:false,autoShow:true,docked:"left",width:"130px",height:"100%",cls:"replayanalyticslogo",src:"lib/images/mind-over-metrics-logo.png"},{xtype:"label",id:"usernamelabel2",docked:"left",cls:"usernamelabel",html:"Welcome",},{xtype:"segmentedbutton",id:"editsharedashboards",align:"right",allowDepress:false,items:[{id:"viewdashboardtoggle",text:"View",pressed:true,iconCls:"list",},{id:"editdashboardtogglebutton",text:"Delete",pressed:false,iconCls:"delete",},{id:"sharedashboardtogglebutton",text:"Share",pressed:false,iconCls:"share",}]},{xtype:"button",id:"adminbutton",align:"right",text:"Admin Control Panel",hidden:true,iconCls:"settings",},{xtype:"button",id:"infobutton",align:"right",iconCls:"info",},{xtype:"button",id:"logoutbutton",align:"right",text:"Logout",iconCls:"logout",}]},{xtype:"panel",id:"dashboardgrid",config:{fullscreen:true,hidden:false,layout:{type:"vbox",align:"center"},style:"background-color:#001919; padding: 20px;",height:"100%",flex:1,items:[]}},]},});Ext.define("ReplayAnalytics.view.LoginScreen",{extend:"Ext.Container",xtype:"loginscreen",config:{fullscreen:true,scrollable:{direction:"vertical",directionLock:false,},layout:{type:"vbox",pack:"start",align:"center"},style:"background-color: white;",flex:1,items:[{xtype:"image",width:400,height:167,style:"width: 100%; padding: 10px; margin-top: 30px; background-size: 100%; background-color: transparent;",src:"lib/images/mind-over-metrics-logo-white.png"},{xtype:"container",id:"logocontainer",layout:"vbox",height:30,style:"margin-top: 20px; height: 30px; color: black; font-color: black; font-size: 22px;",items:[{html:"Login",},],},{xtype:"container",layout:"vbox",width:450,height:250,scroll:"vertical",style:"margin-top: 50px; border: 5px solid #F0F0F0; border-radius: 5px;",items:[{xtype:"spacer",height:"5px",style:"background-color: #F0F0F0;",},{xtype:"emailfield",label:"User Name",labelAlign:"left",id:"usernamefield",labelWidth:"40%",},{xtype:"spacer",height:"5px",style:"background-color: #F0F0F0;",},{xtype:"passwordfield",label:"Password",labelAlign:"left",id:"passwordfield",labelWidth:"40%",},{xtype:"spacer",height:"5px",style:"background-color: #F0F0F0;",},{xtype:"checkboxfield",name:"remembermecheck",label:"Remember Me?",labelAlign:"left",id:"remembermecheck",value:"remember",labelWidth:"40%",style:"background-color: #F7F7F7;",checked:true,},{xtype:"spacer",height:"5px",style:"background-color: #F0F0F0;",},{xtype:"container",style:"padding: 15px; background-color: #F0F0F0;",layout:{type:"hbox",pack:"justify"},items:[{xtype:"button",id:"clearloginpanelbutton",html:"Clear",align:"left",iconCls:"clear",},{xtype:"button",id:"loginsubmitbutton",text:"Login",ui:"action",align:"right",iconCls:"user",}]}]}]},});Ext.define("ReplayAnalytics.view.HelpPanel",{extend:"Ext.Panel",xtype:"helppanel",requires:["Ext.TitleBar"],config:{modal:true,hidden:true,centered:true,width:400,height:160,layout:{type:"vbox",align:"center",pack:"center"},scroll:"vertical",xIndex:100,fullscreen:false,baseCls:"HelpPanel",style:"background:black; border: white 3px solid;",items:[{xtype:"toolbar",maxHeight:"40px",html:"<h1 style='color: white;font-size: 35px; top: 23px'>Help</h1>",style:"background: transparent;"},{html:"<ul style ='color:white;'><li>Some tips for working with charts</li><br/></ul>",},{xtype:"button",text:"Hide",id:"hidehelp",iconCls:"backspace",iconMask:true,docked:"top",width:120,pack:"center",ui:"action",style:"margin: 10px;"}],}});Ext.define("ReplayAnalytics.view.GlobalSyncHelpPanel",{extend:"Ext.Panel",xtype:"globalsynchelppanel",config:{baseCls:"GlobalSyncHelpPanel",html:"<div align='center'><h1 style='color:white'>Toggle button for synchronizing dates of all charts</h1></div>",hidden:true,width:250,style:"background: #00a1de"}});Ext.define("ReplayAnalytics.view.SettingsPanel",{extend:"Ext.Panel",xtype:"settingspanel",requires:["Ext.Toolbar",],config:{layout:"vbox",modal:true,zIndex:10,hideOnMaskTap:true,centered:true,width:450,scroll:"vertical",hidden:true,items:[{xtype:"toolbar",maxHeight:"50px",docked:"top",flex:"1",title:"Panel Settings",},{xtype:"selectfield",id:"databaseselectfield",label:"Database:",hidden:true,value:"None",options:[{text:"+ Import Excel File",value:"add_new_data_source"},{text:"None Defined",value:"None"},]},{xtype:"textfield",id:"graphtitlefield",label:"Graph Title:",hidden:true,},{xtype:"selectfield",id:"charttypefield",label:"Chart Type:",value:"None",options:[{text:"None",value:"None"},{text:"Bubble",value:"scatter"},{text:"Horizontal Bar",value:"horizontalbar"},{text:"Vertical Bar",value:"verticalbar"},{text:"Line",value:"line"},{text:"Area",value:"area"},{text:"Pie",value:"pie"},{text:"Radar",value:"radar"},{text:"Gauge",value:"gauge"},]},{xtype:"selectfield",id:"xaxisfield",label:"X-Axis:",options:[{text:"None Defined",value:"none"},]},{xtype:"selectfield",id:"yaxisfield",label:"Y-Axis:",options:[{text:"None Defined",value:"none"},]},{xtype:"selectfield",id:"groupbyfield",label:"Group By:",options:[{text:"None Defined",value:"none"},]},{xtype:"selectfield",id:"filtersettingtoggle",label:"Filter:",value:"Off",hidden:true,options:[{text:"On",value:"On"},{text:"Off",value:"Off"}]},{xtype:"selectfield",id:"granularityfield",label:"Granularity:",},{xtype:"selectfield",id:"accumfield",label:"Accumulate:",hidden:true,value:"On",options:[{text:"On",value:"On"},{text:"Off",value:"Off"}]},{xtype:"datepickerfield",id:"startdatefield",label:"Start Date:",name:"startdate",dateFormat:"m/d/y",picker:{yearFrom:2009,yearTo:2011,}},{xtype:"datepickerfield",id:"enddatefield",label:"End Date:",name:"enddate",dateFormat:"m/d/y",picker:{yearFrom:2009,yearTo:2011,}},{xtype:"toolbar",layout:{type:"hbox",pack:"justify"},items:[{xtype:"button",id:"clearpanelbutton",html:"Clear Panel",align:"left",iconCls:"clear",},{xtype:"button",hidden:true,id:"setfilterbutton",html:"Filters",iconCls:"add",},{xtype:"button",id:"settingscancelbutton",text:"Cancel",align:"right",iconCls:"delete",},{xtype:"button",id:"settingsdonebutton",text:"Done",ui:"action",align:"right",iconCls:"done",}]}]}});Ext.define("ReplayAnalytics.view.ChartHelpPanel",{extend:"Ext.Panel",xtype:"charthelppanel",config:{baseCls:"ChartHelpPanel",html:'<div align="center"><h1 style="color:white">Tap a panel to select it.</h1></div>',hidden:true,width:250,style:"background: #00a1de"}});Ext.define("ReplayAnalytics.view.GestureHelpPanel",{extend:"Ext.Panel",xtype:"gesturehelppanel",config:{baseCls:"GestureHelpPanel",html:"<div align='center'><h1 style='color:white'>Swipe Left and Right to reveal IM points list, comments and chart data table.</h1></div>",hidden:true,width:250,style:"background: #00a1de"}});Ext.define("ReplayAnalytics.view.SliderHelpPanel",{extend:"Ext.Panel",xtype:"sliderhelppanel",config:{baseCls:"SliderHelpPanel",html:"<div align='center'><h1 style='color:white'>Draggable slider control for dates of charts. Just tap, hold, and drag.</h1></div>",hidden:true,width:160,height:92,style:"background: #00a1de"}});Ext.define("ReplayAnalytics.view.SettingsHelpPanel",{extend:"Ext.Panel",xtype:"settingshelppanel",config:{baseCls:"SettingsHelpPanel",html:'<div align="center"><h1 style="color:white;">Configure settings like title, x-axis, y-axis, start date, end date, etc. for selected chart.</h1></div>',hidden:true,width:250,style:"background: #00a1de"}});Ext.define("ReplayAnalytics.view.PlaybackHelpPanel",{extend:"Ext.Panel",xtype:"playbackhelppanel",config:{baseCls:"PlaybackHelpPanel",html:"<div align='center'><h1 style='color:white'>Playback control for charts include pause, play, step forward/backward, and skip.</h1></div>",hidden:true,width:250,style:"background: #00a1de"}});Ext.define("ReplayAnalytics.view.TitleBar",{extend:"Ext.TitleBar",xtype:"replayanalyticstitlebar",requires:["Ext.TitleBar"],config:{title:"SenchaCON-Charts-Demo",docked:"top",layout:"hbox",height:"60px",width:"100%",items:[{xtype:"image",hidden:false,autoShow:true,docked:"left",width:"130px",height:"100%",hidden:true,cls:"replayanalyticslogo",src:"lib/images/mind-over-metrics-logo.png"},{xtype:"label",id:"usernamelabel",docked:"left",hidden:true,cls:"usernamelabel",html:"Welcome",},{xtype:"button",id:"helpbutton",align:"right",hidden:true,iconCls:"help",},{xtype:"button",id:"sharedashboardbutton",align:"right",text:"Share",hidden:true,iconCls:"share",},{xtype:"button",id:"settingsbutton",align:"right",text:"Settings",iconCls:"settings",},{xtype:"button",id:"globalsettingsbutton",align:"right",hidden:true,text:"Global Settings",iconCls:"globe",},{xtype:"button",id:"savedashboardbutton",hidden:true,iconCls:"save",align:"right",text:"Save",},{xtype:"button",id:"loginredirectbutton",align:"right",text:"Login",iconCls:"user",hidden:true,},{xtype:"button",id:"bookmarkdashboardbutton",align:"right",text:"Save to My Library",hidden:true,iconCls:"save",},{xtype:"button",id:"gobackbutton",hidden:true,align:"right",text:"My Replays",iconCls:"rightbig",},]}});Ext.define("ReplayAnalytics.view.GlobalSettingsPanel",{extend:"Ext.Panel",xtype:"globalsettingspanel",requires:["Ext.Toolbar",],config:{layout:"vbox",modal:true,zIndex:10,hideOnMaskTap:true,centered:true,width:530,scroll:"vertical",hidden:true,items:[{xtype:"toolbar",docked:"top",maxHeight:"50px",title:"Global Settings",flex:1},{xtype:"selectfield",label:"Interesting Moments:",id:"imtogglefield",labelWidth:"50%",value:"Off",options:[{text:"On",value:"On"},{text:"Off",value:"Off"}]},{xtype:"selectfield",label:"Replay Comments:",id:"replaycommentstogglefield",labelWidth:"50%",value:"Off",options:[{text:"On",value:"On"},{text:"Off",value:"Off"}]},{xtype:"selectfield",id:"replayspeedsetting",labelWidth:"50%",label:"Replay Speed",value:"Normal",options:[{text:"Slow",value:"3000"},{text:"Normal",value:"2000"},{text:"Fast",value:"1000"}]},{xtype:"selectfield",id:"activepanelsfield",label:"Active Panels:",labelWidth:"50%",value:"4",options:[{text:"1",value:"1"},{text:"2",value:"2"},{text:"4",value:"4"}]},{xtype:"selectfield",id:"imtype1setting",labelWidth:"50%",label:"IM Type-1 Mean Deviation",value:"-1",options:[{text:"None",value:"-1"},{text:"20%",value:"20"},{text:"30%",value:"30"},{text:"40%",value:"40"},{text:"50%",value:"50"},]},{xtype:"selectfield",id:"imtype2setting",labelWidth:"50%",label:"IM Type-2 Standard Deviation",value:"-1",options:[{text:"None",value:"-1"},{text:"1",value:"1"},{text:"1.5",value:"1.5"},{text:"2",value:"2"},{text:"2.5",value:"2.5"},{text:"3",value:"3"},]},{xtype:"selectfield",id:"imtype3setting",labelWidth:"50%",label:"IM Type-3 Trending Points",value:"-1",options:[{text:"None",value:"-1"},{text:"3",value:"3"},{text:"4",value:"4"},{text:"5",value:"5"},{text:"6",value:"6"},{text:"7",value:"7"},{text:"8",value:"8"},{text:"9",value:"9"},{text:"10",value:"10"},]},{xtype:"selectfield",id:"imtype4setting",labelWidth:"50%",label:"IM Type-4 Trending Points",value:"-1",options:[{text:"None",value:"-1"},{text:"3",value:"3"},{text:"4",value:"4"},{text:"5",value:"5"},{text:"6",value:"6"},{text:"7",value:"7"},{text:"8",value:"8"},{text:"9",value:"9"},{text:"10",value:"10"},]},{xtype:"button",id:"managedatasourcesbutton",html:"Manage Data Sources",ui:"action",style:"font-size: 14px; margin-left: 120px; margin-right: 120px; margin-top: 10px; margin-bottom: 5px; padding: 5px;",},{xtype:"button",id:"clearcachebuttonglobalsettings",html:"Reset All Local Cache",ui:"confirm",style:"font-size: 14px; margin-left: 120px; margin-right: 120px; margin-top: 10px; margin-bottom: 5px; padding: 5px;",},{xtype:"toolbar",layout:{type:"hbox",pack:"justify"},items:[{xtype:"button",id:"globalsettingscancelbutton",text:"Cancel",align:"left",iconCls:"delete",},{xtype:"button",id:"globalsettingsdonebutton",text:"Done",ui:"action",align:"right",iconCls:"done",}]}]}});Ext.define("ReplayAnalytics.model.GlobalSettingsModel",{extend:"Ext.data.Model",config:{fields:[{name:"NumberOfPanels",type:"text"},{name:"InterestingMoments",type:"text"},{name:"ReplayComments",type:"text"},{name:"ReplaySpeed",type:"text"},{name:"InterestingMomentType3Setting",type:"text"},{name:"InterestingMomentType1Setting",type:"text"},{name:"InterestingMomentType2Setting",type:"text"},{name:"InterestingMomentType4Setting",type:"text"},]}});Ext.define("ReplayAnalytics.store.GlobalSettingsStore",{extend:"Ext.data.Store",requires:["ReplayAnalytics.model.GlobalSettingsModel"],config:{model:"ReplayAnalytics.model.GlobalSettingsModel",proxy:{type:"localstorage",id:"globalsettings"}}});Ext.define("ReplayAnalytics.model.DataModel",{extend:"Ext.data.Model",xtype:"datamodel",config:{fields:[{name:"length",type:"int"},{name:"groupByBar1",type:"int"},{name:"groupByBar2",type:"int"},{name:"groupByBar3",type:"int"},{name:"groupByBar4",type:"int"},{name:"Other",type:"int"},]}});Ext.define("ReplayAnalytics.model.UserSettings",{extend:"Ext.data.Model",config:{fields:[{name:"Database",type:"text"},{name:"GraphTitle",type:"text"},{name:"XAxis",type:"text"},{name:"YAxis",type:"text"},{name:"GroupBy",type:"text"},{name:"BubbleSize",type:"text"},{name:"Granularity",type:"text"},{name:"ChartType",type:"text"},{name:"StartDate",type:"Date"},{name:"EndDate",type:"Date"},{name:"InterestingMoments",type:"text"},{name:"Accumulate",type:"text"},{name:"FilterToggle",type:"text"},]}});Ext.define("ReplayAnalytics.view.Slider0",{extend:"Ext.slider.Slider",xtype:"slider0",requires:["Ext.slider.Slider"],config:{maxWidth:"600px",ui:"timeline",maxValue:31,minValue:0,flex:1,hidden:false,thumbConfig:{draggable:{translatable:{easingX:{duration:50,type:"ease-out"}}}},}});Ext.define("ReplayAnalytics.view.Slider1",{extend:"Ext.slider.Slider",xtype:"slider1",requires:["Ext.slider.Slider"],config:{maxWidth:"600px",ui:"timeline",maxValue:31,minValue:0,flex:1,hidden:false,thumbConfig:{draggable:{translatable:{easingX:{duration:50,type:"ease-out"}}}},}});Ext.define("ReplayAnalytics.view.Slider2",{extend:"Ext.slider.Slider",xtype:"slider2",requires:["Ext.slider.Slider"],config:{maxWidth:"600px",ui:"timeline",maxValue:31,minValue:0,flex:1,hidden:false,thumbConfig:{draggable:{translatable:{easingX:{duration:50,type:"ease-out"}}}},}});Ext.define("ReplayAnalytics.view.Slider4",{extend:"Ext.slider.Slider",xtype:"slider4",requires:["Ext.slider.Slider"],config:{maxWidth:"600px",ui:"timeline",maxValue:31,minValue:0,flex:1,hidden:false,thumbConfig:{draggable:{translatable:{easingX:{duration:50,type:"ease-out"}}}},}});Ext.define("ReplayAnalytics.view.Slider3",{extend:"Ext.slider.Slider",xtype:"slider3",requires:["Ext.slider.Slider"],config:{maxWidth:"600px",ui:"timeline",maxValue:31,minValue:0,flex:1,hidden:false,thumbConfig:{draggable:{translatable:{easingX:{duration:50,type:"ease-out"}}}},}});Ext.define("ReplayAnalytics.view.Slider5",{extend:"Ext.slider.Slider",xtype:"slider5",requires:["Ext.slider.Slider"],config:{maxWidth:"600px",ui:"timeline",maxValue:31,minValue:0,flex:1,hidden:false,thumbConfig:{draggable:{translatable:{easingX:{duration:50,type:"ease-out"}}}},}});Ext.define("ReplayAnalytics.view.AddChartPanel1",{extend:"Ext.Panel",xtype:"addchartpanel1",fullscreen:true,config:{layout:{type:"vbox",pack:"center"},id:"addchartpanel1",cls:"add-chart-panel-style",items:[{xtype:"panel",fullscreen:true,centered:true,style:"background-color: transparent; cursor: pointer;",items:[{xtype:"image",id:"chart1Image",hidden:false,autoShow:true,width:"180px",height:"180px",style:"width: 180px; height: 180px; background-size: 100%;",src:"lib/images/chart-icon.png"},{xtype:"button",iconCls:"add",html:"Add Chart",width:150,ui:"action",id:"chart1Button",style:"font-size: 14px; font-weight: normal; margin-left: 15px;",},]}]}});Ext.define("ReplayAnalytics.view.AddChartPanel2",{extend:"Ext.Panel",xtype:"addchartpanel2",fullscreen:true,config:{layout:{type:"vbox",pack:"center"},id:"addchartpanel2",cls:"add-chart-panel-style",items:[{xtype:"panel",fullscreen:true,centered:true,style:"background-color: transparent; cursor: pointer;",items:[{xtype:"image",id:"chart2Image",hidden:false,autoShow:true,width:"180px",height:"180px",style:"width: 180px; height: 180px; background-size: 100%;",src:"lib/images/chart-icon.png"},{xtype:"button",iconCls:"add",html:"Add Chart",width:150,ui:"action",id:"chart2Button",style:"font-size: 14px; font-weight: normal; margin-left: 15px;",},]}]}});Ext.define("ReplayAnalytics.view.AddChartPanel3",{extend:"Ext.Panel",xtype:"addchartpanel3",fullscreen:true,config:{layout:{type:"vbox",pack:"center"},id:"addchartpanel3",cls:"add-chart-panel-style",items:[{xtype:"panel",fullscreen:true,centered:true,style:"background-color: transparent; cursor: pointer;",items:[{xtype:"image",id:"chart3Image",hidden:false,autoShow:true,width:"180px",height:"180px",style:"width: 180px; height: 180px; background-size: 100%;",src:"lib/images/chart-icon.png"},{xtype:"button",iconCls:"add",html:"Add Chart",width:150,ui:"action",id:"chart3Button",style:"font-size: 14px; font-weight: normal; margin-left: 15px;",},]}]}});Ext.define("ReplayAnalytics.view.AddChartPanel4",{extend:"Ext.Panel",xtype:"addchartpanel4",fullscreen:true,config:{layout:{type:"vbox",pack:"center"},id:"addchartpanel4",cls:"add-chart-panel-style",items:[{xtype:"panel",fullscreen:true,centered:true,style:"background-color: transparent; cursor: pointer;",items:[{xtype:"image",id:"chart4Image",hidden:false,autoShow:true,width:"180px",height:"180px",style:"width: 180px; height: 180px; background-size: 100%;",src:"lib/images/chart-icon.png"},{xtype:"button",iconCls:"add",html:"Add Chart",width:150,ui:"action",id:"chart4Button",style:"font-size: 14px; font-weight: normal; margin-left: 15px;",},]}]}});Ext.define("ReplayAnalytics.view.Panel1",{extend:"Ext.Panel",xtype:"panel1",fullscreen:true,config:{id:"Panel1",layout:{type:"vbox",pack:"center"},flex:1,style:"padding-bottom:20px; background-color: white; color:black",items:[{xtype:"addchartpanel1",fullscreen:true,width:"100%",height:"100%",},]}});Ext.define("ReplayAnalytics.view.Panel2",{extend:"Ext.Panel",xtype:"panel2",config:{layout:{type:"vbox",pack:"center"},flex:1,style:"background-color: white; color:black",items:[{xtype:"addchartpanel2",fullscreen:true,width:"100%",height:"100%",},]}});Ext.define("ReplayAnalytics.view.Panel3",{extend:"Ext.Panel",xtype:"panel3",config:{layout:{type:"vbox",pack:"center"},flex:1,style:"background-color: white; color:black",items:[{xtype:"addchartpanel3",fullscreen:true,width:"100%",height:"100%",},]}});Ext.define("ReplayAnalytics.view.Panel4",{extend:"Ext.Panel",xtype:"panel4",config:{layout:{type:"vbox",pack:"center"},flex:1,style:"background-color: white; color:black",items:[{xtype:"addchartpanel4",fullscreen:true,width:"100%",height:"100%",},]}});Ext.define("ReplayAnalytics.view.AdminPanel",{extend:"Ext.Container",xtype:"adminpanel",requires:["Ext.ux.Fileup"],config:{fullscreen:true,hiddden:true,layout:{type:"vbox",},style:"background-color:#001919;",layout:{type:"vbox",pack:"start",align:"center"},items:[{docked:"top",xtype:"titlebar",title:"Admin Control Panel",docked:"top",layout:"hbox",height:"60px",width:"100%",items:[{xtype:"image",hidden:false,autoShow:true,docked:"left",width:"130px",height:"100%",cls:"replayanalyticslogo",src:"lib/images/mind-over-metrics-logo.png"},{xtype:"label",id:"usernamelabel3",docked:"left",cls:"usernamelabel",html:"Welcome",},{xtype:"button",id:"gobackbuttonadmin",align:"right",text:"Back",iconCls:"rightbig",}]},]},});Ext.define("ReplayAnalytics.view.DataSourceConfigurationPanel",{extend:"Ext.Panel",xtype:"datasourceconfigurationpanel",id:"datasourceconfigurationpanel",config:{layout:"vbox",modal:true,zIndex:10,hideOnMaskTap:false,centered:true,width:600,height:550,scrollable:{direction:"vertical",directionLock:false,},hidden:true,items:[{xtype:"toolbar",docked:"top",title:"Configure Data Source",},{xtype:"textfield",style:"padding: 10px; background-color: rgb(230,230,230); margin: 0px; font-size: 18px;",id:"datasourcenamefield",docked:"top",label:"Data Source Name:",},{xtype:"panel",docked:"top",style:"background-color: rgb(230,230,230); padding-left: 5px; padding-right: 5px; padding-top: 5px; padding-bottom: 10px;",layout:{type:"hbox",pack:"start",align:"justify"},items:[{xtype:"label",html:"Field Name",style:"padding-left: 5px; padding-right: 5px; background-color: rgb(230,230,230); font-size: 16px; font-weight: bold; text-align: center;",width:290,},{xtype:"label",html:"Type",style:"padding-left: 5px; padding-right: 5px; background-color: rgb(230,230,230); font-size: 16px; font-weight: bold; text-align: center;",width:290,},]},{xtype:"panel",id:"tablefieldscontainer",style:"background-color: rgb(235, 235, 235);",layout:"vbox",},{xtype:"toolbar",docked:"bottom",layout:{type:"hbox",pack:"justify"},items:[{xtype:"button",id:"canceldatasourceconfigurationebutton",html:"Cancel",align:"left",iconCls:"delete",},{xtype:"button",id:"adddatasourcefieldmanualbutton",html:"Add New Field",align:"left",hidden:true,iconCls:"add",},{xtype:"button",id:"donedatasourceconfigurebutton",html:"Finish",align:"right",iconCls:"rightbig",},]}]},});Ext.define("ReplayAnalytics.view.DataSourceTypeSelectionPanel",{extend:"Ext.Panel",xtype:"datasourcetypeselectionpanel",config:{layout:"vbox",modal:true,zIndex:10,hideOnMaskTap:false,centered:true,width:600,height:300,scroll:"vertical",hidden:true,items:[{xtype:"toolbar",docked:"top",title:"Select Data Source",},{xtype:"label",style:"margin: 20px;",html:"Select the type of data source to be added from the following options:",},{xtype:"selectfield",id:"datasourcetypeselectfield",label:"Data Source Types:",value:"None",options:[{text:"None Defined",value:"None"},{text:"Excel Spreadsheet",value:"excel_spreadsheet"},]},{xtype:"toolbar",docked:"bottom",layout:{type:"hbox",pack:"right"},items:[{xtype:"button",id:"donedatasourcetypeselectionbutton",html:"Next",align:"right",iconCls:"rightbig",},]}]},});Ext.define("ReplayAnalytics.view.DataSourceUploadPanel",{extend:"Ext.Panel",xtype:"datasourceuploadpanel",requires:["Ext.ux.Fileup"],config:{layout:{type:"vbox",pack:"start",align:"center"},modal:true,zIndex:10,hideOnMaskTap:false,centered:true,width:600,height:330,scroll:"vertical",hidden:true,items:[{xtype:"toolbar",docked:"top",title:"Upload Data Source",},{xtype:"label",style:"margin: 20px;",html:"Please select a data source file..",},{id:"selectedfilenamelabel",xtype:"label",height:10,style:"margin-top: 10px; margin-bottom: 10px; font-size: 15px;",html:"",},{id:"fileuploadbutton",xtype:"fileupload",style:"margin-top: 10px; margin-bottom:10px;",height:60,width:350,autoUpload:false,url:"uploadDataSourceFile.do"},{id:"fileuploadmessage",xtype:"label",height:10,style:"margin-top: 10px; margin-bottom: 20px; color: green; font-size: 15px; font-weight: bold;",html:"",},{xtype:"toolbar",docked:"bottom",layout:{type:"hbox",pack:"justify"},items:[{xtype:"button",id:"canceldatasourceuploadbutton",html:"Cancel",align:"left",iconCls:"delete",},{xtype:"button",id:"donedatasourceuploadbutton",html:"Next",align:"right",iconCls:"rightbig",},]}]},});Ext.define("ReplayAnalytics.view.DataSourceManagePanel",{extend:"Ext.Panel",xtype:"datasourcemanagepanel",config:{layout:{type:"vbox",pack:"center",align:"center"},modal:true,zIndex:10,hideOnMaskTap:false,centered:true,width:450,height:400,scroll:"vertical",hidden:true,items:[{xtype:"toolbar",docked:"top",title:"Manage Data Sources",},{xtype:"button",id:"adddatasourcemanagepanelbutton",html:"Add Data Source",style:"margin: 15px 0px; padding: 7px;",width:250,ui:"confirm",iconCls:"add",},{xtype:"button",id:"deletedatasourcemanagepanelbutton",html:"Delete Data Source",style:"margin: 15px 0px; padding: 7px;",width:250,ui:"decline",align:"right",iconCls:"delete",},{xtype:"button",id:"editdatasourcemanagepanelbutton",html:"Edit Data Source",style:"margin: 15px 0px; padding: 7px;",width:250,align:"right",disabled:true,ui:"action",iconCls:"list",},{xtype:"toolbar",docked:"bottom",layout:{type:"hbox",pack:"right"},items:[{xtype:"button",id:"closedatasourcemanagepanelbutton",html:"Close",align:"right",iconCls:"delete",},]}]},});Ext.define("ReplayAnalytics.view.DataSourceDeletePanel",{extend:"Ext.Panel",xtype:"datasourcedeletepanel",config:{layout:{type:"vbox"},modal:true,zIndex:10,hideOnMaskTap:false,centered:true,width:600,height:500,scroll:"vertical",hidden:true,items:[{xtype:"toolbar",docked:"top",title:"Delete Data Sources",},{xtype:"container",id:"datasourcedeletepanelcontainer",layout:{type:"vbox"},flex:1,},{xtype:"toolbar",docked:"bottom",layout:{type:"hbox",pack:"justify"},items:[{xtype:"button",id:"canceldatasourcedeletepanelbutton",html:"Back",align:"left",iconCls:"backspace",},{xtype:"button",id:"confirmdatasourcedeletepanelbutton",html:"Delete",ui:"decline",align:"right",iconCls:"delete",},]}]},});var loginController=undefined;var simpleLoadingScreen='<div><img width="50px" src="lib/images/loading.gif" alt="Please wait"></div>';Ext.define("ReplayAnalytics.controller.Login",{extend:"Ext.app.Controller",xtype:"logincontroller",requires:["ReplayAnalytics.view.DashboardGridRow","ReplayAnalytics.view.AddDashboardThumbnail",],config:{refs:{loginController:"logincontroller",mainController:"maincontroller",loginButton:"button[id=loginsubmitbutton]",logoutButton:"button[id=logoutbutton]",goBackButton:"button[id=gobackbutton]",saveDashboardButton:"button[id=savedashboardbutton]",clearButton:"button[id=clearloginpanelbutton]",loginScreen:"loginscreen",dashboardScreen:"dashboardscreen",dashboardGrid:"panel[id=dashboardgrid]",loginPanel:"loginpanel",userName:"emailfield[id=usernamefield]",password:"passwordfield[id=passwordfield]",rememberMe:"checkboxfield[id=remembermecheck]",mainScreen:"replayanalyticsmain",toggleDashboardFunction:"segmentedbutton[id=editsharedashboards]",saveDashboardDialog:"savedashboarddialog",saveDashboardSubmit:"button[id=savedashboardsubmit]",closeSaveDashboardDialog:"button[id=closesavedashboarddialog]",dashboardTitle:"textfield[id=dashboardtitlefield]",mainTitleBar:"replayanalyticstitlebar",shareDashboardDialog:"sharedashboarddialog",closeShareDashboardDialog:"button[id=closesharedashboarddialog]",emailDashboardLink:"button[id=emaildashboardlink]",dashboardShareLinkField:"textareafield[id=dashboardlinkfield]",editDashboardToggle:"button[id=editdashboardtogglebutton]",shareDashboardToggle:"button[id=sharedashboardtogglebutton]",viewDashboardToggle:"button[id=viewdashboardtoggle]",shareDashboardButton:"button[id=sharedashboardbutton]",openInNewTabButton:"button[id=openinnewtabbutton]",loginRedirectButton:"button[id=loginredirectbutton]",bookmarkDashboardButton:"button[id=bookmarkdashboardbutton]",userNameLabel:"label[id=usernamelabel]",userNameLabel2:"label[id=usernamelabel2]",},control:{loginButton:{tap:"submitLogin"},logoutButton:{tap:"doLogout",},clearButton:{tap:"clearFields",},goBackButton:{tap:"showDashboardGrid",},toggleDashboardFunction:{toggle:"toggleDashboardFunction",},saveDashboardButton:{tap:"saveDashboard",},saveDashboardSubmit:{tap:"saveDashboardSubmit",},closeSaveDashboardDialog:{tap:"closeSaveDashboardDialog",},closeShareDashboardDialog:{tap:"closeShareDashboardDialog",},emailDashboardLink:{tap:"emailDashboardLink",},shareDashboardButton:{tap:"showDashboardShareLink",},openInNewTabButton:{tap:"openInNewTab",},loginRedirectButton:{tap:"loginRedirect",},bookmarkDashboardButton:{tap:"bookmarkSharedDashboard",}}},launch:function(){loginController=this;clearAllStores();$mainController=loginController.getApplication().getController("Main");loginController.handleButtonTextsForScreenSize();Ext.Viewport.on("orientationchange","handleOrientationChange",this,{buffer:50});this.showMainScreen()},checkForURLQUeryString:function(){var b=Ext.Object.fromQueryString(location.search.substring(1));var a=b.uid;if(b.redirectUrl!=undefined&&b.redirectUrl!=""){ReplayAnalytics.app.redirect=true;ReplayAnalytics.app.redirectUrl=decodeURIComponent(b.redirectUrl);this.checkForUserSession()}else{if(b.uid!=undefined&&b.uid!=""){ReplayAnalytics.app.publicMode=true;ReplayAnalytics.app.uniqueDashboardId=b.uid}else{}}},handleOrientationChange:function(b,c,d,a){if(!loginController.getDashboardScreen().isHidden()){loginController.renderDashboardThumbnails();loginController.toggleDashboardFunction()}loginController.handleButtonTextsForScreenSize()},handleButtonTextsForScreenSize:function(){},submitLogin:function(){showLoadingMask();var d=this.getUserName().getValue();var c=this.getPassword().getValue();var a=false;var b="";if(d==""||c==""){b="All fields are required.";a=true}else{Ext.Ajax.request({url:"login.do",method:"POST",params:{userName:d,password:c,},success:this.decodeLoginData,failure:function(e){hideLoadingMask();logMessage("Failure Logging in.")},})}if(a){this.showMessageBox("Login Error",b)}},showDashboardGrid:function(){loginController.getApplication().getController("Main").clearAllPanels();loginController.getApplication().getController("Main").getGlobalSyncButton().setPressedButtons([false]);this.getLoginScreen().hide();this.getMainScreen().hide();this.getDashboardScreen().show();this.getDashboardGrid().show();this.getUserDashboards();ReplayAnalytics.app.uniqueDashboardId=undefined;ReplayAnalytics.app.publicMode=false;clearAllStores();ReplayAnalytics.app.setDefaultValues();ReplayAnalytics.app.currentDashboard=undefined;try{window.history.pushState("","",location.pathname)}catch(a){}if(ReplayAnalytics.app.currentUserSession!=undefined){if(ReplayAnalytics.app.currentUserSession.firstName!=undefined){loginController.getUserNameLabel().setHtml("Welcome "+ReplayAnalytics.app.currentUserSession.firstName);loginController.getUserNameLabel2().setHtml("Welcome "+ReplayAnalytics.app.currentUserSession.firstName)}}},showMainScreen:function(){loginController.getDashboardScreen().hide();loginController.getMainScreen().show();loginController.getApplication().getController("Main").loadStores()},showMessageBox:function(b,a){hideLoadingMask();Ext.Msg.alert(b,a,this.handleMessageBox)},handleMessageBox:function(){},doLogin:function(){this.showDashboardGrid()},doLogout:function(){this.getDashboardScreen().hide();this.getPassword().setValue("");this.getLoginScreen().show();this.clearUserSession()},clearFields:function(){this.getUserName().setValue("");this.getPassword().setValue("");this.getRememberMe().setChecked(false);ReplayAnalytics.app.currentUser=undefined},decodeLoginData:function(a){hideLoadingMask();var b=Ext.JSON.decode(a.responseText.trim());if(b!=undefined){if(b.error!=undefined){loginController.showMessageBox("Login Error",b.description);loginController.clearUserSession()}else{ReplayAnalytics.app.currentUserSession=b;if(loginController.getRememberMe().isChecked()){loginController.saveUserSession(a.responseText,b.expiryDate)}if(ReplayAnalytics.app.redirect&&ReplayAnalytics.app.redirectUrl!=undefined){window.location=ReplayAnalytics.app.redirectUrl}else{if(ReplayAnalytics.app.publicMode&&ReplayAnalytics.app.uniqueDashboardId!=undefined){loginController.showSharedDashboard(ReplayAnalytics.app.uniqueDashboardId)}else{loginController.doLogin()}}}}},checkForUserSession:function(){var b=readCookie(ReplayAnalytics.app.sessionCookie);if(b!=null){var a=Ext.JSON.decode(b);if(a!=null){showLoadingMask();Ext.Ajax.request({url:"checkSession.do",method:"POST",params:{userId:a.userId,accessKey:a.accessKey,},success:this.decodeLoginData,failure:function(c){hideLoadingMask();logMessage("Failure Checking Session.")},})}}else{if(ReplayAnalytics.app.publicMode&&ReplayAnalytics.app.uniqueDashboardId!=undefined){loginController.showSharedDashboard(ReplayAnalytics.app.uniqueDashboardId)}}},saveUserSession:function(c,a){var b=7;createCookie(ReplayAnalytics.app.sessionCookie,c,b)},clearUserSession:function(){eraseCookie(ReplayAnalytics.app.sessionCookie)},saveDashboard:function(){this.getSaveDashboardDialog().show();if(ReplayAnalytics.app.currentDashboard!=undefined&&ReplayAnalytics.app.currentDashboard.dashboardTitle!=undefined){loginController.getDashboardTitle().setValue(ReplayAnalytics.app.currentDashboard.dashboardTitle)}},handleDashboardSave:function(b){hideLoadingMask();var c=Ext.JSON.decode(b.responseText.trim());if(c!=undefined){if(c.error!=undefined){loginController.showMessageBox("Error",c.description)}else{ReplayAnalytics.app.currentDashboard=c.dashboard;var a=false;for(i=0;i<ReplayAnalytics.app.userDashboardDetails.length;i++){if(ReplayAnalytics.app.userDashboardDetails[i].dashboardId==c.dashboard.dashboardId){ReplayAnalytics.app.userDashboardDetails[i]=c.dashboard;a=true}}if(!a){ReplayAnalytics.app.userDashboardDetails[ReplayAnalytics.app.userDashboardDetails.length]=c.dashboard}loginController.showMessageBox("Success",c.description)}}},saveDashboardSubmit:function(){this.closeSaveDashboardDialog();loginController.getApplication().getController("Main").checkForConfiguredGraphPanels();if(ReplayAnalytics.app.currentUserSession!=null){showLoadingMask();var c=undefined;var a=this.getDashboardTitle().getValue();var b=true;if(ReplayAnalytics.app.currentDashboard!=undefined){c=ReplayAnalytics.app.currentDashboard.dashboardId}Ext.Ajax.request({url:"saveDashbaord.do",method:"POST",params:{userId:ReplayAnalytics.app.currentUserSession.userId,accessKey:ReplayAnalytics.app.currentUserSession.accessKey,dashboardId:c,databaseName:new Array(ReplayAnalytics.app.databaseSetting),filterToggle:new Array(ReplayAnalytics.app.filterToggle),dashboardTitle:a,isShared:b,panelSettings:new Array(ReplayAnalytics.app.panelSettings),panel1Data:ReplayAnalytics.app.panelData[1],panel2Data:ReplayAnalytics.app.panelData[2],panel3Data:ReplayAnalytics.app.panelData[3],panel4Data:ReplayAnalytics.app.panelData[4],isChartConfigured:new Array(ReplayAnalytics.app.isChartConfigured),chartTypes:new Array(ReplayAnalytics.app.chartTypes),graphTitles:new Array(ReplayAnalytics.app.graphTitle),xAxis:new Array(ReplayAnalytics.app.xs),yAxis:new Array(ReplayAnalytics.app.ys),groupBys:new Array(ReplayAnalytics.app.groupBys),granularities:new Array(ReplayAnalytics.app.granularities),accumulate:new Array(ReplayAnalytics.app.accumulate),startDates:new Array(ReplayAnalytics.app.startDate),endDates:new Array(ReplayAnalytics.app.currentEndDate),activePanels:ReplayAnalytics.app.numberActivePanels,replaySpeed:ReplayAnalytics.app.replaySpeed,interestingMomentSetting:ReplayAnalytics.app.interestingMoments,replayCommentsSetting:ReplayAnalytics.app.replayCommentsSetting,type1Setting:ReplayAnalytics.app.interestingMomentType1Setting,type2Setting:ReplayAnalytics.app.interestingMomentType2Setting,type3Setting:ReplayAnalytics.app.interestingMomentType3Setting,type4Setting:ReplayAnalytics.app.interestingMomentType4Setting,informanceUserFilter:new Array(filterController.encodeFilterJSONForSaving("InformanceUser")),informanceReasonFilter:new Array(filterController.encodeFilterJSONForSaving("reason")),informanceSetFilter:new Array(filterController.encodeFilterJSONForSaving("set")),informancePartFilter:new Array(filterController.encodeFilterJSONForSaving("InformancePart")),infinityQSUserFilter:new Array(filterController.encodeFilterJSONForSaving("InfinityQSUser")),infinityQSTestFilter:new Array(filterController.encodeFilterJSONForSaving("Test")),infinityQSQPMFilter:new Array(filterController.encodeFilterJSONForSaving("Name")),infinityQSPartFilter:new Array(filterController.encodeFilterJSONForSaving("InfinityQSPart")),infinityQSProcessFilter:new Array(filterController.encodeFilterJSONForSaving("Process")),},success:this.handleDashboardSave,failure:function(d){hideLoadingMask();logMessage("Failure Saving Dashboard.")},})}},closeSaveDashboardDialog:function(){this.getSaveDashboardDialog().hide()},getUserDashboards:function(){showLoadingMask();Ext.Ajax.request({url:"getUserDashbaords.do",method:"POST",params:{userId:ReplayAnalytics.app.currentUserSession.userId,},success:this.handleUserDashboardsData,failure:function(a){hideLoadingMask();logMessage("Failure Getting User Dashboards.")},})},fetchDashboardDetails:function(b){showLoadingMask();for(i=0;i<ReplayAnalytics.app.userDashboardDetails.length;i++){if(ReplayAnalytics.app.userDashboardDetails[i].dashboardId==b){ReplayAnalytics.app.currentDashboard=ReplayAnalytics.app.userDashboardDetails[i];loginController.showDashboard(ReplayAnalytics.app.userDashboardDetails[i]);return}}var a=ReplayAnalytics.app.currentUserSession.userId;Ext.Ajax.request({url:"getUserDashbaordData.do",method:"POST",params:{dashboardId:b,userId:a,},success:this.handleUserDashboardDetails,failure:function(c){hideLoadingMask();logMessage("Failure Getting Dashboard data.")},})},handleUserDashboardsData:function(a){hideLoadingMask();var b=Ext.JSON.decode(a.responseText);if(b.error!=undefined){ReplayAnalytics.app.userDashboards=new Array()}else{ReplayAnalytics.app.userDashboards=b}loginController.renderDashboardThumbnails()},handleUserDashboardDetails:function(a){var b=Ext.JSON.decode(a.responseText);if(b.error!=undefined){ReplayAnalytics.app.currentDashboard=undefined;if(b.error=="508"){Ext.Msg.alert("ReplayAnalytics &#153;",b.description,function(){location.search=""})}else{Ext.Msg.alert("ReplayAnalytics &#153;",b.description,Ext.emptyFn)}}else{ReplayAnalytics.app.currentDashboard=b;ReplayAnalytics.app.userDashboardDetails[ReplayAnalytics.app.userDashboardDetails.length]=b;loginController.showDashboard(ReplayAnalytics.app.currentDashboard)}hideLoadingMask()},showBlankDashboard:function(){showLoadingMask();clearAllStores();ReplayAnalytics.app.setDefaultValues();ReplayAnalytics.app.currentDashboard=undefined;loginController.getMainTitleBar().setTitle("Replay Analytics &#153;");loginController.getDashboardTitle().setValue("");loginController.showMainScreen()},renderDashboardThumbnails:function(){var c=290;loginController.getDashboardGrid().removeAll();var d=ReplayAnalytics.app.userDashboards.length;var h=new Array();var b=0;h[b]=Ext.create("ReplayAnalytics.view.DashboardGridRow");loginController.getDashboardGrid().show();loginController.getDashboardGrid().add(h[b]);h[b].show();if(d==0){e=Ext.create("ReplayAnalytics.view.AddDashboardThumbnail");e.element.on({tap:{fn:loginController.showBlankDashboard},});h[b].add(e)}else{var a=h[b].element.getWidth();var l=(a/c)|0;var g=Math.ceil((d+1)/l);loginController.getDashboardGrid().element.setHeight(c*g);var f=0;for(i=0;i<d;i++){if(!(f<l)){b++;h[b]=Ext.create("ReplayAnalytics.view.DashboardGridRow");h[b].element.setTop(c*b);loginController.getDashboardGrid().add(h[b]);h[b].show();f=0}var m=ReplayAnalytics.app.userDashboards[i];var e=Ext.create("ReplayAnalytics.view.DashboardThumbnail");e.setData(i);e.items.items[2].setHtml('<div style="font-size: 17px;">'+m.dashboardTitle+'</div><br /><div style="font-size: 13px;">'+m.dateModified+"</div>");if(m.isBookmarkedDashboard){e.items.items[0].items.items[2].show()}else{if(m.isSharedWithOthers){e.items.items[0].items.items[1].show()}}if(m.isUpdated){e.items.items[0].items.items[0].show()}e.setDashboardIndex(i);e.element.on({tap:{fn:loginController.onDashboardClick},});f++;h[b].add(e)}if(i==d){if(f==l){b++;h[b]=Ext.create("ReplayAnalytics.view.DashboardGridRow");h[b].element.setTop(c*b);loginController.getDashboardGrid().add(h[b]);h[b].show();f=0}e=Ext.create("ReplayAnalytics.view.AddDashboardThumbnail");e.element.on({tap:{fn:loginController.showBlankDashboard},});h[b].add(e)}}},deleteDashboard:function(a){Ext.Msg.show({title:"Delete",message:"Are you sure you want to delete the dashboard titled '"+a.dashboardTitle+"' from your library?",width:300,buttons:Ext.MessageBox.YESNO,fn:function(b){if(b=="yes"){Ext.Ajax.request({url:"deleteUserDashbaord.do",method:"POST",params:{userId:ReplayAnalytics.app.currentUserSession.userId,dashboardId:a.dashboardId,isBookmarkedDashboard:a.isBookmarkedDashboard,},success:loginController.handleDashboardDelete,failure:function(c){hideLoadingMask();logMessage("Failure Deleting Dashboard.")},})}}})},handleDashboardDelete:function(a){var b=Ext.JSON.decode(a.responseText);Ext.Msg.alert("ReplayAnalytics &#153;",b.description,Ext.emptyFn);loginController.getToggleDashboardFunction().setPressedButtons([true,false,false]);ReplayAnalytics.app.isDashboardEditMode=false;ReplayAnalytics.app.isDashboardShareMode=false;loginController.getUserDashboards()},onDashboardClick:function(){var a=Ext.ComponentQuery.query("panel[id="+this.id+"]")[0].getDashboardIndex();if(ReplayAnalytics.app.isDashboardEditMode){loginController.deleteDashboard(ReplayAnalytics.app.userDashboards[a])}else{if(ReplayAnalytics.app.isDashboardShareMode){ReplayAnalytics.app.currentDashboard=ReplayAnalytics.app.userDashboards[a];loginController.showDashboardShareLink()}else{loginController.fetchDashboardDetails(ReplayAnalytics.app.userDashboards[a].dashboardId)}}},showDashboard:function(b){clearAllStores();var a=new Array();if(b!=undefined){if(b.dashboardTitle!=undefined){loginController.getMainTitleBar().setTitle(b.dashboardTitle)}else{loginController.getMainTitleBar().setTitle("Replay Analytics &#153;")}ReplayAnalytics.app.currentDashboard=b;if(b.globalSettings!=undefined){loginController.loadGlobalSettingsFromData(b.globalSettings)}if(b.panel1Settings!=undefined&&b.panel1Settings.id!=undefined){loginController.loadSettingsFromData(b.panel1Settings,1);a[1]=b.panel1Settings.databaseName;loginController.getApplication().getController("Filter").loadFilterSettingsFromPanelSettings(b.panel1Settings.filters);if(b.panel1Settings.panelData!=undefined&&b.panel1Settings.panelURL!=undefined){eraseData(b.panel1Settings.panelURL);saveData(b.panel1Settings.panelURL,Ext.JSON.encode(b.panel1Settings.panelData))}}if(b.panel2Settings!=undefined&&b.panel2Settings.id!=undefined){loginController.loadSettingsFromData(b.panel2Settings,2);a[2]=b.panel1Settings.databaseName;loginController.getApplication().getController("Filter").loadFilterSettingsFromPanelSettings(b.panel2Settings.filters);if(b.panel2Settings.panelData!=undefined&&b.panel2Settings.panelURL!=undefined){eraseData(b.panel2Settings.panelURL);saveData(b.panel2Settings.panelURL,Ext.JSON.encode(b.panel2Settings.panelData))}}if(b.panel3Settings!=undefined&&b.panel3Settings.id!=undefined){loginController.loadSettingsFromData(b.panel3Settings,3);a[3]=b.panel1Settings.databaseName;loginController.getApplication().getController("Filter").loadFilterSettingsFromPanelSettings(b.panel3Settings.filters);if(b.panel3Settings.panelData!=undefined&&b.panel3Settings.panelURL!=undefined){eraseData(b.panel3Settings.panelURL);saveData(b.panel3Settings.panelURL,Ext.JSON.encode(b.panel3Settings.panelData))}}if(b.panel4Settings!=undefined&&b.panel4Settings.id!=undefined){loginController.loadSettingsFromData(b.panel4Settings,4);a[4]=b.panel1Settings.databaseName;loginController.getApplication().getController("Filter").loadFilterSettingsFromPanelSettings(b.panel4Settings.filters);if(b.panel4Settings.panelData!=undefined&&b.panel4Settings.panelURL!=undefined){eraseData(b.panel4Settings.panelURL);saveData(b.panel4Settings.panelURL,Ext.JSON.encode(b.panel4Settings.panelData))}}loginController.getApplication().getController("DatabaseTable").cacheDatabaseTableDataForDashboard(a)}},loadGlobalSettingsFromData:function(a){var b;b=[{NumberOfPanels:a.activePanels,InterestingMoments:a.interestingMoment,ReplayComments:a.replayCommentsSetting,ReplaySpeed:a.replaySpeed,InterestingMomentType3Setting:a.type3Setting,InterestingMomentType1Setting:a.type1Setting,InterestingMomentType2Setting:a.type2Setting,InterestingMomentType4Setting:a.type4Setting}];Ext.getStore("GlobalSettingsStore").setData(b);Ext.getStore("GlobalSettingsStore").sync()},loadSettingsFromData:function(b,c){var a;a=[{Database:b.databaseName,GraphTitle:b.graphTitle,XAxis:b.xAxis,YAxis:b.yAxis,GroupBy:b.groupBy,BubbleSize:"",Granularity:b.granularity,ChartType:b.chartType,StartDate:b.startDate,EndDate:b.endDate,InterestingMoments:"",Accumulate:b.accumulate,FilterToggle:b.filterToggle}];Ext.getStore("UserSettings"+c).setData(a);Ext.getStore("UserSettings"+c).sync()},toggleDashboardFunction:function(){if(loginController.getEditDashboardToggle()==loginController.getToggleDashboardFunction().getPressedButtons()[0]){ReplayAnalytics.app.isDashboardShareMode=false;ReplayAnalytics.app.isDashboardEditMode=true}else{if(loginController.getShareDashboardToggle()==loginController.getToggleDashboardFunction().getPressedButtons()[0]){ReplayAnalytics.app.isDashboardShareMode=true;ReplayAnalytics.app.isDashboardEditMode=false}else{ReplayAnalytics.app.isDashboardShareMode=false;ReplayAnalytics.app.isDashboardEditMode=false}}var a=Ext.ComponentQuery.query("container[customId=dashboard-delete-icon]");if(ReplayAnalytics.app.isDashboardEditMode){for(i=0;i<a.length;i++){a[i].show()}Ext.ComponentQuery.query("adddashboardthumbnail")[0].hide()}else{if(ReplayAnalytics.app.isDashboardShareMode){for(i=0;i<a.length;i++){a[i].hide()}Ext.ComponentQuery.query("adddashboardthumbnail")[0].hide()}else{for(i=0;i<a.length;i++){a[i].hide()}Ext.ComponentQuery.query("adddashboardthumbnail")[0].show()}}},showSharedDashboard:function(a){loginController.getLoginScreen().hide();loginController.fetchDashboardWithUID(a)},fetchDashboardWithUID:function(b){showLoadingMask();ReplayAnalytics.app.publicMode=true;var a=undefined;try{a=ReplayAnalytics.app.currentUserSession.userId}catch(c){}Ext.Ajax.request({url:"getDashboardDataFromUniqueID.do",method:"POST",params:{uniqueId:b,userId:a,},success:this.handleUserDashboardDetails,})},closeShareDashboardDialog:function(){loginController.getShareDashboardDialog().hide()},emailDashboardLink:function(){var b="Replay Analytics : "+ReplayAnalytics.app.currentDashboard.dashboardTitle;var a=encodeURIComponent(emailBody_part1+loginController.getDashboardShareLinkField().getValue()+emailBody_part2);window.location="mailto:?subject="+b+"&body="+a},editDashboardToggle:function(){loginController.toggleDashboardFunction()},showDashboardShareLink:function(){if(ReplayAnalytics.app.currentDashboard==undefined){loginController.showMessageBox("Error","Sorry, you can't share a dashboard until you have saved it.")}else{loginController.getShareDashboardDialog().show();loginController.getDashboardShareLinkField().setValue(window.location.toString()+"?uid="+ReplayAnalytics.app.currentDashboard.uuid)}},openInNewTab:function(){url=loginController.getDashboardShareLinkField().getValue();if(url!=undefined&&url!=""){window.open(url,"_blank")}},bookmarkSharedDashboard:function(){showLoadingMask();Ext.Ajax.request({url:"bookmarkDashboard.do",method:"POST",params:{userId:ReplayAnalytics.app.currentUserSession.userId,dashboardId:ReplayAnalytics.app.currentDashboard.dashboardId,},success:this.handleDashboardBookmark,})},handleDashboardBookmark:function(a){var b=Ext.JSON.decode(a.responseText);Ext.Msg.alert("ReplayAnalytics &#153;",b.description,Ext.emptyFn)},loginRedirect:function(){window.location=location.protocol+"//"+location.host+location.pathname+"?redirectUrl="+encodeURIComponent(location.toString())},});Ext.define("CachedResponse",{responseText:"Unknown",status:"200"});var mainController;var startTime=new Date();var finishTime=new Date();var $lastGestureCalledTime=new Date();var loadingScreen='Loading...<div><img src="lib/images/ajax-loader3.gif" alt="Please wait"></div><br /><br />Taking too long to load? <button onclick="resetSettings();">Reset</button>';Ext.Ajax.on("beforerequest",function(e,c){var b=c.url;var d=loadData(b);if(d!=null){logMessage("Found local cached data. value= "+d);if(b.indexOf("getUnifiedData")==0){ReplayAnalytics.app.panelSettings[ReplayAnalytics.app.currentActivePanelIndex]=b;ReplayAnalytics.app.panelData[ReplayAnalytics.app.currentActivePanelIndex]=d}var a=new CachedResponse();a.responseText=d;if(typeof(c.success)!="undefined"){c.success(a);return false}else{if(typeof(c.callback)!="undefined"){c.callback(c,true,a);return false}else{return}}}});Ext.Ajax.on("requestcomplete",function(c,a,b){if(b.url.indexOf("getUnifiedData")==0){saveData(b.url,a.responseText);ReplayAnalytics.app.panelSettings[ReplayAnalytics.app.currentActivePanelIndex]=b.url;ReplayAnalytics.app.panelData[ReplayAnalytics.app.currentActivePanelIndex]=a.responseText}hideLoadingMask()});Ext.define("ReplayAnalytics.controller.Main",{extend:"Ext.app.Controller",xtype:"maincontroller",requires:["Ext.chart.axis.Numeric","Ext.chart.axis.Category","Ext.chart.series.Scatter","Ext.chart.series.Bar","Ext.util.Format","Ext.MessageBox","ReplayAnalytics.model.DataModel"],config:{refs:{mainController:"maincontroller",dataModel:"datamodel",mainContainer:"replayanalyticsmain",chart1:"chart[id=chart1]",chart2:"chart[id=chart2]",chart3:"chart[id=chart3]",chart4:"chart[id=chart4]",chart5:"chart[id=chart5]",panel1:"panel1",panel2:"panel2",panel3:"panel3",panel4:"panel4",slider0:"slider0",slider1:"slider1",slider2:"slider2",slider3:"slider3",slider4:"slider4",slider5:"slider5",fourPanelLayout:"fourpanellayout",bottomTwoPanelLayout:"bottomtwopanellayout",topTwoPanelLayout:"toptwopanellayout",settingsButton:"button[id=settingsbutton]",globalSettingsButton:"button[id=globalsettingsbutton]",globalSyncButton:"segmentedbutton[id=globalsynctogglebutton]",filterSetting:"selectfield[id=filtersettingtoggle]",},control:{chart1:{tap:"setFocusOnPanel1"},chart2:{tap:"setFocusOnPanel2"},chart3:{tap:"setFocusOnPanel3"},chart4:{tap:"setFocusOnPanel4"},panel1:{tap:"setFocusOnPanel1"},panel2:{tap:"setFocusOnPanel2"},panel3:{tap:"setFocusOnPanel3"},panel4:{tap:"setFocusOnPanel4"},}},launch:function(){mainController=this},clearAllPanels:function(){for(i=0;i<ReplayAnalytics.app.newChart.length;i++){var a=ReplayAnalytics.app.newChart[i];if(a!=undefined){if(a.getLegend()!=undefined){a.getLegend().destroy()}a.destroy()}}},handleTitleBarButtons:function(){this.getSettingsButton().setDisabled(false);this.getSettingsButton().show()},loadStores:function(){this.handleTitleBarButtons();this.checkForConfiguredGraphPanels();ReplayAnalytics.app.creatingGraphs=true;Ext.getStore("GlobalSettingsStore").load();if(Ext.getStore("GlobalSettingsStore").getData().items[0]!=undefined){ReplayAnalytics.app.interestingMoments=Ext.getStore("GlobalSettingsStore").getData().items[0].getData().InterestingMoments;ReplayAnalytics.app.replayCommentsSetting=Ext.getStore("GlobalSettingsStore").getData().items[0].getData().ReplayComments;ReplayAnalytics.app.replaySpeed=Ext.getStore("GlobalSettingsStore").getData().items[0].getData().ReplaySpeed;ReplayAnalytics.app.numberActivePanels=Ext.getStore("GlobalSettingsStore").getData().items[0].getData().NumberOfPanels;ReplayAnalytics.app.interestingMomentType3Setting=Ext.getStore("GlobalSettingsStore").getData().items[0].getData().InterestingMomentType3Setting;ReplayAnalytics.app.interestingMomentType4Setting=Ext.getStore("GlobalSettingsStore").getData().items[0].getData().InterestingMomentType4Setting;ReplayAnalytics.app.interestingMomentType1Setting=Ext.getStore("GlobalSettingsStore").getData().items[0].getData().InterestingMomentType1Setting;ReplayAnalytics.app.interestingMomentType2Setting=Ext.getStore("GlobalSettingsStore").getData().items[0].getData().InterestingMomentType2Setting}this.getApplication().getController("Settings").updateChartAnimationSettings();this.changePanels();var a=1;for(;a<=ReplayAnalytics.app.numberActivePanels;a++){Ext.getStore("UserSettings"+a).load();if(Ext.getStore("UserSettings"+a).getData().items[0]!=undefined){Ext.get("chart"+a+"Button").hide();Ext.get("chart"+a+"Image").hide();ReplayAnalytics.app.databaseSetting[a]=Ext.getStore("UserSettings"+a).getData().items[0].getData().Database;ReplayAnalytics.app.filterToggle[a]=Ext.getStore("UserSettings"+a).getData().items[0].getData().FilterToggle;ReplayAnalytics.app.graphTitle[a]=Ext.getStore("UserSettings"+a).getData().items[0].getData().GraphTitle;ReplayAnalytics.app.xs[a]=Ext.getStore("UserSettings"+a).getData().items[0].getData().XAxis;ReplayAnalytics.app.ys[a]=Ext.getStore("UserSettings"+a).getData().items[0].getData().YAxis;ReplayAnalytics.app.sizeBys[a]=Ext.getStore("UserSettings"+a).getData().items[0].getData().BubbleSize;ReplayAnalytics.app.granularities[a]=Ext.getStore("UserSettings"+a).getData().items[0].getData().Granularity;ReplayAnalytics.app.chartTypes[a]=Ext.getStore("UserSettings"+a).getData().items[0].getData().ChartType;ReplayAnalytics.app.groupBys[a]=Ext.getStore("UserSettings"+a).getData().items[0].getData().GroupBy;ReplayAnalytics.app.startDate[a]=new Date(Ext.getStore("UserSettings"+a).getData().items[0].getData().StartDate);ReplayAnalytics.app.currentStartDate[a]=new Date(Ext.getStore("UserSettings"+a).getData().items[0].getData().StartDate);ReplayAnalytics.app.currentDate[a]=new Date(Ext.getStore("UserSettings"+a).getData().items[0].getData().StartDate);ReplayAnalytics.app.currentEndDate[a]=new Date(Ext.getStore("UserSettings"+a).getData().items[0].getData().EndDate);ReplayAnalytics.app.accumulate[a]=Ext.getStore("UserSettings"+a).getData().items[0].getData().Accumulate;ReplayAnalytics.app.currentActivePanelIndex=a;switch(ReplayAnalytics.app.granularities[ReplayAnalytics.app.currentActivePanelIndex]){case"Hourly":ReplayAnalytics.app.valueGranularities[ReplayAnalytics.app.currentActivePanelIndex]=1;break;case"Daily":ReplayAnalytics.app.valueGranularities[ReplayAnalytics.app.currentActivePanelIndex]=2;break;case"Weekly":ReplayAnalytics.app.valueGranularities[ReplayAnalytics.app.currentActivePanelIndex]=3;break;case"Monthly":ReplayAnalytics.app.valueGranularities[ReplayAnalytics.app.currentActivePanelIndex]=4;break}showLoadingMask();this.chartSetUp()}else{if(ReplayAnalytics.app.publicMode){Ext.get("chart"+a+"Button").hide()}else{Ext.get("chart"+a+"Button").show();Ext.get("chart"+a+"Image").show()}Ext.ComponentQuery.query("addchartpanel"+a)[0].setHtml("")}}this.changePanels();ReplayAnalytics.app.currentActivePanelIndex=1;this.setFocusOnPanel(ReplayAnalytics.app.currentActivePanelIndex);this.addPanelClickListener();hideLoadingMask();ReplayAnalytics.app.creatingGraphs=false},addPanelClickListener:function(){Ext.ComponentQuery.query("panel1")[0].element.on({singletap:{fn:function(){mainController.setFocusOnPanel(1)}}});Ext.ComponentQuery.query("panel2")[0].element.on({singletap:{fn:function(){mainController.setFocusOnPanel(2)}}});Ext.ComponentQuery.query("panel3")[0].element.on({singletap:{fn:function(){mainController.setFocusOnPanel(3)}}});Ext.ComponentQuery.query("panel4")[0].element.on({singletap:{fn:function(){mainController.setFocusOnPanel(4)}}})},changePanels:function(){if(ReplayAnalytics.app.numberActivePanels=="1"){switch(ReplayAnalytics.app.currentActivePanelIndex){case 1:this.getPanel2().hide();this.getBottomTwoPanelLayout().hide();break;case 2:this.getPanel1().hide();this.getBottomTwoPanelLayout().hide();break;case 3:this.getPanel4().hide();this.getTopTwoPanelLayout().hide();break;case 4:this.getPanel3().hide();this.getTopTwoPanelLayout().hide();break}}else{if(ReplayAnalytics.app.numberActivePanels=="2"){if(ReplayAnalytics.app.currentActivePanelIndex==1||ReplayAnalytics.app.currentActivePanelIndex==2){this.getTopTwoPanelLayout().show();this.getPanel1().show();this.getPanel2().show();this.getBottomTwoPanelLayout().hide()}else{this.getBottomTwoPanelLayout().show();this.getPanel3().show();this.getPanel4().show();this.getTopTwoPanelLayout().hide()}}else{this.getTopTwoPanelLayout().show();this.getBottomTwoPanelLayout().show();this.getPanel1().show();this.getPanel2().show();this.getPanel3().show();this.getPanel4().show()}}},chartSetUp:function(){mainController=this;this.checkForConfiguredGraphPanels();if(ReplayAnalytics.app.dateSet[ReplayAnalytics.currentActivePanelIndex]==true){showLoadingMask()}mainController.changeDateRangeLabel(ReplayAnalytics.currentActivePanelIndex);var a=ReplayAnalytics.app.currentActivePanelIndex;if(a==5){Ext.ComponentQuery.query("interestingmomentgraphpanel")[0].setHtml("")}else{Ext.ComponentQuery.query("panel"+a)[0].setHtml("")}var b=Ext.ComponentQuery.query("chart[id=chart"+a+"]")[0];if(b!=undefined){b.destroy()}ReplayAnalytics.app.chartCreated[ReplayAnalytics.app.currentActivePanelIndex]=false;mainController.configureGranularities(ReplayAnalytics.app.currentActivePanelIndex,ReplayAnalytics.app.startDate[ReplayAnalytics.app.currentActivePanelIndex],ReplayAnalytics.app.currentEndDate[ReplayAnalytics.app.currentActivePanelIndex])},getModelTypeForField:function(a){if(a.fieldType=="DATA_FIELD"){return"int"}if(a.fieldType=="CATEGORY_FIELD"||a.fieldType=="TIME_CATEGORY_FIELD"){return"text"}if(a.fieldType=="TIME_FIELD"){return"Date"}},changeModelFields:function(){var e=ReplayAnalytics.app.databaseSetting[ReplayAnalytics.app.currentActivePanelIndex];var f=this.getApplication().getController("DatabaseTable").getDatabaseTableIdForTableName(e);var c=this.getApplication().getController("DatabaseTable").getDatabaseTablesFieldsForDatabaseTableId(f);var b=new Array();if(c!=undefined){var a={name:"length",type:"int"};b.push(a);a={name:"groupByBar1",type:"int"};b.push(a);a={name:"groupByBar2",type:"int"};b.push(a);a={name:"groupByBar3",type:"int"};b.push(a);a={name:"groupByBar4",type:"int"};b.push(a);a={name:"Other",type:"text"};b.push(a);for(var d=0;d<c.length;d++){a={name:c[d].fieldLabel,type:mainController.getModelTypeForField(c[d])};b.push(a)}}ReplayAnalytics.model.DataModel.setFields(b)},configureGranularities:function(e,b,f){this.changeModelFields();var l=f.getFullYear()-b.getFullYear();var h=12*l+(f.getMonth()-b.getMonth());if(h==0){h=1}var c=this.DatedaysBetween(b,f);var d=Math.ceil(c/7);if(d==0){d=1}var g=this.DatehoursBetween(b,f);if(g<=0){g=24}var a=new Array();switch(ReplayAnalytics.app.granularities[e]){case"Hourly":ReplayAnalytics.app.differentialMultiplier[ReplayAnalytics.app.currentActivePanelIndex]=Math.round(100/g);Ext.ComponentQuery.query("slider"+e)[0].setMaxValue(ReplayAnalytics.app.differentialMultiplier[ReplayAnalytics.app.currentActivePanelIndex]*g);this.generateURLForChartData(a,e,g);break;case"Daily":ReplayAnalytics.app.differentialMultiplier[ReplayAnalytics.app.currentActivePanelIndex]=Math.round(100/c);Ext.ComponentQuery.query("slider"+e)[0].setMaxValue(ReplayAnalytics.app.differentialMultiplier[ReplayAnalytics.app.currentActivePanelIndex]*c);this.generateURLForChartData(a,e,c);break;case"Weekly":ReplayAnalytics.app.differentialMultiplier[ReplayAnalytics.app.currentActivePanelIndex]=Math.round(100/(d-1));Ext.ComponentQuery.query("slider"+e)[0].setMaxValue(ReplayAnalytics.app.differentialMultiplier[ReplayAnalytics.app.currentActivePanelIndex]*(d-1));mod=d%7;seven=7;if(mod==0){this.generateURLForChartData(a,e,d)}else{this.generateURLForChartData(a,e,d-1)}break;case"Monthly":ReplayAnalytics.app.differentialMultiplier[ReplayAnalytics.app.currentActivePanelIndex]=Math.round(100/h);Ext.ComponentQuery.query("slider"+e)[0].setMaxValue(ReplayAnalytics.app.differentialMultiplier[ReplayAnalytics.app.currentActivePanelIndex]*h);this.generateURLForChartData(a,e,h);break}},DatedaysBetween:function(f,e){var b=1000*60*60*24;var d=f.getTime();var c=e.getTime();var a=c-d;return Math.ceil(a/b)},DatehoursBetween:function(f,e){var c=1000*60*60;var d=f.getTime();var b=e.getTime();var a=b-d;return Math.ceil(a/c)},decodeUnifiedData:function(d,b,c){logMessage("JSON for decoding is=="+d.responseText);response=Ext.JSON.decode(d.responseText.trim());dateArray=new Array();ReplayAnalytics.app.groupByBarLabels=response.groupByBarArray;this.changeModelFields();for(index=0;index<response.data.length;index++){dateArray[index]=response.dateArray[index];c[index]=Ext.create("Ext.data.Store",{autoLoad:true,model:"ReplayAnalytics.model.DataModel",data:response.data[index],proxy:{type:"memory",reader:{type:"json",rootProperty:"data"}}})}ReplayAnalytics.app.globalDateArray[ReplayAnalytics.app.currentActivePanelIndex]=dateArray;ReplayAnalytics.app.jsonstore[ReplayAnalytics.app.currentActivePanelIndex]=c;ReplayAnalytics.app.dataFieldValues[ReplayAnalytics.app.currentActivePanelIndex]=response.dataField;ReplayAnalytics.app.categoryFieldValues[ReplayAnalytics.app.currentActivePanelIndex]=response.categoryField;if(b>5){return}ReplayAnalytics.app.maximumPositions[b]=Ext.ComponentQuery.query("slider"+b)[0].getMaxValue();if(response.yMax!=undefined){ReplayAnalytics.app.Ymax[ReplayAnalytics.app.currentActivePanelIndex]=response.yMax;ReplayAnalytics.app.YmaxReceived[ReplayAnalytics.app.currentActivePanelIndex]=true;if(ReplayAnalytics.app.Ymax[ReplayAnalytics.app.currentActivePanelIndex]!=undefined&&ReplayAnalytics.app.Ymax[ReplayAnalytics.app.currentActivePanelIndex]>0){ReplayAnalytics.app.Ymax[ReplayAnalytics.app.currentActivePanelIndex]=parseInt(ReplayAnalytics.app.Ymax[ReplayAnalytics.app.currentActivePanelIndex])+(parseInt(ReplayAnalytics.app.Ymax[ReplayAnalytics.app.currentActivePanelIndex])*ReplayAnalytics.app.graphMaxValueMargin);if(ReplayAnalytics.app.Ymax[ReplayAnalytics.app.currentActivePanelIndex]==0){ReplayAnalytics.app.Ymax[ReplayAnalytics.app.currentActivePanelIndex]=10}}}if(response.xMax!=undefined){ReplayAnalytics.app.Xmax[ReplayAnalytics.app.currentActivePanelIndex]=response.xMax;ReplayAnalytics.app.XmaxReceived[ReplayAnalytics.app.currentActivePanelIndex]=true;if(ReplayAnalytics.app.Xmax[ReplayAnalytics.app.currentActivePanelIndex]!=undefined&&ReplayAnalytics.app.Xmax[ReplayAnalytics.app.currentActivePanelIndex]>0){ReplayAnalytics.app.Xmax[ReplayAnalytics.app.currentActivePanelIndex]=parseInt(ReplayAnalytics.app.Xmax[ReplayAnalytics.app.currentActivePanelIndex])+(parseInt(ReplayAnalytics.app.Xmax[ReplayAnalytics.app.currentActivePanelIndex])*ReplayAnalytics.app.graphMaxValueMargin);if(ReplayAnalytics.app.Xmax[ReplayAnalytics.app.currentActivePanelIndex]==0){ReplayAnalytics.app.Xmax[ReplayAnalytics.app.currentActivePanelIndex]=10}}}if(response.interestingMoments!=undefined){ReplayAnalytics.app.interestingMomentsPoints[ReplayAnalytics.app.currentActivePanelIndex]=response.interestingMoments}finishTime=new Date();var a=finishTime-startTime;console.info("Graph Loading/Decoding time for Panel"+ReplayAnalytics.app.currentActivePanelIndex+" is = "+a+"ms");this.getApplication().getController("Playback").resetFunction()},generateURLForChartData:function(g,q,t){var h=ReplayAnalytics.app.currentActivePanelIndex;var s=ReplayAnalytics.app.databaseSetting[h];var f=ReplayAnalytics.app.chartTypes[h];var v=dateFormat(ReplayAnalytics.app.startDate[h],"yyyy-mm-dd");var n=dateFormat(ReplayAnalytics.app.currentEndDate[h],"yyyy-mm-dd");var a=ReplayAnalytics.app.granularities[h];var l=ReplayAnalytics.app.xs[h];var o=ReplayAnalytics.app.ys[h];var m=ReplayAnalytics.app.groupBys[h];var r=ReplayAnalytics.app.accumulate[h];var d=ReplayAnalytics.app.interestingMomentType1Setting;var p=ReplayAnalytics.app.interestingMomentType2Setting;var b=ReplayAnalytics.app.interestingMomentType3Setting;var e=ReplayAnalytics.app.interestingMomentType4Setting;var c="getUnifiedData.do?databaseName="+s+"&chartType="+f+"&absStartDate="+v+"&absEndDate="+n+"&differential="+t+"&granularity="+a+"&x_axis="+l+"&y_axis="+o+"&groupBy="+m+"&accum="+r+"&imType1Setting="+d+"&imType2Setting="+p+"&imType3Setting="+b+"&imType4Setting="+e;this.getUnifiedData(c,q,g)},getUnifiedData:function(a,b,c){startTime=new Date();Ext.Ajax.request({url:a,disableCaching:false,success:function(d){mainController.decodeUnifiedData(d,b,c)},failure:function(d){hideLoadingMask();logMessage("Unified Request Failed for URL-"+a)},})},setFocusOnPanel:function(a){if(a!=0){if(this.getGlobalSyncButton().getPressedButtons().length!=0){this.getSettingsButton().setDisabled(false);this.getGlobalSettingsButton().setDisabled(false)}this.getGlobalSyncButton().setPressedButtons([false]);this.getFourPanelLayout().setCls("unselected-panel");this.getPanel1().setCls("unselected-panel");this.getPanel2().setCls("unselected-panel");this.getPanel3().setCls("unselected-panel");this.getPanel4().setCls("unselected-panel");this.getSlider0().hide();this.getSlider2().hide();this.getSlider3().hide();this.getSlider4().hide();this.getSlider1().hide();if(a!=5&&a!=0){Ext.ComponentQuery.query("panel"+a)[0].setCls("selected-panel")}Ext.ComponentQuery.query("slider"+a)[0].show();ReplayAnalytics.app.currentActivePanelIndex=a;this.changeDateRangeLabel(a)}},setFocusOnPanel1:function(){this.setFocusOnPanel(1)},setFocusOnPanel2:function(){this.setFocusOnPanel(2)},setFocusOnPanel3:function(){this.setFocusOnPanel(3)},setFocusOnPanel4:function(){this.setFocusOnPanel(4)},changeDateRangeLabel:function(d){if(ReplayAnalytics.app.isChartConfigured[d]){try{var a=dateFormat(ReplayAnalytics.app.startDate[d],"m/d/yy");var e=dateFormat(ReplayAnalytics.app.currentEndDate[d],"m/d/yy");var b="<p class ='dateRangeLabelClass'>"+a+" - "+e+"</p>";Ext.ComponentQuery.query("container[id=daterangelabel]")[0].setHtml(b)}catch(c){Ext.ComponentQuery.query("container[id=daterangelabel]")[0].setHtml("")}}else{Ext.ComponentQuery.query("container[id=daterangelabel]")[0].setHtml("")}},checkForConfiguredGraphPanels:function(){var a=1;for(;a<=ReplayAnalytics.app.numberActivePanels;a++){Ext.getStore("UserSettings"+a).load();if(Ext.getStore("UserSettings"+a).getData().items[0]!=undefined){ReplayAnalytics.app.isChartConfigured[a]=true}}},});Ext.define("ReplayAnalytics.controller.Pie",{extend:"Ext.app.Controller",xtype:"piecontroller",config:{refs:{loginController:"logincontroller",mainController:"maincontroller",},},launch:function(){},createPieChart:function(b,e,a,c){var d=ReplayAnalytics.app.newChart[ReplayAnalytics.app.currentActivePanelIndex];if(d!=undefined){if(d.getLegend()!=undefined){d.getLegend().destroy()}d.destroy()}ReplayAnalytics.app.newChart[ReplayAnalytics.app.currentActivePanelIndex]=Ext.create("Ext.chart.PolarChart",{id:"chart"+ReplayAnalytics.app.currentActivePanelIndex,store:b,flex:1,interactions:["rotate"],legend:{position:"right",},innerPadding:{top:15,left:0,right:0,bottom:25},colors:["#115fa6","#94ae0a","#a61120","#ff8809","#ffd13e","#a61187","#24ad9a","#7c7474","#a66111"],series:[{type:"pie",labelField:a,xField:e,donut:0,showInLegend:true,contrast:true,animate:{duration:ReplayAnalytics.app.animateSpeed,delay:ReplayAnalytics.app.animateSpeed/2,easing:"ease"},label:{field:a,display:"rotate",contrast:true,},labelOverflowPadding:10,}],})},});Ext.define("ReplayAnalytics.controller.HorizontalBar",{extend:"Ext.app.Controller",xtype:"horizontalbarcontroller",config:{refs:{loginController:"logincontroller",mainController:"maincontroller",},},launch:function(){},createHorizontalBarChart:function(a,c,b){var d=ReplayAnalytics.app.newChart[ReplayAnalytics.app.currentActivePanelIndex];if(d!=undefined){if(d.getLegend()!=undefined){d.getLegend().destroy()}d.destroy()}if(b==undefined){this.createHorizontalBarChartGroupByNone(a,c)}else{ReplayAnalytics.app.groupByValueBar=new Array();for(i=0;i<b.length;i++){ReplayAnalytics.app.groupByValueBar[i]="groupByBar"+(i+1)}if(b.length!=0&&b[b.length-1]!="other"){b[b.length]="Other";ReplayAnalytics.app.groupByValueBar[ReplayAnalytics.app.groupByValueBar]="Other"}this.createHorizontalBarChartGroupBy(a,c,b)}},createHorizontalBarChartGroupByNone:function(a,b){ReplayAnalytics.app.newChart[ReplayAnalytics.app.currentActivePanelIndex]=Ext.create("Ext.chart.CartesianChart",{id:"chart"+ReplayAnalytics.app.currentActivePanelIndex,flipXY:true,flex:1,store:a,insetPadding:{top:15,left:0,right:0,bottom:25},animate:{duration:ReplayAnalytics.app.animateSpeed,delay:ReplayAnalytics.app.animateSpeed/2,easing:"ease"},axes:[{type:"numeric",position:"bottom",style:{strokeStyle:"black",},label:{fontFamily:"Helvetica",color:"#4270A2"},fields:ReplayAnalytics.app.dataFieldValues[ReplayAnalytics.app.currentActivePanelIndex],minimum:0,maximum:ReplayAnalytics.app.Xmax[ReplayAnalytics.app.currentActivePanelIndex],title:{text:ReplayAnalytics.app.dataFieldValues[ReplayAnalytics.app.currentActivePanelIndex],fillStyle:"#4270A2",},},{type:"category",position:"left",label:{fontFamily:"Helvetica",color:"#4270A2"},fields:ReplayAnalytics.app.categoryFieldValues[ReplayAnalytics.app.currentActivePanelIndex],style:{strokeStyle:"black",},title:{text:ReplayAnalytics.app.categoryFieldValues[ReplayAnalytics.app.currentActivePanelIndex],fillStyle:"#4270A2",},}],series:[{type:"bar",xField:ReplayAnalytics.app.categoryFieldValues[ReplayAnalytics.app.currentActivePanelIndex],yField:ReplayAnalytics.app.dataFieldValues[ReplayAnalytics.app.currentActivePanelIndex],axis:"left",highlight:true,showInLegend:false,style:{stroke:"rgb(40,40,40)",},subStyle:{fill:["#115fa6","#94ae0a","#a61120","#ff8809","#ffd13e","#a61187","#24ad9a","#7c7474","#a66111"]}}]})},createHorizontalBarChartGroupBy:function(a,c,b){ReplayAnalytics.app.newChart[ReplayAnalytics.app.currentActivePanelIndex]=Ext.create("Ext.chart.CartesianChart",{id:"chart"+ReplayAnalytics.app.currentActivePanelIndex,flipXY:true,flex:1,store:a,insetPadding:{top:15,left:0,right:0,bottom:25},legend:{position:"right"},axes:[{type:"numeric",position:"bottom",style:{strokeStyle:"black",},label:{fontFamily:"Helvetica",color:"#4270A2"},minimum:0,maximum:ReplayAnalytics.app.Xmax[ReplayAnalytics.app.currentActivePanelIndex],title:{text:ReplayAnalytics.app.dataFieldValues[ReplayAnalytics.app.currentActivePanelIndex],fillStyle:"#4270A2",},},{type:"category",position:"left",label:{fontFamily:"Helvetica",color:"#4270A2"},fields:ReplayAnalytics.app.categoryFieldValues[ReplayAnalytics.app.currentActivePanelIndex],style:{strokeStyle:"black",},title:{text:ReplayAnalytics.app.categoryFieldValues[ReplayAnalytics.app.currentActivePanelIndex],fillStyle:"#4270A2",},}],series:[{type:"bar",xField:ReplayAnalytics.app.categoryFieldValues[ReplayAnalytics.app.currentActivePanelIndex],yField:ReplayAnalytics.app.groupByValueBar,title:b,axis:"left",highlight:true,animate:{duration:ReplayAnalytics.app.animateSpeed,delay:ReplayAnalytics.app.animateSpeed/2,easing:"ease"},style:{stroke:"rgb(40,40,40)",},subStyle:{fill:["#115fa6","#94ae0a","#a61120","#ff8809","#ffd13e","#a61187","#24ad9a","#7c7474","#a66111"]}}]})},});Ext.define("ReplayAnalytics.controller.LineBar",{extend:"Ext.app.Controller",xtype:"linebarcontroller",config:{refs:{loginController:"logincontroller",mainController:"maincontroller",}},launch:function(){},createLineChart:function(a,c,b){var d=ReplayAnalytics.app.newChart[ReplayAnalytics.app.currentActivePanelIndex];if(d!=undefined){if(d.getLegend()!=undefined){d.getLegend().destroy()}d.destroy()}if(b==undefined){this.createLineChartGroupByNone(a,c)}else{ReplayAnalytics.app.groupByValueBar=new Array();for(i=0;i<b.length;i++){ReplayAnalytics.app.groupByValueBar[i]="groupByBar"+(i+1)}if(b.length!=0&&b[b.length-1]!="other"){b[b.length]="Other";ReplayAnalytics.app.groupByValueBar[ReplayAnalytics.app.groupByValueBar]="Other"}if(b.length==2){this.createLineChartGroupBy1(a,c,b)}else{if(b.length==3){this.createLineChartGroupBy2(a,c,b)}else{if(b.length==4){this.createLineChartGroupBy3(a,c,b)}else{if(b.length==5){this.createLineChartGroupBy4(a,c,b)}}}}}},createLineChartGroupByNone:function(a,b){ReplayAnalytics.app.newChart[ReplayAnalytics.app.currentActivePanelIndex]=Ext.create("Ext.chart.CartesianChart",{id:"chart"+ReplayAnalytics.app.currentActivePanelIndex,flex:1,store:a,shadow:true,insetPadding:{top:15,left:0,right:0,bottom:25},animate:{duration:ReplayAnalytics.app.animateSpeed,delay:ReplayAnalytics.app.animateSpeed/2,easing:"ease"},innerPadding:{top:15,left:0,right:0,bottom:25},axes:[{type:"numeric",position:"left",style:{strokeStyle:"black",shadowColor:"black",},label:{fontFamily:"Helvetica",color:"#4270A2"},fields:ReplayAnalytics.app.dataFieldValues[ReplayAnalytics.app.currentActivePanelIndex],minimum:0,maximum:ReplayAnalytics.app.Ymax[ReplayAnalytics.app.currentActivePanelIndex],title:{text:ReplayAnalytics.app.dataFieldValues[ReplayAnalytics.app.currentActivePanelIndex],strokeStyle:"#4270A2",fillStyle:"#4270A2",shadowColor:"black",},},{type:"category",position:"bottom",label:{fontFamily:"Helvetica",color:"#4270A2"},fields:ReplayAnalytics.app.categoryFieldValues[ReplayAnalytics.app.currentActivePanelIndex],style:{strokeStyle:"black",shadowColor:"black",},title:{text:ReplayAnalytics.app.categoryFieldValues[ReplayAnalytics.app.currentActivePanelIndex],strokeStyle:"#4270A2",fillStyle:"#4270A2",shadowColor:"black",},}],series:[{type:"line",xField:ReplayAnalytics.app.categoryFieldValues[ReplayAnalytics.app.currentActivePanelIndex],yField:ReplayAnalytics.app.dataFieldValues[ReplayAnalytics.app.currentActivePanelIndex],axis:"bottom",highlight:true,showInLegend:false,shadow:true,animate:{duration:ReplayAnalytics.app.animateSpeed,delay:ReplayAnalytics.app.animateSpeed/2,easing:"ease"},style:{stroke:"#115fa6",fillOpacity:0,lineWidth:3,smooth:true,},subStyle:{fill:["#115fa6","#94ae0a","#a61120","#ff8809","#ffd13e","#a61187","#24ad9a","#7c7474","#a66111"]}}]})},createLineChartGroupBy1:function(a,c,b){ReplayAnalytics.app.newChart[ReplayAnalytics.app.currentActivePanelIndex]=Ext.create("Ext.chart.CartesianChart",{id:"chart"+ReplayAnalytics.app.currentActivePanelIndex,flex:1,store:a,shadow:true,insetPadding:{top:15,left:0,right:0,bottom:25},animate:{duration:ReplayAnalytics.app.animateSpeed,delay:ReplayAnalytics.app.animateSpeed/2,easing:"ease"},legend:{position:"right"},axes:[{type:"numeric",position:"left",style:{strokeStyle:"black",shadowColor:"black",},label:{fontFamily:"Helvetica",color:"#4270A2"},minimum:0,maximum:ReplayAnalytics.app.Ymax[ReplayAnalytics.app.currentActivePanelIndex],title:{text:ReplayAnalytics.app.dataFieldValues[ReplayAnalytics.app.currentActivePanelIndex],strokeStyle:"#4270A2",fillStyle:"#4270A2",shadowColor:"black",},},{type:"category",position:"bottom",label:{fontFamily:"Helvetica",color:"#4270A2"},fields:ReplayAnalytics.app.categoryFieldValues[ReplayAnalytics.app.currentActivePanelIndex],style:{strokeStyle:"black",shadowColor:"black",},title:{text:ReplayAnalytics.app.categoryFieldValues[ReplayAnalytics.app.currentActivePanelIndex],strokeStyle:"#4270A2",fillStyle:"#4270A2",shadowColor:"black",},}],series:[{type:"line",xField:ReplayAnalytics.app.categoryFieldValues[ReplayAnalytics.app.currentActivePanelIndex],yField:ReplayAnalytics.app.groupByValueBar[0],title:b[0],axis:"bottom",highlight:true,showInLegend:true,shadow:true,animate:{duration:ReplayAnalytics.app.animateSpeed,delay:ReplayAnalytics.app.animateSpeed/2,easing:"ease"},style:{stroke:"#115fa6",fillOpacity:0,lineWidth:3,smooth:true,},marker:{type:"circle",radius:4,lineWidth:3}},{type:"line",xField:ReplayAnalytics.app.categoryFieldValues[ReplayAnalytics.app.currentActivePanelIndex],yField:ReplayAnalytics.app.groupByValueBar[1],title:b[1],axis:"bottom",highlight:true,showInLegend:true,shadow:true,animate:{duration:ReplayAnalytics.app.animateSpeed,delay:ReplayAnalytics.app.animateSpeed/2,easing:"ease"},style:{stroke:"#94ae0a",fillOpacity:0,lineWidth:3,smooth:true,},marker:{type:"circle",radius:4,lineWidth:3}},]})},createLineChartGroupBy2:function(a,c,b){ReplayAnalytics.app.newChart[ReplayAnalytics.app.currentActivePanelIndex]=Ext.create("Ext.chart.CartesianChart",{id:"chart"+ReplayAnalytics.app.currentActivePanelIndex,flex:1,store:a,shadow:true,insetPadding:{top:15,left:0,right:0,bottom:25},animate:{duration:ReplayAnalytics.app.animateSpeed,delay:ReplayAnalytics.app.animateSpeed/2,easing:"ease"},legend:{position:"right"},axes:[{type:"numeric",position:"left",style:{strokeStyle:"black",shadowColor:"black",},label:{fontFamily:"Helvetica",color:"#4270A2"},minimum:0,maximum:ReplayAnalytics.app.Ymax[ReplayAnalytics.app.currentActivePanelIndex],title:{text:ReplayAnalytics.app.dataFieldValues[ReplayAnalytics.app.currentActivePanelIndex],strokeStyle:"#4270A2",fillStyle:"#4270A2",shadowColor:"black",},},{type:"category",position:"bottom",label:{fontFamily:"Helvetica",color:"#4270A2"},fields:ReplayAnalytics.app.categoryFieldValues[ReplayAnalytics.app.currentActivePanelIndex],style:{strokeStyle:"black",shadowColor:"black",},title:{text:ReplayAnalytics.app.categoryFieldValues[ReplayAnalytics.app.currentActivePanelIndex],strokeStyle:"#4270A2",fillStyle:"#4270A2",shadowColor:"black",},}],series:[{type:"line",xField:ReplayAnalytics.app.categoryFieldValues[ReplayAnalytics.app.currentActivePanelIndex],yField:ReplayAnalytics.app.groupByValueBar[0],title:b[0],axis:"bottom",highlight:true,showInLegend:true,shadow:true,animate:{duration:ReplayAnalytics.app.animateSpeed,delay:ReplayAnalytics.app.animateSpeed/2,easing:"ease"},style:{stroke:"#115fa6",fillOpacity:0,lineWidth:3,smooth:true,},marker:{type:"circle",radius:4,lineWidth:3}},{type:"line",xField:ReplayAnalytics.app.categoryFieldValues[ReplayAnalytics.app.currentActivePanelIndex],yField:ReplayAnalytics.app.groupByValueBar[1],title:b[1],axis:"bottom",highlight:true,showInLegend:true,shadow:true,animate:{duration:ReplayAnalytics.app.animateSpeed,delay:ReplayAnalytics.app.animateSpeed/2,easing:"ease"},style:{stroke:"#94ae0a",fillOpacity:0,lineWidth:3,smooth:true,},marker:{type:"circle",radius:4,lineWidth:3}},{type:"line",xField:ReplayAnalytics.app.categoryFieldValues[ReplayAnalytics.app.currentActivePanelIndex],yField:ReplayAnalytics.app.groupByValueBar[2],title:b[2],axis:"bottom",highlight:true,showInLegend:true,shadow:true,animate:{duration:ReplayAnalytics.app.animateSpeed,delay:ReplayAnalytics.app.animateSpeed/2,easing:"ease"},style:{stroke:"#a61120",fillOpacity:0,lineWidth:3,smooth:true,},marker:{type:"circle",radius:4,lineWidth:3}},]})},createLineChartGroupBy3:function(a,c,b){ReplayAnalytics.app.newChart[ReplayAnalytics.app.currentActivePanelIndex]=Ext.create("Ext.chart.CartesianChart",{id:"chart"+ReplayAnalytics.app.currentActivePanelIndex,flex:1,store:a,shadow:true,insetPadding:{top:15,left:0,right:0,bottom:25},animate:{duration:ReplayAnalytics.app.animateSpeed,delay:ReplayAnalytics.app.animateSpeed/2,easing:"ease"},legend:{position:"right"},axes:[{type:"numeric",position:"left",style:{strokeStyle:"black",shadowColor:"black",},label:{fontFamily:"Helvetica",color:"#4270A2"},minimum:0,maximum:ReplayAnalytics.app.Ymax[ReplayAnalytics.app.currentActivePanelIndex],title:{text:ReplayAnalytics.app.dataFieldValues[ReplayAnalytics.app.currentActivePanelIndex],strokeStyle:"#4270A2",fillStyle:"#4270A2",shadowColor:"black",},},{type:"category",position:"bottom",label:{fontFamily:"Helvetica",color:"#4270A2"},fields:ReplayAnalytics.app.categoryFieldValues[ReplayAnalytics.app.currentActivePanelIndex],style:{strokeStyle:"black",shadowColor:"black",},title:{text:ReplayAnalytics.app.categoryFieldValues[ReplayAnalytics.app.currentActivePanelIndex],strokeStyle:"#4270A2",fillStyle:"#4270A2",shadowColor:"black",},}],series:[{type:"line",xField:ReplayAnalytics.app.categoryFieldValues[ReplayAnalytics.app.currentActivePanelIndex],yField:ReplayAnalytics.app.groupByValueBar[0],title:b[0],axis:"bottom",highlight:true,showInLegend:true,shadow:true,animate:{duration:ReplayAnalytics.app.animateSpeed,delay:ReplayAnalytics.app.animateSpeed/2,easing:"ease"},style:{stroke:"#115fa6",fillOpacity:0,lineWidth:3,smooth:true,},marker:{type:"circle",radius:4,lineWidth:3}},{type:"line",xField:ReplayAnalytics.app.categoryFieldValues[ReplayAnalytics.app.currentActivePanelIndex],yField:ReplayAnalytics.app.groupByValueBar[1],title:b[1],axis:"bottom",highlight:true,showInLegend:true,shadow:true,animate:{duration:ReplayAnalytics.app.animateSpeed,delay:ReplayAnalytics.app.animateSpeed/2,easing:"ease"},style:{stroke:"#94ae0a",fillOpacity:0,lineWidth:3,smooth:true,},marker:{type:"circle",radius:4,lineWidth:3}},{type:"line",xField:ReplayAnalytics.app.categoryFieldValues[ReplayAnalytics.app.currentActivePanelIndex],yField:ReplayAnalytics.app.groupByValueBar[2],title:b[2],axis:"bottom",highlight:true,showInLegend:true,shadow:true,animate:{duration:ReplayAnalytics.app.animateSpeed,delay:ReplayAnalytics.app.animateSpeed/2,easing:"ease"},style:{stroke:"#a61120",fillOpacity:0,lineWidth:3,smooth:true,},marker:{type:"circle",radius:4,lineWidth:3}},{type:"line",xField:ReplayAnalytics.app.categoryFieldValues[ReplayAnalytics.app.currentActivePanelIndex],yField:ReplayAnalytics.app.groupByValueBar[3],title:b[3],axis:"bottom",highlight:true,showInLegend:true,shadow:true,animate:{duration:ReplayAnalytics.app.animateSpeed,delay:ReplayAnalytics.app.animateSpeed/2,easing:"ease"},style:{stroke:"#ff8809",fillOpacity:0,lineWidth:3,smooth:true,},marker:{type:"circle",radius:4,lineWidth:3}},]})},createLineChartGroupBy4:function(a,c,b){ReplayAnalytics.app.newChart[ReplayAnalytics.app.currentActivePanelIndex]=Ext.create("Ext.chart.CartesianChart",{id:"chart"+ReplayAnalytics.app.currentActivePanelIndex,flex:1,store:a,shadow:true,insetPadding:{top:15,left:0,right:0,bottom:25},animate:{duration:ReplayAnalytics.app.animateSpeed,delay:ReplayAnalytics.app.animateSpeed/2,easing:"ease"},legend:{position:"right"},axes:[{type:"numeric",position:"left",style:{strokeStyle:"black",},label:{fontFamily:"Helvetica",color:"#4270A2"},fields:b,minimum:0,maximum:ReplayAnalytics.app.Ymax[ReplayAnalytics.app.currentActivePanelIndex],title:{text:ReplayAnalytics.app.dataFieldValues[ReplayAnalytics.app.currentActivePanelIndex],strokeStyle:"#4270A2",fillStyle:"#4270A2",shadowColor:"black",},},{type:"category",position:"bottom",label:{fontFamily:"Helvetica",color:"#4270A2"},fields:ReplayAnalytics.app.categoryFieldValues[ReplayAnalytics.app.currentActivePanelIndex],style:{strokeStyle:"black",shadowColor:"black",},title:{text:ReplayAnalytics.app.categoryFieldValues[ReplayAnalytics.app.currentActivePanelIndex],strokeStyle:"#4270A2",fillStyle:"#4270A2",shadowColor:"black",},}],series:[{type:"line",xField:ReplayAnalytics.app.categoryFieldValues[ReplayAnalytics.app.currentActivePanelIndex],yField:ReplayAnalytics.app.groupByValueBar[0],title:b[0],axis:"bottom",highlight:true,showInLegend:true,shadow:true,animate:{duration:ReplayAnalytics.app.animateSpeed,delay:ReplayAnalytics.app.animateSpeed/2,easing:"ease"},style:{stroke:"#115fa6",fillOpacity:0,lineWidth:3,smooth:true,},marker:{type:"circle",radius:4,lineWidth:3}},{type:"line",xField:ReplayAnalytics.app.categoryFieldValues[ReplayAnalytics.app.currentActivePanelIndex],yField:ReplayAnalytics.app.groupByValueBar[1],title:b[1],axis:"bottom",highlight:true,showInLegend:true,shadow:true,animate:{duration:ReplayAnalytics.app.animateSpeed,delay:ReplayAnalytics.app.animateSpeed/2,easing:"ease"},style:{stroke:"#94ae0a",fillOpacity:0,lineWidth:3,smooth:true,},marker:{type:"circle",radius:4,lineWidth:3}},{type:"line",xField:ReplayAnalytics.app.categoryFieldValues[ReplayAnalytics.app.currentActivePanelIndex],yField:ReplayAnalytics.app.groupByValueBar[2],title:b[2],axis:"bottom",highlight:true,showInLegend:true,shadow:true,animate:{duration:ReplayAnalytics.app.animateSpeed,delay:ReplayAnalytics.app.animateSpeed/2,easing:"ease"},style:{stroke:"#a61120",fillOpacity:0,lineWidth:3,smooth:true,},marker:{type:"circle",radius:4,lineWidth:3}},{type:"line",xField:ReplayAnalytics.app.categoryFieldValues[ReplayAnalytics.app.currentActivePanelIndex],yField:ReplayAnalytics.app.groupByValueBar[3],title:b[3],axis:"bottom",highlight:true,showInLegend:true,shadow:true,animate:{duration:ReplayAnalytics.app.animateSpeed,delay:ReplayAnalytics.app.animateSpeed/2,easing:"ease"},style:{stroke:"#ff8809",fillOpacity:0,lineWidth:3,smooth:true,},marker:{type:"circle",radius:4,lineWidth:3}},{type:"line",xField:ReplayAnalytics.app.categoryFieldValues[ReplayAnalytics.app.currentActivePanelIndex],yField:ReplayAnalytics.app.groupByValueBar[4],title:b[4],axis:"bottom",highlight:true,showInLegend:true,shadow:true,animate:{duration:ReplayAnalytics.app.animateSpeed,delay:ReplayAnalytics.app.animateSpeed/2,easing:"ease"},style:{stroke:"#ff8809",fillOpacity:0,lineWidth:3,smooth:true,},marker:{type:"circle",radius:4,lineWidth:3}},]})},});Ext.define("ReplayAnalytics.controller.Scatter",{extend:"Ext.app.Controller",xtype:"scattercontroller",config:{refs:{loginController:"logincontroller",mainController:"maincontroller",},},launch:function(){},createScatterChart:function(e,b,a,g,d,c){var f=ReplayAnalytics.app.newChart[ReplayAnalytics.app.currentActivePanelIndex];if(f!=undefined){if(f.getLegend()!=undefined){f.getLegend().destroy()}f.destroy()}ReplayAnalytics.app.newChart[ReplayAnalytics.app.currentActivePanelIndex]=Ext.create("Ext.chart.CartesianChart",{id:"chart"+ReplayAnalytics.app.currentActivePanelIndex,animate:true,renderTo:Ext.getBody(),flex:1,autoShow:true,store:b,axes:[{type:"numeric",position:"bottom",fields:[a],style:{strokeStyle:"black",shadowColor:"black",},label:{fontFamily:"Helvetica",color:"#4270A2"},title:{text:a,strokeStyle:"#4270A2",fillStyle:"#4270A2",shadowColor:"black",},minimum:0,maximum:ReplayAnalytics.app.Xmax[ReplayAnalytics.app.currentActivePanelIndex],},{type:"numeric",position:"left",fields:[g],style:{strokeStyle:"black",shadowColor:"black",},label:{fontFamily:"Helvetica",color:"#4270A2"},title:{text:g,strokeStyle:"#4270A2",fillStyle:"#4270A2",shadowColor:"black",},minimum:0,maximum:ReplayAnalytics.app.Ymax[ReplayAnalytics.app.currentActivePanelIndex],}],series:[{type:"scatter",fill:true,xField:a,yField:g,animate:{duration:ReplayAnalytics.app.animateSpeed,delay:ReplayAnalytics.app.animateSpeed/2,easing:"ease"},marker:{type:"circle",fill:"#a00",fillOpacity:1,radius:10,lineWidth:1,strokeOpacity:1,strokeStyle:"black",shadowColor:"black",shadowOffestX:2,shadowOffsetY:2,}}]})},createScatterChartGroupBy:function(d,b,a,e,c){},});Ext.define("ReplayAnalytics.controller.VerticalBar",{extend:"Ext.app.Controller",xtype:"verticalbarcontroller",config:{refs:{loginController:"logincontroller",mainController:"maincontroller",},},launch:function(){},createVerticalBarChart:function(a,c,b){var d=ReplayAnalytics.app.newChart[ReplayAnalytics.app.currentActivePanelIndex];if(d!=undefined){if(d.getLegend()!=undefined){d.getLegend().destroy()}d.destroy()}if(b==undefined){this.createVerticalBarChartGroupByNone(a,c)}else{ReplayAnalytics.app.groupByValueBar=new Array();for(i=0;i<b.length;i++){ReplayAnalytics.app.groupByValueBar[i]="groupByBar"+(i+1)}if(b.length!=0&&b[b.length-1]!="other"){b[b.length]="Other";ReplayAnalytics.app.groupByValueBar[ReplayAnalytics.app.groupByValueBar]="Other"}this.createVerticalBarChartGroupBy(a,c,b)}},createVerticalBarChartGroupByNone:function(a,b){ReplayAnalytics.app.newChart[ReplayAnalytics.app.currentActivePanelIndex]=Ext.create("Ext.chart.CartesianChart",{id:"chart"+ReplayAnalytics.app.currentActivePanelIndex,flipXY:false,flex:1,store:a,shadow:true,animate:{duration:ReplayAnalytics.app.animateSpeed,delay:ReplayAnalytics.app.animateSpeed/2,easing:"ease"},axes:[{type:"numeric",position:"left",style:{strokeStyle:"black",shadowColor:"black",},label:{fontFamily:"Helvetica",color:"#4270A2"},fields:ReplayAnalytics.app.dataFieldValues[ReplayAnalytics.app.currentActivePanelIndex],minimum:0,maximum:ReplayAnalytics.app.Ymax[ReplayAnalytics.app.currentActivePanelIndex],title:{text:ReplayAnalytics.app.dataFieldValues[ReplayAnalytics.app.currentActivePanelIndex],strokeStyle:"#4270A2",fillStyle:"#4270A2",shadowColor:"black",},},{type:"category",position:"bottom",label:{fontFamily:"Helvetica",color:"#4270A2"},fields:ReplayAnalytics.app.categoryFieldValues[ReplayAnalytics.app.currentActivePanelIndex],style:{strokeStyle:"black",shadowColor:"black",},title:{text:ReplayAnalytics.app.categoryFieldValues[ReplayAnalytics.app.currentActivePanelIndex],strokeStyle:"#4270A2",fillStyle:"#4270A2",shadowColor:"black",},}],series:[{type:"bar",xField:ReplayAnalytics.app.categoryFieldValues[ReplayAnalytics.app.currentActivePanelIndex],yField:ReplayAnalytics.app.dataFieldValues[ReplayAnalytics.app.currentActivePanelIndex],axis:"bottom",highlight:true,showInLegend:false,shadow:true,style:{stroke:"rgb(40,40,40)",},subStyle:{fill:["#115fa6","#94ae0a","#a61120","#ff8809","#ffd13e","#a61187","#24ad9a","#7c7474","#a66111"]}}]})},createVerticalBarChartGroupBy:function(a,c,b){ReplayAnalytics.app.newChart[ReplayAnalytics.app.currentActivePanelIndex]=Ext.create("Ext.chart.CartesianChart",{id:"chart"+ReplayAnalytics.app.currentActivePanelIndex,flipXY:false,flex:1,store:a,shadow:true,animate:{duration:ReplayAnalytics.app.animateSpeed,delay:ReplayAnalytics.app.animateSpeed/2,easing:"ease"},legend:{position:"right"},axes:[{type:"numeric",position:"left",style:{strokeStyle:"black",shadowColor:"black",},label:{fontFamily:"Helvetica",color:"#4270A2"},minimum:0,maximum:ReplayAnalytics.app.Ymax[ReplayAnalytics.app.currentActivePanelIndex],title:{text:ReplayAnalytics.app.dataFieldValues[ReplayAnalytics.app.currentActivePanelIndex],strokeStyle:"#4270A2",fillStyle:"#4270A2",shadowColor:"black",},},{type:"category",position:"bottom",label:{fontFamily:"Helvetica",color:"#4270A2"},fields:ReplayAnalytics.app.categoryFieldValues[ReplayAnalytics.app.currentActivePanelIndex],style:{strokeStyle:"black",shadowColor:"black",},title:{text:ReplayAnalytics.app.categoryFieldValues[ReplayAnalytics.app.currentActivePanelIndex],strokeStyle:"#4270A2",fillStyle:"#4270A2",shadowColor:"black",},}],series:[{type:"bar",xField:ReplayAnalytics.app.categoryFieldValues[ReplayAnalytics.app.currentActivePanelIndex],yField:ReplayAnalytics.app.groupByValueBar,title:b,highlight:true,showInLegend:true,stacked:true,shadow:true,style:{stroke:"rgb(40,40,40)",},subStyle:{fill:["#115fa6","#94ae0a","#a61120","#ff8809","#ffd13e","#a61187","#24ad9a","#7c7474","#a66111"]}}]})},});Ext.define("ReplayAnalytics.controller.GlobalSync",{extend:"Ext.app.Controller",xtype:"globalsynccontroller",config:{refs:{loginController:"logincontroller",mainController:"maincontroller",slider0:"slider0",slider1:"slider1",slider2:"slider2",slider3:"slider3",slider4:"slider4",panel1:"panel1",panel2:"panel2",panel3:"panel3",panel4:"panel4",fourPanelLayout:"fourpanellayout",globalSyncButton:"segmentedbutton[id=globalsynctogglebutton]",settingsButton:"button[id=settingsbutton]",globalSettingsButton:"button[id=globalsettingsbutton]",},control:{globalSyncButton:{toggle:"globalSyncToggle"},},},globalSyncToggle:function(c,b,a){this.getApplication().getController("Playback").pauseFunction();if(a==true){this.calculateGlobalSyncVariables();this.getFourPanelLayout().setCls("selected-panel");this.getPanel1().setCls("unselected-panel");this.getPanel2().setCls("unselected-panel");this.getPanel3().setCls("unselected-panel");this.getPanel4().setCls("unselected-panel");this.getSlider4().hide();this.getSlider2().hide();this.getSlider3().hide();this.getSlider1().hide();this.getSlider0().show();ReplayAnalytics.app.currentActivePanelIndex=0;this.getApplication().getController("Main").checkForConfiguredGraphPanels();this.getApplication().getController("Playback").resetBackwardFunction();this.getSettingsButton().setDisabled(true);this.getGlobalSettingsButton().setDisabled(true)}else{this.getSettingsButton().setDisabled(false);this.getGlobalSettingsButton().setDisabled(false);this.getFourPanelLayout().setCls("unselected-panel");this.getPanel1().setCls("selected-panel");this.getPanel2().setCls("unselected-panel");this.getPanel3().setCls("unselected-panel");this.getPanel4().setCls("unselected-panel");this.getSlider0().hide();this.getSlider2().hide();this.getSlider3().hide();this.getSlider4().hide();this.getSlider1().show();ReplayAnalytics.app.currentActivePanelIndex=1}},calculateGlobalSyncVariables:function(){var m=0;for(i=0;i<15;i++){ReplayAnalytics.app.chartLengths[i]=0}var b=0;for(i=0;i<5;i++){ReplayAnalytics.app.chartValue[i]=0}for(i=0;i<5;i++){if(ReplayAnalytics.app.startDate[i]!=undefined){ReplayAnalytics.app.currentStartDate[i]=new Date(ReplayAnalytics.app.startDate[i])}}for(i=0;i<5;i++){ReplayAnalytics.app.chartIsRunning[i]=false;ReplayAnalytics.app.chartIsPaused[i]=false;ReplayAnalytics.app.chartFinished[i]=false;ReplayAnalytics.app.initialPosition[i]=true}ReplayAnalytics.app.numberActiveCharts=0;for(i=1;i<5;i++){if(ReplayAnalytics.app.dateSet[i]==true){ReplayAnalytics.app.numberActiveCharts=ReplayAnalytics.app.numberActiveCharts+1}}ReplayAnalytics.app.chartsFinished=0;ReplayAnalytics.app.globalIndex=0;ReplayAnalytics.app.firstGlobalDate=true;ReplayAnalytics.app.globalSyncPressed=true;ReplayAnalytics.app.nullSearchReturnedTrue=false;ReplayAnalytics.app.finishCall=false;ReplayAnalytics.app.sandwich=false;ReplayAnalytics.app.testNextIncrement=null;var n=new Array();var l=new Array();var e=new Array();var d=new Array();var h=new Array();var a=0;var g=0;var c=new Array();c=ReplayAnalytics.app.valueGranularities;for(i=1;i<5;i++){if(ReplayAnalytics.app.dateSet[i]==true){l[g]=ReplayAnalytics.app.currentStartDate[i].getTime();n[g]=i;e[g]=ReplayAnalytics.app.currentEndDate[i].getTime();g=g+1}}for(i=0;i<g;i++){if(g==0){}else{if(g==1){ReplayAnalytics.app.globalStartDate=l[i];d[0]=n[i]}else{if(g==2){if(l[i]<=l[(i+1)%g]){ReplayAnalytics.app.globalStartDate=l[i];d[0]=n[i];if(l[i]==l[(i+1)%g]){d[1]=n[(i+1)%g]}}if(e[i]>=e[(i+1)%g]){ReplayAnalytics.app.globalEndDate=e[i]}}else{if(g==3){if(l[i]<=l[(i+1)%g]&&l[i]<=l[(i+2)%g]){ReplayAnalytics.app.globalStartDate=l[i];d[0]=n[i];if(l[i]==l[(i+1)%g]&&l[i]!=l[(i+2)%g]){d[1]=n[(i+1)%g]}else{if(l[i]==l[(i+2)%g]&&l[i]!=l[(i+1)%g]){d[1]=n[(i+2)%g]}else{if(l[i]==l[(i+1)%g]&&l[i]==l[(i+2)%g]){d[1]=n[(i+1)%g];d[2]=n[(i+2)%g]}}}}if(e[i]>=e[(i+1)%g]&&e[i]>=e[(i+2)%g]){ReplayAnalytics.app.globalEndDate=e[i]}}else{if(l[i]<=l[(i+1)%g]&&l[i]<=l[(i+2)%g]&&l[i]<=l[(i+3)%g]){ReplayAnalytics.app.globalStartDate=l[i];d[0]=n[i];if(l[i]==l[(i+1)%g]&&l[i]!=l[(i+2)%g]&&l[i]!=l[(i+3)%g]){d[1]=n[(i+1)%g]}else{if(l[i]==l[(i+2)%g]&&l[i]!=l[(i+1)%g]&&l[i]!=l[(i+3)%g]){d[1]=n[(i+2)%g]}else{if(l[i]==l[(i+3)%g]&&l[i]!=l[(i+1)%g]&&l[i]!=l[(i+2)%g]){d[1]=n[(i+3)%g]}else{if(l[i]==l[(i+1)%g]&&l[i]==l[(i+2)%g]&&l[i]!=l[(i+3)%g]){d[1]=n[(i+1)%g];d[2]=n[(i+2)%g]}else{if(l[i]==l[(i+1)%g]&&l[i]!=l[(i+2)%g]&&l[i]==l[(i+3)%g]){d[1]=n[(i+1)%g];d[2]=n[(i+3)%g]}else{if(l[i]!=l[(i+1)%g]&&l[i]==l[(i+2)%g]&&l[i]==l[(i+3)%g]){d[1]=n[(i+2)%g];d[2]=n[(i+3)%g]}else{if(l[i]==l[(i+1)%g]&&l[i]==l[(i+2)%g]&&l[i]==l[(i+3)%g]){d[1]=n[(i+1)%g];d[2]=n[(i+2)%g];d[3]=n[(i+3)%g]}}}}}}}}if(e[i]>=e[(i+1)%g]&&e[i]>=e[(i+2)%g]&&e[i]>=e[(i+3)%g]){ReplayAnalytics.app.globalEndDate=e[i]}}}}}}for(i=0;i<d.length;i++){if(d.length==0){}else{if(d.length==1){h[0]=d[0]}else{if(d.length==2){if(c[d[i]]>=c[d[(i+1)%d.length]]){h[0]=d[i];if(c[d[i]]==c[d[(i+1)%d.length]]){h[1]=d[(i+1)%d.length]}}}else{if(d.length==3){if(c[d[i]]>=c[d[(i+1)%d.length]]&&c[d[i]]>=c[d[(i+2)%d.length]]){h[0]=d[i];if(c[d[i]]==c[d[(i+1)%d.length]]&&c[d[i]]!=c[d[(i+2)%d.length]]){h[1]=d[(i+1)%d.length]}else{if(c[d[i]]!=c[d[(i+1)%d.length]]&&c[d[i]]==c[d[(i+2)%d.length]]){h[1]=d[(i+2)%d.length]}else{if(c[d[i]]==c[d[(i+1)%d.length]]&&c[d[i]]==c[d[(i+2)%d.length]]){h[1]=d[(i+1)%d.length];h[2]=d[(i+2)%d.length]}}}}}else{if(c[d[i]]>=c[d[(i+1)%d.length]]&&c[d[i]]>=c[d[(i+2)%d.length]]&&c[d[i]]>=c[d[(i+3)%d.length]]){h[0]=d[i];if(c[d[i]]==c[d[(i+1)%d.length]]&&c[d[i]]!=c[d[(i+2)%d.length]]&&c[d[i]]!=c[d[(i+3)%d.length]]){h[1]=d[(i+1)%d.length]}else{if(c[d[i]]!=c[d[(i+1)%d.length]]&&c[d[i]]==c[d[(i+2)%d.length]]&&c[d[i]]!=c[d[(i+3)%d.length]]){h[1]=d[(i+2)%d.length]}else{if(c[d[i]]!=c[d[(i+1)%d.length]]&&c[d[i]]!=c[d[(i+2)%d.length]]&&c[d[i]]==c[d[(i+3)%d.length]]){h[1]=d[(i+3)%d.length]}else{if(c[d[i]]==c[d[(i+1)%d.length]]&&c[d[i]]==c[d[(i+2)%d.length]]&&c[d[i]]!=c[d[(i+3)%d.length]]){h[1]=d[(i+1)%d.length];h[2]=d[(i+2)%d.length]}else{if(c[d[i]]==c[d[(i+1)%d.length]]&&c[d[i]]!=c[d[(i+2)%d.length]]&&c[d[i]]==c[d[(i+3)%d.length]]){h[1]=d[(i+1)%d.length];h[2]=d[(i+3)%d.length]}else{if(c[d[i]]!=c[d[(i+1)%d.length]]&&c[d[i]]==c[d[(i+2)%d.length]]&&c[d[i]]==c[d[(i+3)%d.length]]){h[1]=d[(i+2)%d.length];h[2]=d[(i+3)%d.length]}else{if(c[d[i]]==c[d[(i+1)%d.length]]&&c[d[i]]==c[d[(i+2)%d.length]]&&c[d[i]]==c[d[(i+3)%d.length]]){h[2]=d[(i+2)%d.length];h[3]=d[(i+3)%d.length];h[1]=d[(i+1)%d.length]}}}}}}}}}}}}}for(i=0;i<h.length;i++){ReplayAnalytics.app.chartIsRunning[h[i]]=true;ReplayAnalytics.app.initialPosition[h[i]]=false}this.globalSync();var f=0;for(i=0;i<ReplayAnalytics.app.chartSection.length;i++){if(!isNaN(ReplayAnalytics.app.chartLengths[i])){f=f+ReplayAnalytics.app.chartLengths[i]}}ReplayAnalytics.app.differentialMultiplier[m]=1;Ext.ComponentQuery.query("slider"+m)[0].setMaxValue(ReplayAnalytics.app.differentialMultiplier[m]*f);ReplayAnalytics.app.maximumPositions[m]=Ext.ComponentQuery.query("slider"+m)[0].getMaxValue();hideLoadingMask();ReplayAnalytics.app.testcount=ReplayAnalytics.app.testcount+1;logMessage("chartIndex in global end "+m);this.calculateGlobalSyncChartPositionsMap()},globalSyncSliderFunctionChange:function(b,a){this.playChartsGlobal(b)},globalSync:function(){var a=0;while(ReplayAnalytics.app.chartsFinished!=ReplayAnalytics.app.numberActiveCharts&&a<100){var e=false;var d=1;while(d<5){if(ReplayAnalytics.app.currentStartDate[d]<=ReplayAnalytics.app.currentEndDate[d]){if(ReplayAnalytics.app.chartIsRunning[d]==true&&ReplayAnalytics.app.chartIsPaused[d]!=true){previousDate=new Date(ReplayAnalytics.app.currentStartDate[d]);switch(ReplayAnalytics.app.granularities[d]){case"Hourly":ReplayAnalytics.app.currentStartDate[d].setMinutes(ReplayAnalytics.app.currentStartDate[d].getMinutes()+60);break;case"Daily":ReplayAnalytics.app.currentStartDate[d].setDate(ReplayAnalytics.app.currentStartDate[d].getDate()+1);break;case"Weekly":ReplayAnalytics.app.currentStartDate[d].setDate(ReplayAnalytics.app.currentStartDate[d].getDate()+7);break;case"Monthly":ReplayAnalytics.app.currentStartDate[d].setMonth(ReplayAnalytics.app.currentStartDate[d].getMonth()+1);ReplayAnalytics.app.currentStartDate[d].setDate(1);break}var g;if(ReplayAnalytics.app.chartFinished[d]!=true&&ReplayAnalytics.app.currentStartDate[d].getTime()>ReplayAnalytics.app.currentEndDate[d].getTime()){ReplayAnalytics.app.chartFinished[d]=true;ReplayAnalytics.app.chartsFinished=ReplayAnalytics.app.chartsFinished+1;if(ReplayAnalytics.app.chartsFinished==ReplayAnalytics.app.numberActiveCharts){var f=new Array();var c=0;for(d=1;d<5;d++){if(ReplayAnalytics.app.chartIsRunning[d]==true&&ReplayAnalytics.app.chartIsPaused[d]!=true){f[c]=d;c=c+1;ReplayAnalytics.app.chartIsPaused[d]=true}}ReplayAnalytics.app.chartSection[ReplayAnalytics.app.globalIndex]=f;ReplayAnalytics.app.chartLengths[ReplayAnalytics.app.globalIndex]=ReplayAnalytics.app.chartLengths[ReplayAnalytics.app.globalIndex]-1;return}var f=new Array();var c=0;for(var b=1;b<5;b++){if(ReplayAnalytics.app.chartIsRunning[b]==true&&ReplayAnalytics.app.chartIsPaused[b]!=true){f[c]=b;c=c+1;ReplayAnalytics.app.chartIsPaused[b]=true}}if(this.nullSearch(ReplayAnalytics.app.currentStartDate[d],previousDate)==true){ReplayAnalytics.app.nullSearchReturnedTrue=true}ReplayAnalytics.app.chartSection[ReplayAnalytics.app.globalIndex]=f;ReplayAnalytics.app.globalIndex=ReplayAnalytics.app.globalIndex+1;ReplayAnalytics.app.finishCall=true;this.globalSyncLogic(ReplayAnalytics.app.globalEndDate,previousDate,d)}if(e==false){g=this.globalSyncLogic(ReplayAnalytics.app.currentStartDate[d],previousDate,d);if(g!=true){e=true}}}}else{if(ReplayAnalytics.app.currentStartDate[d]==undefined){}else{if(ReplayAnalytics.app.chartFinished[d]!=true&&ReplayAnalytics.app.currentStartDate[d].getTime()>ReplayAnalytics.app.currentEndDate[d].getTime()){ReplayAnalytics.app.chartFinished[d]=true;ReplayAnalytics.app.chartsFinished=ReplayAnalytics.app.chartsFinished+1;if(ReplayAnalytics.app.chartsFinished==ReplayAnalytics.app.numberActiveCharts){var f=new Array();var c=0;for(d=1;d<5;d++){if(ReplayAnalytics.app.chartIsRunning[d]==true&&ReplayAnalytics.app.chartIsPaused[d]!=true){f[c]=d;c=c+1;ReplayAnalytics.app.chartIsPaused[d]=true}}ReplayAnalytics.app.chartSection[ReplayAnalytics.app.globalIndex]=f;ReplayAnalytics.app.chartLengths[ReplayAnalytics.app.globalIndex]=ReplayAnalytics.app.chartLengths[ReplayAnalytics.app.globalIndex]-1;return}var f=new Array();var c=0;for(ii=1;ii<5;ii++){if(ReplayAnalytics.app.chartIsRunning[ii]==true&&ReplayAnalytics.app.chartIsPaused[ii]!=true){f[c]=ii;c=c+1;ReplayAnalytics.app.chartIsPaused[ii]=true}}ReplayAnalytics.app.chartSection[ReplayAnalytics.app.globalIndex]=f;ReplayAnalytics.app.chartLengths[ReplayAnalytics.app.globalIndex]=ReplayAnalytics.app.chartLengths[ReplayAnalytics.app.globalIndex]-1;ReplayAnalytics.app.globalIndex=ReplayAnalytics.app.globalIndex+1;ReplayAnalytics.app.finishCall=true;this.globalSyncLogic(ReplayAnalytics.app.globalEndDate,ReplayAnalytics.app.currentStartDate[d],d)}}}d++}a=a+1}var c=0;for(d=1;d<5;d++){if(ReplayAnalytics.app.chartIsRunning[d]==true&&ReplayAnalytics.app.chartIsPaused[d]!=true){f[c]=d;c=c+1;ReplayAnalytics.app.chartIsPaused[d]=true}}ReplayAnalytics.app.chartSection[ReplayAnalytics.app.globalIndex]=f;return},globalSyncLogic:function(o,s,f){var e=new Array();var v=new Array();var m=new Array();var l=new Array();var q=false;var d=false;var a=false;var c=new Array();var g=0;var p=new Array();p=ReplayAnalytics.app.valueGranularities;for(i=1;i<5;i++){if(ReplayAnalytics.app.dateSet[i]==true&&(ReplayAnalytics.app.chartIsRunning[i]==false||ReplayAnalytics.app.chartIsPaused[i]==true)&&ReplayAnalytics.app.chartFinished[i]==false&&ReplayAnalytics.app.currentStartDate[i]<o&&ReplayAnalytics.app.currentStartDate[i]>=s){e[g]=ReplayAnalytics.app.currentStartDate[i].getTime();l[g]=i;g=g+1;q=true}}if(q==false){ReplayAnalytics.app.chartLengths[ReplayAnalytics.app.globalIndex]=ReplayAnalytics.app.chartLengths[ReplayAnalytics.app.globalIndex]+1;return false}for(i=0;i<g;i++){if(g==0){}else{if(g==1){v[0]=l[i]}else{if(g==2){if(e[i]<=e[(i+1)%g]){v[0]=l[i];if(e[i]==e[(i+1)%g]){v[1]=l[(i+1)%g]}}}else{if(g==3){if(e[i]<=e[(i+1)%g]&&e[i]<=e[(i+2)%g]){v[0]=l[i];if(e[i]==e[(i+1)%g]&&e[i]!=e[(i+2)%g]){v[1]=l[(i+1)%g]}else{if(e[i]==e[(i+2)%g]&&e[i]!=e[(i+1)%g]){v[1]=l[(i+2)%g]}else{if(e[i]==e[(i+1)%g]&&e[i]==e[(i+2)%g]){v[1]=l[(i+1)%g];v[2]=l[(i+2)%g]}}}}}else{if(e[i]<=e[(i+1)%g]&&e[i]<=e[(i+2)%g]&&e[i]<=e[(i+3)%g]){v[0]=l[i];if(e[i]==e[(i+1)%g]&&e[i]!=e[(i+2)%g]&&e[i]!=e[(i+3)%g]){v[1]=l[(i+1)%g]}else{if(e[i]==e[(i+2)%g]&&e[i]!=e[(i+1)%g]&&e[i]!=e[(i+3)%g]){v[1]=l[(i+2)%g]}else{if(e[i]==e[(i+3)%g]&&e[i]!=e[(i+1)%g]&&e[i]!=e[(i+2)%g]){v[1]=l[(i+3)%g]}else{if(e[i]==e[(i+1)%g]&&e[i]==e[(i+2)%g]&&e[i]!=e[(i+3)%g]){v[1]=l[(i+1)%g];v[2]=l[(i+2)%g]}else{if(e[i]==e[(i+1)%g]&&e[i]!=e[(i+2)%g]&&e[i]==e[(i+3)%g]){v[1]=l[(i+1)%g];v[2]=l[(i+3)%g]}else{if(e[i]!=e[(i+1)%g]&&e[i]==e[(i+2)%g]&&e[i]==e[(i+3)%g]){v[1]=l[(i+2)%g];v[2]=l[(i+3)%g]}else{if(e[i]==e[(i+1)%g]&&e[i]==e[(i+2)%g]&&e[i]==e[(i+3)%g]){v[1]=l[(i+1)%g];v[2]=l[(i+2)%g];v[3]=l[(i+3)%g]}}}}}}}}}}}}}for(i=0;i<v.length;i++){if(v.length==0){}else{if(v.length==1){m[0]=v[0]}else{if(v.length==2){if(p[v[i]]>=p[v[(i+1)%v.length]]){m[0]=v[i];if(p[v[i]]==p[v[(i+1)%v.length]]){m[1]=v[(i+1)%v.length]}}}else{if(v.length==3){if(p[v[i]]>=p[v[(i+1)%v.length]]&&p[v[i]]>=p[v[(i+2)%v.length]]){m[0]=v[i];if(p[v[i]]==p[v[(i+1)%v.length]]&&p[v[i]]!=p[v[(i+2)%v.length]]){m[1]=v[(i+1)%v.length]}else{if(p[v[i]]!=p[v[(i+1)%v.length]]&&p[v[i]]==p[v[(i+2)%v.length]]){m[1]=v[(i+2)%v.length]}else{if(p[v[i]]==p[v[(i+1)%v.length]]&&p[v[i]]==p[v[(i+2)%v.length]]){m[1]=v[(i+1)%v.length];m[2]=v[(i+2)%v.length]}}}}}else{if(p[v[i]]>=p[v[(i+1)%v.length]]&&p[v[i]]>=p[v[(i+2)%v.length]]&&p[v[i]]>=p[v[(i+3)%v.length]]){m[0]=v[i];if(p[v[i]]==p[v[(i+1)%v.length]]&&p[v[i]]!=p[v[(i+2)%v.length]]&&p[v[i]]!=p[v[(i+3)%v.length]]){m[1]=v[(i+1)%v.length]}else{if(p[v[i]]!=p[v[(i+1)%v.length]]&&p[v[i]]==p[v[(i+2)%v.length]]&&p[v[i]]!=p[v[(i+3)%v.length]]){m[1]=v[(i+2)%v.length]}else{if(p[v[i]]!=p[v[(i+1)%v.length]]&&p[v[i]]!=p[v[(i+2)%v.length]]&&p[v[i]]==p[v[(i+3)%v.length]]){m[1]=v[(i+3)%v.length]}else{if(p[v[i]]==p[v[(i+1)%v.length]]&&p[v[i]]==p[v[(i+2)%v.length]]&&p[v[i]]!=p[v[(i+3)%v.length]]){m[1]=v[(i+1)%v.length];m[2]=v[(i+2)%v.length]}else{if(p[v[i]]==p[v[(i+1)%v.length]]&&p[v[i]]!=p[v[(i+2)%v.length]]&&p[v[i]]==p[v[(i+3)%v.length]]){m[1]=v[(i+1)%v.length];m[2]=v[(i+3)%v.length]}else{if(p[v[i]]!=p[v[(i+1)%v.length]]&&p[v[i]]==p[v[(i+2)%v.length]]&&p[v[i]]==p[v[(i+3)%v.length]]){m[1]=v[(i+2)%v.length];m[2]=v[(i+3)%v.length]}else{if(p[v[i]]==p[v[(i+1)%v.length]]&&p[v[i]]==p[v[(i+2)%v.length]]&&p[v[i]]==p[v[(i+3)%v.length]]){m[2]=v[(i+2)%v.length];m[3]=v[(i+3)%v.length];m[1]=v[(i+1)%v.length]}}}}}}}}}}}}}var h=false;if(ReplayAnalytics.app.finishCall==true&&p[f]<p[m[0]]&&m[0]<f&&ReplayAnalytics.app.chartsFinished==ReplayAnalytics.app.numberActiveCharts-1){ReplayAnalytics.app.chartLengths[ReplayAnalytics.app.globalIndex]=ReplayAnalytics.app.chartLengths[ReplayAnalytics.app.globalIndex]+1}if(ReplayAnalytics.app.finishCall==true&&p[f]<p[m[0]]&&m[0]>f&&ReplayAnalytics.app.chartsFinished==ReplayAnalytics.app.numberActiveCharts-1){ReplayAnalytics.app.chartLengths[ReplayAnalytics.app.globalIndex]=ReplayAnalytics.app.chartLengths[ReplayAnalytics.app.globalIndex]+2}if(ReplayAnalytics.app.finishCall==true&&ReplayAnalytics.app.chartSection[ReplayAnalytics.app.globalIndex-1].length<2){for(iii=0;iii<m.length;iii++){c[iii]=m[iii]}}var w=0;var t=0;if(ReplayAnalytics.app.finishCall==true&&ReplayAnalytics.app.chartsFinished<ReplayAnalytics.app.numberActiveCharts-1){if(ReplayAnalytics.app.chartSection[ReplayAnalytics.app.globalIndex-1].length>1){for(u=0;u<m.length;u++){for(uu=0;uu<ReplayAnalytics.app.chartSection[ReplayAnalytics.app.globalIndex-1].length;uu++){if(m[u]==ReplayAnalytics.app.chartSection[ReplayAnalytics.app.globalIndex-1][uu]&&m[u]<f){w=w+1}else{if(m[u]==ReplayAnalytics.app.chartSection[ReplayAnalytics.app.globalIndex-1][uu]&&m[u]>f){t=t+1}}}}}}if(ReplayAnalytics.app.finishCall==true&&ReplayAnalytics.app.chartsFinished<ReplayAnalytics.app.numberActiveCharts-1&&m[0]<f&&ReplayAnalytics.app.initialPosition[m[0]]==true){ReplayAnalytics.app.chartLengths[ReplayAnalytics.app.globalIndex]=ReplayAnalytics.app.chartLengths[ReplayAnalytics.app.globalIndex]-1}if(w!=0){ReplayAnalytics.app.chartLengths[ReplayAnalytics.app.globalIndex-1]=ReplayAnalytics.app.chartLengths[ReplayAnalytics.app.globalIndex-1]-1;ReplayAnalytics.app.chartLengths[ReplayAnalytics.app.globalIndex]=ReplayAnalytics.app.chartLengths[ReplayAnalytics.app.globalIndex]+1;for(iii=0;iii<m.length;iii++){c[iii]=m[iii]}}if(t!=0){for(iii=0;iii<m.length;iii++){c[iii]=m[iii]}}if(ReplayAnalytics.app.finishCall==true&&ReplayAnalytics.app.firstGlobalDate!=true&&ReplayAnalytics.app.chartSection[ReplayAnalytics.app.globalIndex-1].length>1&&ReplayAnalytics.app.chartsFinished==ReplayAnalytics.app.numberActiveCharts-1){ReplayAnalytics.app.chartLengths[ReplayAnalytics.app.globalIndex]=ReplayAnalytics.app.chartLengths[ReplayAnalytics.app.globalIndex]+1;for(iii=0;iii<m.length;iii++){c[iii]=m[iii]}}else{if(ReplayAnalytics.app.finishCall==true&&ReplayAnalytics.app.firstGlobalDate==true&&m[0]>f&&ReplayAnalytics.app.chartSection[ReplayAnalytics.app.globalIndex-1].length>1&&ReplayAnalytics.app.chartsFinished==ReplayAnalytics.app.numberActiveCharts-1){for(iii=0;iii<m.length;iii++){c[iii]=m[iii]}}else{if(ReplayAnalytics.app.finishCall==true&&ReplayAnalytics.app.firstGlobalDate==true&&m[0]<f&&ReplayAnalytics.app.chartSection[ReplayAnalytics.app.globalIndex-1].length>1&&ReplayAnalytics.app.chartsFinished==ReplayAnalytics.app.numberActiveCharts-1){ReplayAnalytics.app.chartLengths[ReplayAnalytics.app.globalIndex-1]=ReplayAnalytics.app.chartLengths[ReplayAnalytics.app.globalIndex-1]-1;ReplayAnalytics.app.chartLengths[ReplayAnalytics.app.globalIndex]=ReplayAnalytics.app.chartLengths[ReplayAnalytics.app.globalIndex]+2;for(iii=0;iii<m.length;iii++){c[iii]=m[iii]}}}}var r=0;var n=0;if(ReplayAnalytics.app.finishCall==false){for(i=1;i<5;i++){if(ReplayAnalytics.app.chartIsRunning[i]==true&&ReplayAnalytics.app.chartIsPaused[i]!=true){c[n]=i;n=n+1;ReplayAnalytics.app.chartIsPaused[i]=true}}}if(n==2){switch(ReplayAnalytics.app.granularities[c[1]]){case"Hourly":ReplayAnalytics.app.currentStartDate[c[1]].setMinutes(ReplayAnalytics.app.currentStartDate[c[1]].getMinutes()+60);break;case"Daily":ReplayAnalytics.app.currentStartDate[c[1]].setDate(ReplayAnalytics.app.currentStartDate[c[1]].getDate()+1);break;case"Weekly":ReplayAnalytics.app.currentStartDate[c[1]].setDate(ReplayAnalytics.app.currentStartDate[c[1]].getDate()+7);break;case"Monthly":ReplayAnalytics.app.currentStartDate[c[1]].setDate(1);ReplayAnalytics.app.currentStartDate[c[1]].setMonth(ReplayAnalytics.app.currentStartDate[c[1]].getMonth()+1);break}if(ReplayAnalytics.app.chartFinished[c[1]]!=true&&ReplayAnalytics.app.currentStartDate[c[1]].getTime()>ReplayAnalytics.app.currentEndDate[c[1]].getTime()){ReplayAnalytics.app.chartFinished[c[1]]=true;ReplayAnalytics.app.chartsFinished=ReplayAnalytics.app.chartsFinished+1}}else{if(n==3){switch(ReplayAnalytics.app.granularities[c[1]]){case"Hourly":ReplayAnalytics.app.currentStartDate[c[1]].setMinutes(ReplayAnalytics.app.currentStartDate[c[1]].getMinutes()+60);break;case"Daily":ReplayAnalytics.app.currentStartDate[c[1]].setDate(ReplayAnalytics.app.currentStartDate[c[1]].getDate()+1);break;case"Weekly":ReplayAnalytics.app.currentStartDate[c[1]].setDate(ReplayAnalytics.app.currentStartDate[c[1]].getDate()+7);break;case"Monthly":ReplayAnalytics.app.currentStartDate[c[1]].setDate(1);ReplayAnalytics.app.currentStartDate[c[1]].setMonth(ReplayAnalytics.app.currentStartDate[c[1]].getMonth()+1);break}if(ReplayAnalytics.app.chartFinished[c[1]]!=true&&ReplayAnalytics.app.currentStartDate[c[1]].getTime()>ReplayAnalytics.app.currentEndDate[c[1]].getTime()){ReplayAnalytics.app.chartFinished[c[1]]=true;ReplayAnalytics.app.chartsFinished=ReplayAnalytics.app.chartsFinished+1}switch(ReplayAnalytics.app.granularities[c[2]]){case"Hourly":ReplayAnalytics.app.currentStartDate[c[2]].setMinutes(ReplayAnalytics.app.currentStartDate[c[2]].getMinutes()+60);break;case"Daily":ReplayAnalytics.app.currentStartDate[c[2]].setDate(ReplayAnalytics.app.currentStartDate[c[2]].getDate()+1);break;case"Weekly":ReplayAnalytics.app.currentStartDate[c[2]].setDate(ReplayAnalytics.app.currentStartDate[c[2]].getDate()+7);break;case"Monthly":ReplayAnalytics.app.currentStartDate[c[2]].setDate(1);ReplayAnalytics.app.currentStartDate[c[2]].setMonth(ReplayAnalytics.app.currentStartDate[c[2]].getMonth()+1);break}if(ReplayAnalytics.app.chartFinished[c[2]]!=true&&ReplayAnalytics.app.currentStartDate[c[2]].getTime()>ReplayAnalytics.app.currentEndDate[c[2]].getTime()){ReplayAnalytics.app.chartFinished[c[2]]=true;ReplayAnalytics.app.chartsFinished=ReplayAnalytics.app.chartsFinished+1}}}if(ReplayAnalytics.app.chartLengths[ReplayAnalytics.app.globalIndex]!=0){for(ii=0;ii<m.length;ii++){if(ReplayAnalytics.app.currentStartDate[f]>ReplayAnalytics.app.currentEndDate[m[ii]]){}}if(r!=0){ReplayAnalytics.app.chartLengths[ReplayAnalytics.app.globalIndex+1]=ReplayAnalytics.app.chartLengths[ReplayAnalytics.app.globalIndex+1]+1}ReplayAnalytics.app.chartSection[ReplayAnalytics.app.globalIndex]=c;if(ReplayAnalytics.app.chartSection[ReplayAnalytics.app.globalIndex].length>1){for(i=0;i<ReplayAnalytics.app.chartSection[ReplayAnalytics.app.globalIndex].length;i++){if(ReplayAnalytics.app.currentEndDate[ReplayAnalytics.app.chartSection[ReplayAnalytics.app.globalIndex][0]]>ReplayAnalytics.app.currentEndDate[ReplayAnalytics.app.chartSection[ReplayAnalytics.app.globalIndex][(i+1)]]){d=true}}}if(d==true){if(r!=0){ReplayAnalytics.app.chartLengths[ReplayAnalytics.app.globalIndex]=ReplayAnalytics.app.chartLengths[ReplayAnalytics.app.globalIndex]-1}}ReplayAnalytics.app.globalIndex=ReplayAnalytics.app.globalIndex+1}var b=0;for(i=0;i<m.length;i++){if(ReplayAnalytics.app.currentStartDate[m[i]].getTime()==s.getTime()&&p[m[i]]==p[f]&&ReplayAnalytics.app.currentStartDate[f]<=ReplayAnalytics.app.currentEndDate[f]){if(ReplayAnalytics.app.currentEndDate[f]>ReplayAnalytics.app.currentEndDate[m[i]]){ReplayAnalytics.app.sandwich=true}b=b+1;ReplayAnalytics.app.chartIsPaused[f]=false;if(m[i]<f){switch(ReplayAnalytics.app.granularities[m[i]]){case"Hourly":ReplayAnalytics.app.currentStartDate[m[i]].setMinutes(ReplayAnalytics.app.currentStartDate[m[i]].getMinutes()+60);break;case"Daily":ReplayAnalytics.app.currentStartDate[m[i]].setDate(ReplayAnalytics.app.currentStartDate[m[i]].getDate()+1);break;case"Weekly":ReplayAnalytics.app.currentStartDate[m[i]].setDate(ReplayAnalytics.app.currentStartDate[m[i]].getDate()+7);break;case"Monthly":ReplayAnalytics.app.currentStartDate[m[i]].setDate(1);ReplayAnalytics.app.currentStartDate[m[i]].setMonth(ReplayAnalytics.app.currentStartDate[m[i]].getMonth()+1);break}}}}if(b!=0){ReplayAnalytics.app.chartLengths[ReplayAnalytics.app.globalIndex]=ReplayAnalytics.app.chartLengths[ReplayAnalytics.app.globalIndex]+1}if(p[f]<p[m[0]]&&ReplayAnalytics.app.chartFinished[f]!=true&&ReplayAnalytics.app.initialPosition[m[0]]==false){ReplayAnalytics.app.chartLengths[ReplayAnalytics.app.globalIndex]=ReplayAnalytics.app.chartLengths[ReplayAnalytics.app.globalIndex]+1}if(p[f]>p[m[0]]&&ReplayAnalytics.app.chartFinished[f]!=true&&ReplayAnalytics.app.initialPosition[m[0]]==false){ReplayAnalytics.app.chartLengths[ReplayAnalytics.app.globalIndex]=ReplayAnalytics.app.chartLengths[ReplayAnalytics.app.globalIndex]+1}for(i=0;i<m.length;i++){ReplayAnalytics.app.chartIsRunning[m[i]]=true;ReplayAnalytics.app.chartIsPaused[m[i]]=false;ReplayAnalytics.app.initialPosition[m[i]]=false}ReplayAnalytics.app.firstGlobalDate=false;if(b!=0){return false}ReplayAnalytics.app.nullSearchReturnedTrue=false;ReplayAnalytics.app.finishCall=false;return true},nullSearch:function(a,c){var b=false;for(i=1;i<5;i++){if(ReplayAnalytics.app.dateSet[i]==true&&(ReplayAnalytics.app.chartIsRunning[i]==false||ReplayAnalytics.app.chartIsPaused[i]==true)&&ReplayAnalytics.app.chartFinished[i]==false&&ReplayAnalytics.app.currentStartDate[i]<a&&ReplayAnalytics.app.currentStartDate[i]>=c){b=true}}if(b==false){return false}else{return true}},playChartsGlobal:function(a){for(i=1;i<5;i++){chartPos=ReplayAnalytics.app.globalSyncChartPositions[a][i];if(chartPos!=undefined&&ReplayAnalytics.app.isChartConfigured[i]){this.getApplication().getController("Playback").setPanelDateCaption(i,chartPos);ReplayAnalytics.app.newChart[i].bindStore(ReplayAnalytics.app.jsonstore[i][chartPos])}}if(ReplayAnalytics.app.interestingMoments=="On"){playbackController.getApplication().getController("InterestingMoment").checkForInterestingMoment(0,a)}},calculateGlobalSyncChartPositionsMap:function(){this.getApplication().getController("Main").checkForConfiguredGraphPanels();var c=ReplayAnalytics.app.maximumPositions[0];ReplayAnalytics.app.globalSyncChartPositions=new Array();for(i=0;i<=c;i++){ReplayAnalytics.app.globalSyncChartPositions[i]=new Array();for(j=0;j<5;j++){ReplayAnalytics.app.globalSyncChartPositions[i][j]=0}}for(var b=1;b<=c;b++){if(b<=ReplayAnalytics.app.chartLengths[0]){for(j=0;j<ReplayAnalytics.app.chartSection[0].length;j++){ReplayAnalytics.app.chartValue[ReplayAnalytics.app.chartSection[0][j]]=ReplayAnalytics.app.chartValue[ReplayAnalytics.app.chartSection[0][j]]+1;for(k=0;k<5;k++){if(ReplayAnalytics.app.globalSyncChartPositions[b][k]==0){ReplayAnalytics.app.globalSyncChartPositions[b][k]=ReplayAnalytics.app.globalSyncChartPositions[b-1][k]}}ReplayAnalytics.app.globalSyncChartPositions[b][ReplayAnalytics.app.chartSection[0][j]]=ReplayAnalytics.app.chartValue[ReplayAnalytics.app.chartSection[0][j]]}continue}var a=0;for(i=0;i<ReplayAnalytics.app.chartSection.length-1;i++){a=a+ReplayAnalytics.app.chartLengths[i];if(b>a&&b<=(ReplayAnalytics.app.chartLengths[i+1]+a)){for(j=0;j<ReplayAnalytics.app.chartSection[i+1].length;j++){ReplayAnalytics.app.chartValue[ReplayAnalytics.app.chartSection[i+1][j]]=ReplayAnalytics.app.chartValue[ReplayAnalytics.app.chartSection[i+1][j]]+1;for(k=0;k<5;k++){if(ReplayAnalytics.app.globalSyncChartPositions[b][k]==0){ReplayAnalytics.app.globalSyncChartPositions[b][k]=ReplayAnalytics.app.globalSyncChartPositions[b-1][k]}}ReplayAnalytics.app.globalSyncChartPositions[b][ReplayAnalytics.app.chartSection[i+1][j]]=ReplayAnalytics.app.chartValue[ReplayAnalytics.app.chartSection[i+1][j]]}continue}}}this.calculateIMsForGlobalSync()},calculateIMsForGlobalSync:function(){var b=ReplayAnalytics.app.maximumPositions[0];ReplayAnalytics.app.interestingMomentsPoints[0]=new Array();for(i=0;i<=b;i++){ReplayAnalytics.app.interestingMomentsPoints[0][i]=new Array();for(j=1;j<5;j++){ReplayAnalytics.app.interestingMomentsPoints[0][i][j]=new Array();if(ReplayAnalytics.app.isChartConfigured[j]&&ReplayAnalytics.app.interestingMomentsPoints[j]!=undefined){for(k=0;k<ReplayAnalytics.app.interestingMomentsPoints[j].length;k++){if(ReplayAnalytics.app.interestingMomentsPoints[j][k]!=undefined&&ReplayAnalytics.app.interestingMomentsPoints[j][k].Index==ReplayAnalytics.app.globalSyncChartPositions[i][j]){ReplayAnalytics.app.interestingMomentsPoints[0][i][j].push(ReplayAnalytics.app.interestingMomentsPoints[j][k])}}}}}ReplayAnalytics.app.globalManualIMs=new Array();if(ReplayAnalytics.app.currentDashboard!=undefined){for(i=0;i<=b;i++){ReplayAnalytics.app.globalManualIMs[i]=new Array();var a=undefined;for(j=1;j<5;j++){ReplayAnalytics.app.globalManualIMs[i][j]=new Array();switch(j){case 1:a=ReplayAnalytics.app.currentDashboard.panel1Settings.manualIMs;break;case 2:a=ReplayAnalytics.app.currentDashboard.panel2Settings.manualIMs;break;case 3:a=ReplayAnalytics.app.currentDashboard.panel3Settings.manualIMs;break;case 4:a=ReplayAnalytics.app.currentDashboard.panel4Settings.manualIMs;break}if(a!=undefined&&a.length>0){for(k=0;k<a.length;k++){if(i!=0&&ReplayAnalytics.app.globalSyncChartPositions[i][j]!=ReplayAnalytics.app.globalSyncChartPositions[i-1][j]){if(a[k].imIndex==ReplayAnalytics.app.globalSyncChartPositions[i][j]){if(a[k].imIndex!=0||ReplayAnalytics.app.globalSyncChartPositions[i][j]!=ReplayAnalytics.app.globalSyncChartPositions[i+1][j]){ReplayAnalytics.app.globalManualIMs[i][j].push(a[k])}}}else{if(a[k].imIndex==ReplayAnalytics.app.globalSyncChartPositions[i][j]&&ReplayAnalytics.app.globalSyncChartPositions[i][j]!=ReplayAnalytics.app.globalSyncChartPositions[i+1][j]){ReplayAnalytics.app.globalManualIMs[i][j].push(a[k])}}}}}}}},});var settingsController;Ext.define("ReplayAnalytics.controller.Settings",{extend:"Ext.app.Controller",xtype:"settingscontroller",config:{refs:{loginController:"logincontroller",mainController:"maincontroller",fourPanelLayout:"fourpanellayout",settingsPanel:"settingspanel",globalSettingsPanel:"globalsettingspanel",settingsButton:"button[id=settingsbutton]",globalSettingsButton:"button[id=globalsettingsbutton]",databaseSetting:"selectfield[id=databaseselectfield]",graphTitleSetting:"textfield[label=Graph Title:]",xAxisSetting:"selectfield[label=X-Axis:]",yAxisSetting:"selectfield[label=Y-Axis:]",groupBySetting:"selectfield[label=Group By:]",granularitySetting:"selectfield[label=Granularity:]",accumulateSetting:"selectfield[label=Accumulate:]",numberActivePanelsSetting:"selectfield[id=activepanelsfield]",chartTypeSetting:"selectfield[label=Chart Type:]",startDateSetting:"datepickerfield[label=Start Date:]",endDateSetting:"datepickerfield[label=End Date:]",interestingMomentsSetting:"selectfield[label=Interesting Moments:]",replaySpeedSettings:"selectfield[id=replayspeedsetting]",imType3Setting:"selectfield[id=imtype3setting]",imType4Setting:"selectfield[id=imtype4setting]",imType1Setting:"selectfield[id=imtype1setting]",imType2Setting:"selectfield[id=imtype2setting]",doneButtonSettings:"button[id=settingsdonebutton]",cancelButtonSettings:"button[id=settingscancelbutton]",clearPanelSettings:"button[id=clearpanelbutton]",doneButtonGlobalSettings:"button[id=globalsettingsdonebutton]",cancelButtonGlobalSettings:"button[id=globalsettingscancelbutton]",clearCacheButtonGlobalSettings:"button[id=clearcachebuttonglobalsettings]",addChart1Settings:"button[id=chart1Button]",addChart2Settings:"button[id=chart2Button]",addChart3Settings:"button[id=chart3Button]",addChart4Settings:"button[id=chart4Button]",filterSetting:"selectfield[id=filtersettingtoggle]",replayCommentsSetting:"selectfield[id=replaycommentstogglefield]",},control:{settingsButton:{tap:"showSettingsPanel"},globalSettingsButton:{tap:"showGlobalSettingsPanel"},addChart1Settings:{tap:"showSettingsPanel1"},addChart2Settings:{tap:"showSettingsPanel2"},addChart3Settings:{tap:"showSettingsPanel3"},addChart4Settings:{tap:"showSettingsPanel4"},doneButtonGlobalSettings:{tap:"doneGlobalSettingsPanel"},cancelButtonGlobalSettings:{tap:"cancelGlobalSettingsPanel"},doneButtonSettings:{tap:"hideSettingsPanel"},cancelButtonSettings:{tap:"cancelSettingsPanel"},clearCacheButtonGlobalSettings:{tap:"clearLocalCache"},clearPanelSettings:{tap:"clearPanelSettingsStore"},chartTypeSetting:{change:"manageDimensions"},yAxisSetting:{change:"manageFieldValueChangeForyAxisField"},xAxisSetting:{change:"manageFieldValueChangeForxAxisField"},},},launch:function(){settingsController=this;ReplayAnalytics.app.GranularityFieldStore=[{text:"None Defined",value:"none"},{text:"Hourly",value:"Hourly"},{text:"Daily",value:"Daily"},{text:"Weekly",value:"Weekly"},{text:"Monthly",value:"Monthly"}]},showSettingsPanel1:function(){this.getApplication().getController("Main").setFocusOnPanel1();this.showSettingsPanel()},showSettingsPanel2:function(){this.getApplication().getController("Main").setFocusOnPanel2();this.showSettingsPanel()},showSettingsPanel3:function(){this.getApplication().getController("Main").setFocusOnPanel3();this.showSettingsPanel()},showSettingsPanel4:function(){this.getApplication().getController("Main").setFocusOnPanel4();this.showSettingsPanel()},manageDimensions:function(){var e=ReplayAnalytics.app.currentActivePanelIndex;var a=ReplayAnalytics.app.EmptyFieldStore;var d=ReplayAnalytics.app.EmptyFieldStore;var b=ReplayAnalytics.app.EmptyFieldStore;var c=ReplayAnalytics.app.GranularityFieldStore;if(ReplayAnalytics.app.PanelDataFieldStore[e]!=undefined){a=ReplayAnalytics.app.PanelDataFieldStore[e]}if(ReplayAnalytics.app.PanelCategoryFieldStore[e]!=undefined){d=ReplayAnalytics.app.PanelCategoryFieldStore[e]}if(ReplayAnalytics.app.PanelCategoryFieldStoreWithTime[e]!=undefined){b=ReplayAnalytics.app.PanelCategoryFieldStoreWithTime[e]}this.getGranularitySetting().setOptions(c);switch(this.getChartTypeSetting().getValue()){case"scatter":this.getGroupBySetting().show("fadeIn");this.getXAxisSetting().setLabel("X-Axis:");this.getYAxisSetting().show("fadeIn");this.getGroupBySetting().hide();this.getGroupBySetting().setValue("none");this.getXAxisSetting().setOptions(a);this.getYAxisSetting().setOptions(a);break;case"horizontalbar":this.getGroupBySetting().show("fadeIn");this.getYAxisSetting().show("fadeIn");this.getXAxisSetting().setLabel("X-Axis:");this.getXAxisSetting().setOptions(a);this.getYAxisSetting().setOptions(b);this.getGroupBySetting().setOptions(d);break;case"verticalbar":this.getGroupBySetting().show("fadeIn");this.getXAxisSetting().setLabel("X-Axis:");this.getYAxisSetting().show("fadeIn");this.getYAxisSetting().setOptions(a);this.getXAxisSetting().setOptions(b);this.getGroupBySetting().setOptions(d);break;case"line":this.getGroupBySetting().show("fadeIn");this.getXAxisSetting().setLabel("X-Axis:");this.getYAxisSetting().show("fadeIn");this.getYAxisSetting().setOptions(a);this.getXAxisSetting().setOptions(b);this.getGroupBySetting().setOptions(d);break;case"area":this.getGroupBySetting().show("fadeIn");this.getXAxisSetting().setLabel("X-Axis:");this.getYAxisSetting().show("fadeIn");this.getYAxisSetting().setOptions(a);this.getXAxisSetting().setOptions(b);this.getGroupBySetting().setOptions(d);break;case"pie":this.getGroupBySetting().show("fadeIn");this.getXAxisSetting().setLabel("Data Value:");this.getYAxisSetting().hide("fadeOut");this.getGroupBySetting().setOptions(d);this.getXAxisSetting().setOptions(a);break;case"radar":this.getGroupBySetting().show("fadeIn");this.getXAxisSetting().setLabel("Data Value:");this.getYAxisSetting().hide("fadeOut");this.getGroupBySetting().setOptions(d);this.getXAxisSetting().setOptions(a);break;case"none":this.getGroupBySetting().show("fadeIn");this.getXAxisSetting().setLabel("Data Value:");this.getYAxisSetting().hide("fadeOut");this.getGroupBySetting().setOptions(ReplayAnalytics.app.EmptyFieldStore);this.getXAxisSetting().setOptions(ReplayAnalytics.app.EmptyFieldStore);this.getYAxisSetting().setOptions(ReplayAnalytics.app.EmptyFieldStore)}},manageFieldValueChangeForyAxisField:function(){this.manageGranularitySettings()},manageFieldValueChangeForxAxisField:function(){this.manageGranularitySettings()},manageGranularitySettings:function(){if(this.getChartTypeSetting().getValue()=="horizontalbar"){var a=this.getYAxisSetting().getValue()}else{if(this.getChartTypeSetting().getValue()=="verticalbar"||this.getChartTypeSetting().getValue()=="line"){var a=this.getXAxisSetting().getValue()}}switch(a){case"Hour":this.getGranularitySetting().setOptions([{text:"None Defined",value:"none"},{text:"Hourly",value:"Hourly"}]);break;case"Date":this.getGranularitySetting().setOptions([{text:"None Defined",value:"none"},{text:"Hourly",value:"Hourly"},{text:"Daily",value:"Daily"}]);break;case"DayOfWeek":this.getGranularitySetting().setOptions([{text:"None Defined",value:"none"},{text:"Hourly",value:"Hourly"},{text:"Daily",value:"Daily"}]);break;case"Week":this.getGranularitySetting().setOptions([{text:"None Defined",value:"none"},{text:"Hourly",value:"Hourly"},{text:"Daily",value:"Daily"},{text:"Weekly",value:"Weekly"}]);break;case"Month":this.getGranularitySetting().setOptions([{text:"None Defined",value:"none"},{text:"Hourly",value:"Hourly"},{text:"Daily",value:"Daily"},{text:"Weekly",value:"Weekly"},{text:"Monthly",value:"Monthly"}]);break}},showGlobalSettingsPanel:function(){this.getNumberActivePanelsSetting().setValue(ReplayAnalytics.app.numberActivePanels);this.getInterestingMomentsSetting().setValue(ReplayAnalytics.app.interestingMoments);this.getReplayCommentsSetting().setValue(ReplayAnalytics.app.replayCommentsSetting);this.getReplaySpeedSettings().setValue(ReplayAnalytics.app.replaySpeed);this.getImType3Setting().setValue(ReplayAnalytics.app.interestingMomentType3Setting);this.getImType4Setting().setValue(ReplayAnalytics.app.interestingMomentType4Setting);this.getImType1Setting().setValue(ReplayAnalytics.app.interestingMomentType1Setting);this.getImType2Setting().setValue(ReplayAnalytics.app.interestingMomentType2Setting);this.getGlobalSettingsPanel().show()},showSettingsPanel:function(){this.getApplication().getController("DatabaseTable").getAllDatabaseTables()},configureSettingsPanel:function(){this.getDatabaseSetting().setOptions(ReplayAnalytics.app.DatabaseTableFieldStore);this.getDatabaseSetting().setValue(ReplayAnalytics.app.databaseSetting[ReplayAnalytics.app.currentActivePanelIndex]);this.getApplication().getController("DatabaseTable").getDatabaseTableFieldsForDatabase()},showConfiguredSettingsPanel:function(){this.getChartTypeSetting().setValue(ReplayAnalytics.app.chartTypes[ReplayAnalytics.app.currentActivePanelIndex]);this.manageDimensions();this.getXAxisSetting().setValue(ReplayAnalytics.app.xs[ReplayAnalytics.app.currentActivePanelIndex]);this.getYAxisSetting().setValue(ReplayAnalytics.app.ys[ReplayAnalytics.app.currentActivePanelIndex]);this.getGranularitySetting().setValue(ReplayAnalytics.app.granularities[ReplayAnalytics.app.currentActivePanelIndex]);this.getGroupBySetting().setValue(ReplayAnalytics.app.groupBys[ReplayAnalytics.app.currentActivePanelIndex]);this.getStartDateSetting().setValue(ReplayAnalytics.app.startDate[ReplayAnalytics.app.currentActivePanelIndex]);this.getEndDateSetting().setValue(ReplayAnalytics.app.currentEndDate[ReplayAnalytics.app.currentActivePanelIndex]);this.getAccumulateSetting().setValue(ReplayAnalytics.app.accumulate[ReplayAnalytics.app.currentActivePanelIndex]);this.getFilterSetting().setValue(ReplayAnalytics.app.filterToggle[ReplayAnalytics.app.currentActivePanelIndex]);this.getSettingsPanel().show();this.manageGranularitySettings()},cancelSettingsPanel:function(){this.getSettingsPanel().hide(true)},cancelGlobalSettingsPanel:function(){this.getGlobalSettingsPanel().hide(true)},clearLocalCache:function(){if(developerMode){try{for(i=0;i<=localStorage.length-1;){key=localStorage.key(i);if(key.indexOf("get")=="0"){localStorage.removeItem(key)}else{i++}}}catch(a){}this.getGlobalSettingsPanel().hide(true)}else{localStorage.clear();resetSettings()}},clearPanelSettingsStore:function(){clearStore("UserSettings"+ReplayAnalytics.app.currentActivePanelIndex);Ext.get("chart"+ReplayAnalytics.app.currentActivePanelIndex+"Button").show();Ext.get("chart"+ReplayAnalytics.app.currentActivePanelIndex+"Image").show();var c=ReplayAnalytics.app.newChart[ReplayAnalytics.app.currentActivePanelIndex];if(c!=undefined){if(c.getLegend()!=undefined){c.getLegend().destroy()}c.destroy()}ReplayAnalytics.app.panelSettings[ReplayAnalytics.app.currentActivePanelIndex]="";ReplayAnalytics.app.panelData[ReplayAnalytics.app.currentActivePanelIndex]="";var a=ReplayAnalytics.app.currentActivePanelIndex;Ext.ComponentQuery.query("addchartpanel"+a)[0].setHtml("");var b=Ext.ComponentQuery.query("carousel[id=carousel"+a+"]")[0];Ext.ComponentQuery.query("selectfield[label=Accumulate:]")[0].setValue("Off");this.manageDimensions();this.getApplication().getController("Main").checkForConfiguredGraphPanels()},doneGlobalSettingsPanel:function(){ReplayAnalytics.app.interestingMoments=this.getInterestingMomentsSetting().getValue();ReplayAnalytics.app.replayCommentsSetting=this.getReplayCommentsSetting().getValue();ReplayAnalytics.app.numberActivePanels=this.getNumberActivePanelsSetting().getValue();ReplayAnalytics.app.replaySpeed=this.getReplaySpeedSettings().getValue();var d=this.getImType3Setting().getValue();var c=this.getImType4Setting().getValue();var f=this.getImType1Setting().getValue();var b=this.getImType2Setting().getValue();var a=false;if(d!=ReplayAnalytics.app.interestingMomentType3Setting||c!=ReplayAnalytics.app.interestingMomentType4Setting||f!=ReplayAnalytics.app.interestingMomentType1Setting||b!=ReplayAnalytics.app.interestingMomentType2Setting){a=true}ReplayAnalytics.app.interestingMomentType3Setting=this.getImType3Setting().getValue();ReplayAnalytics.app.interestingMomentType4Setting=this.getImType4Setting().getValue();ReplayAnalytics.app.interestingMomentType1Setting=this.getImType1Setting().getValue();ReplayAnalytics.app.interestingMomentType2Setting=this.getImType2Setting().getValue();var e;e=[{NumberOfPanels:this.getNumberActivePanelsSetting().getValue(),InterestingMoments:this.getInterestingMomentsSetting().getValue(),ReplayComments:this.getReplayCommentsSetting().getValue(),ReplaySpeed:this.getReplaySpeedSettings().getValue(),InterestingMomentType3Setting:this.getImType3Setting().getValue(),InterestingMomentType1Setting:this.getImType1Setting().getValue(),InterestingMomentType2Setting:this.getImType2Setting().getValue(),InterestingMomentType4Setting:this.getImType4Setting().getValue()}];Ext.getStore("GlobalSettingsStore").setData(e);Ext.getStore("GlobalSettingsStore").sync();this.getApplication().getController("Main").changePanels();this.updateChartAnimationSettings();this.cancelGlobalSettingsPanel();if(a){Ext.Msg.alert("ReplayAnalytics &#153;","Interesting Moment settings has been changed. Dashboard will need to be recalculated.",function(){for(i=1;i<=ReplayAnalytics.app.numberActivePanels;i++){ReplayAnalytics.app.chartCreated[i]=false}settingsController.getApplication().getController("Main").loadStores()})}},updateChartAnimationSettings:function(){ReplayAnalytics.app.animateSpeed=ReplayAnalytics.app.replaySpeed-100;for(i=0;i<ReplayAnalytics.app.newChart.length;i++){if(ReplayAnalytics.app.newChart[i]!=null){var a=ReplayAnalytics.app.newChart[i].getSeries();for(j=0;j<a.length;j++){a[j].setAnimate({duration:ReplayAnalytics.app.animateSpeed,delay:ReplayAnalytics.app.animateSpeed/2,easing:"ease"})}ReplayAnalytics.app.newChart[i].setAnimate({duration:ReplayAnalytics.app.animateSpeed,delay:ReplayAnalytics.app.animateSpeed/2,easing:"ease"})}}},showSettingsErrorMessage:function(){Ext.Msg.alert("Error","Please select all required fields to proceed.",Ext.emptyFn)},hideSettingsPanel:function(){$starttime=new Date();if(this.getChartTypeSetting().getValue()=="scatter"&&(this.getXAxisSetting().getValue()=="none"||this.getYAxisSetting().getValue()=="none"||this.getGranularitySetting().getValue()=="none")){this.showSettingsErrorMessage()}else{if((this.getChartTypeSetting().getValue()=="line"||this.getChartTypeSetting().getValue()=="verticalbar")&&(this.getXAxisSetting().getValue()=="none"||this.getYAxisSetting().getValue()=="none"||this.getGranularitySetting().getValue()=="none")){this.showSettingsErrorMessage()}else{if(this.getChartTypeSetting().getValue()=="pie"&&(this.getXAxisSetting().getValue()=="none"||this.getGroupBySetting().getValue()=="none"||this.getGranularitySetting().getValue()=="none")){this.showSettingsErrorMessage()}else{if(this.getChartTypeSetting().getValue()=="horizontalbar"&&(this.getXAxisSetting().getValue()=="none"||this.getYAxisSetting().getValue()=="none"||this.getGranularitySetting().getValue()=="none")){this.showSettingsErrorMessage()}else{if(ReplayAnalytics.app.currentActivePanelIndex==1){Ext.get("chart1Button").hide();Ext.get("chart1Image").hide()}else{if(ReplayAnalytics.app.currentActivePanelIndex==2){Ext.get("chart2Button").hide();Ext.get("chart2Image").hide()}else{if(ReplayAnalytics.app.currentActivePanelIndex==3){Ext.get("chart3Button").hide();Ext.get("chart3Image").hide()}else{Ext.get("chart4Button").hide();Ext.get("chart4Image").hide()}}}ReplayAnalytics.app.databaseSetting[ReplayAnalytics.app.currentActivePanelIndex]=this.getDatabaseSetting().getValue();ReplayAnalytics.app.filterToggle[ReplayAnalytics.app.currentActivePanelIndex]=this.getFilterSetting().getValue();ReplayAnalytics.app.graphTitle[ReplayAnalytics.app.currentActivePanelIndex]=this.getGraphTitleSetting().getValue();ReplayAnalytics.app.xs[ReplayAnalytics.app.currentActivePanelIndex]=this.getXAxisSetting().getValue();ReplayAnalytics.app.ys[ReplayAnalytics.app.currentActivePanelIndex]=this.getYAxisSetting().getValue();ReplayAnalytics.app.granularities[ReplayAnalytics.app.currentActivePanelIndex]=this.getGranularitySetting().getValue();ReplayAnalytics.app.chartTypes[ReplayAnalytics.app.currentActivePanelIndex]=this.getChartTypeSetting().getValue();ReplayAnalytics.app.groupBys[ReplayAnalytics.app.currentActivePanelIndex]=this.getGroupBySetting().getValue();ReplayAnalytics.app.startDate[ReplayAnalytics.app.currentActivePanelIndex]=new Date(this.getStartDateSetting().getValue());ReplayAnalytics.app.currentStartDate[ReplayAnalytics.app.currentActivePanelIndex]=new Date(this.getStartDateSetting().getValue());ReplayAnalytics.app.currentDate[ReplayAnalytics.app.currentActivePanelIndex]=new Date(this.getStartDateSetting().getValue());ReplayAnalytics.app.currentEndDate[ReplayAnalytics.app.currentActivePanelIndex]=new Date(this.getEndDateSetting().getValue());ReplayAnalytics.app.accumulate[ReplayAnalytics.app.currentActivePanelIndex]=this.getAccumulateSetting().getValue();ReplayAnalytics.app.XmaxReceived[ReplayAnalytics.app.currentActivePanelIndex]=false;ReplayAnalytics.app.YmaxReceived[ReplayAnalytics.app.currentActivePanelIndex]=false;switch(ReplayAnalytics.app.granularities[ReplayAnalytics.app.currentActivePanelIndex]){case"Hourly":ReplayAnalytics.app.valueGranularities[ReplayAnalytics.app.currentActivePanelIndex]=1;break;case"Daily":ReplayAnalytics.app.valueGranularities[ReplayAnalytics.app.currentActivePanelIndex]=2;break;case"Weekly":ReplayAnalytics.app.valueGranularities[ReplayAnalytics.app.currentActivePanelIndex]=3;break;case"Monthly":ReplayAnalytics.app.valueGranularities[ReplayAnalytics.app.currentActivePanelIndex]=4;break}var e=ReplayAnalytics.app.currentEndDate[ReplayAnalytics.app.currentActivePanelIndex]-ReplayAnalytics.app.currentStartDate[ReplayAnalytics.app.currentActivePanelIndex];var d=Math.floor(e/(1000*60*60*24));var b=ReplayAnalytics.app.currentStartDate[ReplayAnalytics.app.currentActivePanelIndex]-ReplayAnalytics.app.currentEndDate[ReplayAnalytics.app.currentActivePanelIndex];var c=Math.floor(b/(1000*60*60*24));if(c>0){Ext.Msg.alert("Check Dates","Start date must be earlier than end date.")}else{if(d<=0&&ReplayAnalytics.app.granularities[ReplayAnalytics.app.currentActivePanelIndex]!="Hourly"){Ext.Msg.alert("Check Dates","Start and end date can not be same")}else{var a;a=[{Database:this.getDatabaseSetting().getValue(),GraphTitle:this.getGraphTitleSetting().getValue(),XAxis:this.getXAxisSetting().getValue(),YAxis:this.getYAxisSetting().getValue(),GroupBy:this.getGroupBySetting().getValue(),Granularity:this.getGranularitySetting().getValue(),ChartType:this.getChartTypeSetting().getValue(),StartDate:this.getStartDateSetting().getValue(),EndDate:this.getEndDateSetting().getValue(),InterestingMoments:this.getInterestingMomentsSetting().getValue(),Accumulate:this.getAccumulateSetting().getValue(),FilterToggle:this.getFilterSetting().getValue()}];Ext.getStore("UserSettings"+ReplayAnalytics.app.currentActivePanelIndex).setData(a);Ext.getStore("UserSettings"+ReplayAnalytics.app.currentActivePanelIndex).sync();this.getSettingsPanel().hide(true);ReplayAnalytics.app.dateSet[ReplayAnalytics.app.currentActivePanelIndex]=true;showLoadingMask();this.getApplication().getController("Main").chartSetUp()}}}}}}},});var playbackController;Ext.define("ReplayAnalytics.controller.Playback",{extend:"Ext.app.Controller",xtype:"playbackcontroller",config:{refs:{loginController:"logincontroller",mainController:"maincontroller",fourPanelLayout:"fourpanellayout",resetBackwardButton:"button[id=ResetBackwardButton]",stepBackwardButton:"button[id=StepBackwardButton]",playBackwardButton:"button[id=PlayBackwardButton]",pauseButton:"button[id=PauseButton]",playForwardButton:"button[id=PlayForwardButton]",stepForwardButton:"button[id=StepForwardButton]",resetForwardButton:"button[id=ResetForwardButton]",slider0:"slider0",slider1:"slider1",slider2:"slider2",slider3:"slider3",slider4:"slider4",slider5:"slider5",},control:{resetBackwardButton:{tap:"resetBackwardFunction"},stepBackwardButton:{tap:"stepBackwardFunction"},playBackwardButton:{tap:"playBackwardFunction"},pauseButton:{tap:"pauseFunction"},playForwardButton:{tap:"playForwardFunction"},stepForwardButton:{tap:"stepForwardFunction"},resetForwardButton:{tap:"resetForwardFunction"},slider0:{change:"sliderListenerFunctionChange",drag:"sliderListenerFunctionDrag"},slider1:{change:"sliderListenerFunctionChange",drag:"sliderListenerFunctionDrag"},slider2:{change:"sliderListenerFunctionChange",drag:"sliderListenerFunctionDrag"},slider3:{change:"sliderListenerFunctionChange",drag:"sliderListenerFunctionDrag"},slider4:{change:"sliderListenerFunctionChange",drag:"sliderListenerFunctionDrag"},slider5:{change:"sliderListenerFunctionChange",drag:"sliderListenerFunctionDrag"},},},launch:function(){playbackController=this},resumeLastPlaybackAction:function(){var a=ReplayAnalytics.app.currentActivePanelIndex;logInfo("ResumePlayback called for chart="+a+" at sliderValue="+ReplayAnalytics.app.sliders[a].getValue()[0]+" and Last action is == "+ReplayAnalytics.app.lastPlaybackAction);if(ReplayAnalytics.app.lastPlaybackAction!=undefined){if(ReplayAnalytics.app.lastPlaybackAction=="playForward"){this.getApplication().getController("InterestingMoment").getManualIMCallout().hide();this.playForwardFunction()}else{if(ReplayAnalytics.app.lastPlaybackAction=="playBackward"){this.getApplication().getController("InterestingMoment").getManualIMCallout().hide();this.playBackwardFunction()}}}},sliderListenerFunctionDrag:function(c,a,d){d=d[0];var b=ReplayAnalytics.app.currentActivePanelIndex;ReplayAnalytics.app.currentPositions[b]=ReplayAnalytics.app.sliders[b].getValue()[0];this.sliderListenerFunctionChange(c)},setPanelDateCaption:function(d,f){var c="";var g="ddd mmm dd yyyy HH:MM:ss";var a="";try{a=ReplayAnalytics.app.globalDateArray[d][f]}catch(e){}if(ReplayAnalytics.app.granularities[d]!="Hourly"){g="ddd mmm dd yyyy"}try{a=dateFormat(a,g)}catch(e){logInfo("Error converting date"+e);a=this.dateConversion(a)}if(d!=0&&d!=5){var b=ReplayAnalytics.app.graphTitle[d];c='<h1 style="text-align:center; color: black; z-index: 10; font-size: 14px; padding:10px"><b>'+a+"</b></h1>";Ext.ComponentQuery.query("panel"+d)[0].setHtml(c)}else{if(d==5){c="<h1 style='text-align:center; color: black; z-index: 10; font-size: 14px; padding: 5px;'>"+a+"</h1>";Ext.ComponentQuery.query("interestingmomentgraphpanel")[0].setHtml(c)}}return c},dateConversion:function(b){var a=new Array("Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec");var c=a[parseInt(b.substring(5,7))-1]+" "+b.substring(8,10)+", "+b.substring(0,4);return c},updateSliderInterval:function(){var a=ReplayAnalytics.app.sliders[ReplayAnalytics.app.currentActivePanelIndex].getValue();ReplayAnalytics.app.sliders[ReplayAnalytics.app.currentActivePanelIndex].setValue(a%ReplayAnalytics.app.differentialMultiplier[ReplayAnalytics.app.currentActivePanelIndex])},showCharts:function(){var a=ReplayAnalytics.app.currentActivePanelIndex;var b=0;if(ReplayAnalytics.app.chartTypes[a]=="scatter"){if(ReplayAnalytics.app.groupBys[ReplayAnalytics.app.currentActivePanelIndex]!="none"){}else{this.getApplication().getController("Scatter").createScatterChart(ReplayAnalytics.app.chartTypes[a],ReplayAnalytics.app.jsonstore[a][b],ReplayAnalytics.app.dataFieldValues[a],ReplayAnalytics.app.categoryFieldValues[a],a,null)}}else{if(ReplayAnalytics.app.chartTypes[a]=="horizontalbar"||ReplayAnalytics.app.chartTypes[a]=="verticalbar"||ReplayAnalytics.app.chartTypes[a]=="line"||ReplayAnalytics.app.chartTypes[a]=="area"){this.getApplication().getController("Main").changeModelFields();if(ReplayAnalytics.app.chartTypes[a]=="horizontalbar"){if(ReplayAnalytics.app.groupBys[ReplayAnalytics.app.currentActivePanelIndex]!="none"){ReplayAnalytics.app.getController("HorizontalBar").createHorizontalBarChart(ReplayAnalytics.app.jsonstore[a][b],a,ReplayAnalytics.app.groupByBarLabels)}else{ReplayAnalytics.app.getController("HorizontalBar").createHorizontalBarChart(ReplayAnalytics.app.jsonstore[a][b],a,null)}}else{if(ReplayAnalytics.app.chartTypes[a]=="verticalbar"){if(ReplayAnalytics.app.groupBys[ReplayAnalytics.app.currentActivePanelIndex]!="none"){ReplayAnalytics.app.getController("VerticalBar").createVerticalBarChart(ReplayAnalytics.app.jsonstore[a][b],a,ReplayAnalytics.app.groupByBarLabels)}else{ReplayAnalytics.app.getController("VerticalBar").createVerticalBarChart(ReplayAnalytics.app.jsonstore[a][b],a,null)}}else{if(ReplayAnalytics.app.chartTypes[a]=="area"){if(ReplayAnalytics.app.groupBys[ReplayAnalytics.app.currentActivePanelIndex]!="none"){ReplayAnalytics.app.getController("AreaBar").createAreaChart(ReplayAnalytics.app.jsonstore[a][b],a,ReplayAnalytics.app.groupByBarLabels)}else{ReplayAnalytics.app.getController("AreaBar").createAreaChart(ReplayAnalytics.app.jsonstore[a][b],a,null)}}else{if(ReplayAnalytics.app.groupBys[ReplayAnalytics.app.currentActivePanelIndex]=="none"){ReplayAnalytics.app.getController("LineBar").createLineChart(ReplayAnalytics.app.jsonstore[a][b],a,null)}else{ReplayAnalytics.app.getController("LineBar").createLineChart(ReplayAnalytics.app.jsonstore[a][b],a,ReplayAnalytics.app.groupByBarLabels)}}}}}else{if(ReplayAnalytics.app.chartTypes[a]=="pie"){this.getApplication().getController("Pie").createPieChart(ReplayAnalytics.app.jsonstore[a][b],ReplayAnalytics.app.dataFieldValues[a],ReplayAnalytics.app.categoryFieldValues[a],a)}else{if(ReplayAnalytics.app.chartTypes[a]=="radar"){this.getApplication().getController("Radar").createRadarChart(ReplayAnalytics.app.jsonstore[a][b],ReplayAnalytics.app.dataFieldValues[a],ReplayAnalytics.app.categoryFieldValues[a],a)}}}}ReplayAnalytics.app.chartCreated[a]=true;if(ReplayAnalytics.app.dateSet[a]==true){this.getApplication().getController("Main").setFocusOnPanel(a)}else{ReplayAnalytics.app.dateSet[a]=true}this.setPanelDateCaption(a,b);if(a==5){Ext.ComponentQuery.query("interestingmomentgraphpanel")[0].add(ReplayAnalytics.app.newChart[a])}else{Ext.ComponentQuery.query("panel"+a)[0].add(ReplayAnalytics.app.newChart[a])}hideLoadingMask()},resetFunction:function(){var a=ReplayAnalytics.app.currentActivePanelIndex;clearInterval(ReplayAnalytics.app.waitvariables[a]);var b;b=ReplayAnalytics.app.minimumPositions[a];ReplayAnalytics.app.sliders[a].setValue(b);ReplayAnalytics.app.currentPositions[a]=b;this.showCharts();if(a!=0){ReplayAnalytics.app.sliders[a].fireEvent("change",ReplayAnalytics.app.sliders[a],a)}if(a==0){for(i=1;i<5;i++){ReplayAnalytics.app.currentActivePanelIndex=i;ReplayAnalytics.app.sliders[i].setValue(b);ReplayAnalytics.app.sliders[i].fireEvent("change",ReplayAnalytics.app.sliders[i],i)}ReplayAnalytics.app.currentActivePanelIndex=0}},checkForConfiguredCarousel:function(){var a=ReplayAnalytics.app.currentActivePanelIndex;if(ReplayAnalytics.app.chartCreated[a]){var b=Ext.ComponentQuery.query("carousel[id=carousel"+a+"]")[0];if(b.getItems().items.length==2){playbackController.getApplication().getController("InterestingMoment").addChartDataTableToCarousel(a);playbackController.getApplication().getController("InterestingMoment").addIMListToCarousel(a);playbackController.getApplication().getController("InterestingMoment").addIMCommentListToCarousel(a)}}},sliderListenerFunctionChange:function(b){this.moveCarouselToGraphItem();this.getApplication().getController("InterestingMoment").getManualIMCallout().hide();var a=ReplayAnalytics.app.currentActivePanelIndex;var d=b.getValue()[0];var c=Math.floor(d/ReplayAnalytics.app.differentialMultiplier[ReplayAnalytics.app.currentActivePanelIndex]);ReplayAnalytics.app.currentPositions[ReplayAnalytics.app.currentActivePanelIndex]=ReplayAnalytics.app.sliders[ReplayAnalytics.app.currentActivePanelIndex].getValue()[0];logInfo("sliderValue="+d+" & differential="+ReplayAnalytics.app.differentialMultiplier[ReplayAnalytics.app.currentActivePanelIndex]+" & value="+c);if(a!=0){this.setPanelDateCaption(a,c);ReplayAnalytics.app.newChart[a].bindStore(ReplayAnalytics.app.jsonstore[a][c])}else{if(a==0){this.getApplication().getController("GlobalSync").globalSyncSliderFunctionChange(d,a)}}},resetBackwardFunction:function(){var a=ReplayAnalytics.app.currentActivePanelIndex;ReplayAnalytics.app.lastPlaybackAction="resetBackward";clearInterval(ReplayAnalytics.app.waitvariables[a]);var b;b=ReplayAnalytics.app.minimumPositions[a];ReplayAnalytics.app.sliders[a].setValue(b);ReplayAnalytics.app.currentPositions[a]=b;ReplayAnalytics.app.sliders[a].fireEvent("change",ReplayAnalytics.app.sliders[a],a)},stepBackwardFunction:function(){var a=ReplayAnalytics.app.currentActivePanelIndex;if(ReplayAnalytics.app.currentPositions[a]!=ReplayAnalytics.app.minimumPositions[a]){this.updateSliderInterval()}ReplayAnalytics.app.lastPlaybackAction="stepBackward";clearInterval(ReplayAnalytics.app.waitvariables[a]);if(ReplayAnalytics.app.currentPositions[a]>ReplayAnalytics.app.minimumPositions[a]){newPosition=ReplayAnalytics.app.currentPositions[a]-ReplayAnalytics.app.differentialMultiplier[ReplayAnalytics.app.currentActivePanelIndex];ReplayAnalytics.app.sliders[a].setValue(newPosition);ReplayAnalytics.app.sliders[a].fireEvent("change",ReplayAnalytics.app.sliders[a],a);if(ReplayAnalytics.app.interestingMoments=="On"||ReplayAnalytics.app.replayCommentsSetting=="On"){playbackController.getApplication().getController("InterestingMoment").checkForInterestingMoment(a,newPosition)}}},playBackwardFunction:function(){var a=ReplayAnalytics.app.currentActivePanelIndex;if(ReplayAnalytics.app.currentPositions[a]!=ReplayAnalytics.app.minimumPositions[a]){this.updateSliderInterval()}this.stepBackwardFunction();ReplayAnalytics.app.lastPlaybackAction="playBackward";clearInterval(ReplayAnalytics.app.waitvariables[a]);ReplayAnalytics.app.currentPositions[a]=ReplayAnalytics.app.sliders[a].getValue()[0];if(!ReplayAnalytics.app.isIMGraphRunning&&a!=5){ReplayAnalytics.app.waitvariables[a]=setInterval(function(){var b;if(ReplayAnalytics.app.currentPositions[a]>ReplayAnalytics.app.minimumPositions[a]){b=ReplayAnalytics.app.currentPositions[a]-ReplayAnalytics.app.differentialMultiplier[ReplayAnalytics.app.currentActivePanelIndex];ReplayAnalytics.app.sliders[a].setValue(b);ReplayAnalytics.app.sliders[a].fireEvent("change",ReplayAnalytics.app.sliders[a],a);if(ReplayAnalytics.app.interestingMoments=="On"||ReplayAnalytics.app.replayCommentsSetting=="On"){playbackController.getApplication().getController("InterestingMoment").checkForInterestingMoment(a,b)}}else{clearInterval(ReplayAnalytics.app.waitvariables[a])}},ReplayAnalytics.app.replaySpeed)}},pauseFunction:function(){this.moveCarouselToGraphItem();var a=ReplayAnalytics.app.currentActivePanelIndex;logInfo("pauseFunction called for Chart "+a+" at sliderValue="+ReplayAnalytics.app.sliders[a].getValue()[0]);clearInterval(ReplayAnalytics.app.waitvariables[a]);if(a==0){for(i=1;i<5;i++){clearInterval(ReplayAnalytics.app.waitvariables[i])}}},playForwardFunction:function(){var a=ReplayAnalytics.app.currentActivePanelIndex;if(ReplayAnalytics.app.currentPositions[a]!=ReplayAnalytics.app.maximumPositions[a]){this.updateSliderInterval()}this.stepForwardFunction();ReplayAnalytics.app.lastPlaybackAction="playForward";clearInterval(ReplayAnalytics.app.waitvariables[a]);ReplayAnalytics.app.currentPositions[a]=ReplayAnalytics.app.sliders[a].getValue()[0];if(!ReplayAnalytics.app.isIMGraphRunning&&a!=5&&ReplayAnalytics.app.currentPositions[a]!=ReplayAnalytics.app.maximumPositions[a]){ReplayAnalytics.app.waitvariables[a]=setInterval(function(){logInfo("Inside setInterval for playForwardFunction at currentPos="+ReplayAnalytics.app.currentPositions[a]+" & newPos="+(ReplayAnalytics.app.currentPositions[a]+ReplayAnalytics.app.differentialMultiplier[a]));var b;if(ReplayAnalytics.app.currentPositions[a]<ReplayAnalytics.app.maximumPositions[a]){b=ReplayAnalytics.app.currentPositions[a]+ReplayAnalytics.app.differentialMultiplier[a];ReplayAnalytics.app.sliders[a].setValue(b);ReplayAnalytics.app.sliders[a].fireEvent("change",ReplayAnalytics.app.sliders[a],a);if(ReplayAnalytics.app.interestingMoments=="On"||ReplayAnalytics.app.replayCommentsSetting=="On"){playbackController.getApplication().getController("InterestingMoment").checkForInterestingMoment(a,b)}}else{clearInterval(ReplayAnalytics.app.waitvariables[a])}},ReplayAnalytics.app.replaySpeed)}},stepForwardFunction:function(){var a=ReplayAnalytics.app.currentActivePanelIndex;if(ReplayAnalytics.app.currentPositions[a]!=ReplayAnalytics.app.maximumPositions[a]){this.updateSliderInterval()}ReplayAnalytics.app.lastPlaybackAction="stepForward";clearInterval(ReplayAnalytics.app.waitvariables[a]);if(ReplayAnalytics.app.currentPositions[a]<ReplayAnalytics.app.maximumPositions[a]){newPosition=ReplayAnalytics.app.currentPositions[a]+ReplayAnalytics.app.differentialMultiplier[ReplayAnalytics.app.currentActivePanelIndex];ReplayAnalytics.app.sliders[a].setValue(newPosition);ReplayAnalytics.app.sliders[a].fireEvent("change",ReplayAnalytics.app.sliders[a],a);if(ReplayAnalytics.app.interestingMoments=="On"||ReplayAnalytics.app.replayCommentsSetting=="On"){playbackController.getApplication().getController("InterestingMoment").checkForInterestingMoment(a,newPosition)}}},resetForwardFunction:function(){var a=ReplayAnalytics.app.currentActivePanelIndex;ReplayAnalytics.app.lastPlaybackAction="resetForward";this.getApplication().getController("InterestingMoment").getManualIMCallout().hide();logMessage("resetForwardFunction for Chart "+ReplayAnalytics.app.currentActivePanelIndex);clearInterval(ReplayAnalytics.app.waitvariables[a]);var b;b=ReplayAnalytics.app.maximumPositions[a];ReplayAnalytics.app.sliders[a].setValue(b);ReplayAnalytics.app.currentPositions[a]=b;ReplayAnalytics.app.sliders[a].fireEvent("change",ReplayAnalytics.app.sliders[a],a)},moveCarouselToGraphItem:function(){},});Ext.define("ReplayAnalytics.controller.Help",{extend:"Ext.app.Controller",xtype:"helpcontroller",config:{refs:{loginController:"logincontroller",mainController:"maincontroller",helpButton:"button[id=helpbutton]",helpPanel:"helppanel",helpPanelHideButton:"button[id=hidehelp]",settingsHelpPanel:"settingshelppanel",playbackHelpPanel:"playbackhelppanel",globalSyncHelpPanel:"globalsynchelppanel",chartHelpPanel:"charthelppanel",sliderHelpPanel:"sliderhelppanel",gestureHelpPanel:"gesturehelppanel",informationButton:"button[id=infobutton]",settingsButton:"button[id=settingsbutton]",pauseButton:"button[id=PauseButton]",globalSyncButton:"segmentedbutton[id=globalsynctogglebutton]",chart1:"chart[id=chart1]",chart2:"chart[id=chart2]",slider1:"slider1",},control:{helpButton:{tap:"showHelpNavigationPage"},helpPanelHideButton:{tap:"hideHelpNavigationPage"},informationButton:{tap:"showInformationPanel"},},},showHelpNavigationPage:function(){if(ReplayAnalytics.app.isHelpPanelShowing){ReplayAnalytics.app.isHelpPanelShowing=false;this.hideHelpNavigationPage()}else{var a=ReplayAnalytics.app.currentActivePanelIndex;ReplayAnalytics.app.isHelpPanelShowing=true;this.getSettingsHelpPanel().showBy(this.getSettingsButton());this.getPlaybackHelpPanel().showBy(this.getPauseButton());this.getGlobalSyncHelpPanel().showBy(this.getGlobalSyncButton());this.getChartHelpPanel().showBy(Ext.ComponentQuery.query("panel2")[0]);this.getSliderHelpPanel().showBy(Ext.ComponentQuery.query("slider"+a)[0]);this.getGestureHelpPanel().showBy(Ext.ComponentQuery.query("panel1")[0])}},hideHelpNavigationPage:function(){this.getHelpPanel().hide();this.getSettingsHelpPanel().hide();this.getPlaybackHelpPanel().hide();this.getGlobalSyncHelpPanel().hide();this.getChartHelpPanel().hide();this.getSliderHelpPanel().hide();this.getGestureHelpPanel().hide()},showInformationPanel:function(){Ext.Msg.alert("ReplayAnalytics &#153;",infoString,Ext.emptyFn)},});var interestingMomentController;Ext.define("ReplayAnalytics.controller.InterestingMoment",{extend:"Ext.app.Controller",xtype:"interestingmomentcontroller",config:{refs:{loginController:"logincontroller",mainController:"maincontroller",interestingMomentGraphPanel:"interestingmomentgraphpanel",interestingMomentGraphTitleBar:"toolbar[id=imgraphtitlebar]",closeInterestingMomentPanel:"button[id=closeinterestingmomentgraphpanelbutton]",imFoundDialog:"imfounddialog",manualIMButton:"button[id=manualimbutton]",manualIMDialog:"manualimdialog",closeManualIMDialog:"button[id=closemanualimdialogbutton]",saveManualIM:"button[id=savemanualimbutton]",manualIMMessageField:"textareafield[id=manualimmessagefield]",imTabPanel:"tabpanel[id=imtabpanel]",manualIMCallout:"manualimcallout",showIMReplayGraph:"button[id=replayinterestingmomentbutton]",showTrendGraph:"button[id=showtrendgraphbutton]",nextIMTrend:"button[id=nextinterestingmomentbutton]",previousIMTrend:"button[id=previousinterestingmomentbutton]",},control:{showIMReplayGraph:{tap:"showIMReplayGraph"},showTrendGraph:{tap:"showIMTrendGraph",},nextIMTrend:{tap:"showNextIMTrend",},previousIMTrend:{tap:"showPreviousIMTrend",},closeInterestingMomentPanel:{tap:"closeInterestingMomentPanel"},manualIMButton:{tap:"addEditManualIMForPosition",},closeManualIMDialog:{tap:"closeManualIMDialog",},saveManualIM:{tap:"saveManualIM",},},},launch:function(){interestingMomentController=this},showInterestingMomentGraphPanel:function(){this.getInterestingMomentGraphPanel().show()},closeInterestingMomentPanel:function(){this.getInterestingMomentGraphPanel().hide();ReplayAnalytics.app.currentActivePanelIndex=ReplayAnalytics.app.previousActivePanelIndex;this.getApplication().getController("Main").setFocusOnPanel(ReplayAnalytics.app.currentActivePanelIndex);ReplayAnalytics.app.getController("Playback").resumeLastPlaybackAction();ReplayAnalytics.app.isIMGraphRunning=false},getNewAxisForTimeAxisOption:function(a,b){if(a=="Date"){if(b=="Hourly"){a="Hour"}}else{if(a=="Week"){if(b=="Hourly"){a="Hour"}else{if(b=="Daily"){a="Date"}}}else{if(a=="Month"){if(b=="Hourly"){a="Hour"}else{if(b=="Daily"){a="Date"}else{if(b=="Weekly"){a="Week"}}}}else{if(a=="DayOfWeek"){if(b=="Hourly"){a="Hour"}}}}}return a},isTimeAxisOption:function(a){if(a=="Day"||a=="Week"||a=="Hour"||a=="DayOfWeek"||a=="Month"||a=="Time (Date)"||a==" Time (Week)"||a=="Time (Hour)"||a=="Time (Day Of Week)"||a=="Time (Month)"){return true}return false},addEditManualIMForPosition:function(){this.getManualIMMessageField().setValue("");if(ReplayAnalytics.app.currentDashboard==undefined||ReplayAnalytics.app.currentDashboard.dashboardId==undefined){Ext.Msg.alert("ReplayAnalytics &#153;","You need to save your dashboard first to add replay comments.",Ext.emptyFn)}else{this.getManualIMDialog().show()}},getAllManualIMsForCurrentChart:function(){var b=ReplayAnalytics.app.currentActivePanelIndex;try{if(ReplayAnalytics.app.currentDashboard!=undefined){switch(b){case 1:manualIMs=ReplayAnalytics.app.currentDashboard.panel1Settings.manualIMs;break;case 2:manualIMs=ReplayAnalytics.app.currentDashboard.panel2Settings.manualIMs;break;case 3:manualIMs=ReplayAnalytics.app.currentDashboard.panel3Settings.manualIMs;break;case 4:manualIMs=ReplayAnalytics.app.currentDashboard.panel4Settings.manualIMs;break}ReplayAnalytics.app.currentChartManualIMs=manualIMs}}catch(a){}},getAllManualIMsForCurrentIndex:function(){var f=ReplayAnalytics.app.currentActivePanelIndex;var a=Math.floor(ReplayAnalytics.app.sliders[f].getValue()/ReplayAnalytics.app.differentialMultiplier[f]);var b=undefined;try{if(ReplayAnalytics.app.currentDashboard!=undefined){switch(f){case 1:b=ReplayAnalytics.app.currentDashboard.panel1Settings.manualIMs;break;case 2:b=ReplayAnalytics.app.currentDashboard.panel2Settings.manualIMs;break;case 3:b=ReplayAnalytics.app.currentDashboard.panel3Settings.manualIMs;break;case 4:b=ReplayAnalytics.app.currentDashboard.panel4Settings.manualIMs;break}ReplayAnalytics.app.currentManualIMs=new Array();ReplayAnalytics.app.currentChartManualIMs=b;if(b!=undefined&&b!=null&&b.length>0){var c=0;for(var d=0;d<b.length;d++){if(b[d].imIndex==a){ReplayAnalytics.app.currentManualIMs[c]=b[d];c++}}}}}catch(e){}},saveManualIM:function(){this.getManualIMDialog().hide();var e=ReplayAnalytics.app.currentActivePanelIndex;var c=null;switch(e){case 1:c=ReplayAnalytics.app.currentDashboard.panel1Settings.id;break;case 2:c=ReplayAnalytics.app.currentDashboard.panel2Settings.id;break;case 3:c=ReplayAnalytics.app.currentDashboard.panel3Settings.id;break;case 4:c=ReplayAnalytics.app.currentDashboard.panel4Settings.id;break}var d=undefined;var a=Math.floor(ReplayAnalytics.app.sliders[e].getValue()/ReplayAnalytics.app.differentialMultiplier[e]);var b=this.getManualIMMessageField().getValue();showLoadingMask();Ext.Ajax.request({url:"saveManualIM.do",method:"POST",params:{userId:ReplayAnalytics.app.currentUserSession.userId,dashboardSettingId:c,dashboardId:ReplayAnalytics.app.currentDashboard.dashboardId,manualIMId:d,imIndex:a,imMessage:b,},success:this.handleManualIMSave,failure:function(f){hideLoadingMask();logMessage("Failure Saving manual IM.")},})},closeManualIMDialog:function(){this.getManualIMDialog().hide()},handleManualIMSave:function(a){var e=Ext.JSON.decode(a.responseText);if(e.error!=undefined){Ext.Msg.alert("Error",e.description,Ext.emptyFn)}else{ReplayAnalytics.app.currentDashboard=e.dashboard;for(i=0;i<ReplayAnalytics.app.userDashboardDetails.length;i++){if(ReplayAnalytics.app.userDashboardDetails[i].dashboardId==e.dashboard.dashboardId){ReplayAnalytics.app.userDashboardDetails[i]=e.dashboard}}try{var b=ReplayAnalytics.app.currentActivePanelIndex;var d=Ext.ComponentQuery.query("carousel[id=carousel"+b+"]")[0];d.removeAt(d.getItems().items.length-1);interestingMomentController.addIMCommentListToCarousel(b);d.setActiveItem(d.getItems().items.length)}catch(c){}Ext.Msg.alert("Success",e.description,Ext.emptyFn)}hideLoadingMask();interestingMomentController.getManualIMMessageField().setValue("")},checkForInterestingMoment:function(b,c){var a=Math.floor(c/ReplayAnalytics.app.differentialMultiplier[b]);if(b!=0){this.getAllManualIMsForCurrentIndex();if(ReplayAnalytics.app.replayCommentsSetting=="On"&&ReplayAnalytics.app.currentManualIMs!=undefined&&ReplayAnalytics.app.currentManualIMs.length>0){this.getApplication().getController("Playback").pauseFunction();this.handleManualIMsForChart(b,0,a)}else{if(ReplayAnalytics.app.interestingMoments=="On"){this.checkForAutoIMs(b,a,false)}}}else{this.checkForGlobalSyncIMs(a,0,0,false,false)}},checkForAutoIMs:function(c,b,f){var e=undefined;if(ReplayAnalytics.app.interestingMomentsPoints[c]!=undefined){var a=0;for(var d=0;d<ReplayAnalytics.app.interestingMomentsPoints[c].length;d++){if(ReplayAnalytics.app.interestingMomentsPoints[c][d].Index==b){if(a==0){e=ReplayAnalytics.app.interestingMomentsPoints[c][d]}ReplayAnalytics.app.allIMPointsAtCurrentIndex[a]=ReplayAnalytics.app.interestingMomentsPoints[c][d];a++}}if(e!=undefined&&!ReplayAnalytics.app.isIMGraphRunning){ReplayAnalytics.app.isIMGraphRunning=true;this.getApplication().getController("Playback").pauseFunction();this.showIMFoundCallout(c,e)}else{ReplayAnalytics.app.isIMGraphRunning=false}}if(!ReplayAnalytics.app.isIMGraphRunning&&f){ReplayAnalytics.app.getController("Playback").resumeLastPlaybackAction()}},handleManualIMsForChart:function(b,c,a){if(c<ReplayAnalytics.app.currentManualIMs.length){if(ReplayAnalytics.app.currentManualIMs[c]!=undefined){this.showManualIMCallout(b,ReplayAnalytics.app.currentManualIMs[c],c,a)}}else{this.checkForAutoIMs(b,a,true)}},showManualIMCallout:function(l,f,g,p){var n=Ext.ComponentQuery.query("panel"+l)[0];var d=n.element.getWidth(),q=n.element.getHeight();var o=n.element.getX(),m=n.element.getY();var c=o+d*0.1,b=m;var h='<div align="center" style="color:black; font-size: 12px; padding: 30px; padding-left: 20px;">'+f.imMessage+"</div>";var a="background-image: url(lib/images/callout-image-inverted.png); background-color: transparent; padding-left:12px; background-size: 100%;";if(g%2==1){b=(m+q)-135;h='<div align="center" style="color:black; font-size: 12px; padding: 30px; padding-left: 20px; padding-top: 60px;">'+f.imMessage+"</div>";a="background-image: url(lib/images/callout-image-inverted-flipped.png); background-color: transparent; padding-left:12px; background-size: 100%"}this.getManualIMCallout().setStyle(a);this.getManualIMCallout().show();this.getManualIMCallout().element.setXY(c,b);this.getManualIMCallout().setHtml(h);var e=Ext.create("Ext.util.DelayedTask",function(){e.cancel();g++;this.handleManualIMsForChart(l,g,p)},this);e.delay(2000)},showIMFoundCallout:function(f,m){var h=Ext.ComponentQuery.query("panel"+f)[0];var c=h.element.getWidth(),n=h.element.getHeight();var l=h.element.getX(),g=h.element.getY();var b=l+c*0.6,a=g+n*0.2;this.getImFoundDialog().show();this.getImFoundDialog().element.setXY(b,g);var e='<div align="center" style="color:black; font-size: 12px; padding: 30px; padding-left: 20px;">Found an interesting moment. '+m.Message+"</div>";this.getImFoundDialog().setHtml(e);var d=Ext.create("Ext.util.DelayedTask",function(){d.cancel();this.getImFoundDialog().hide();this.initInterestingMomentGraph(m)},this);d.delay(ReplayAnalytics.app.replaySpeed)},initInterestingMomentGraph:function(a){ReplayAnalytics.app.previousActivePanelIndex=ReplayAnalytics.app.currentActivePanelIndex;this.showInterestingMomentGraphPanel();this.getManualIMCallout().hide();ReplayAnalytics.app.activeIMPoint=a;this.showIMTrendingGraphForIMPoint(a,ReplayAnalytics.app.interestingMomentGraphIndex);this.handleButtonsAndTextForIMPointIndex(true)},showIMTrendGraph:function(){ReplayAnalytics.app.currentActivePanelIndex=ReplayAnalytics.app.previousActivePanelIndex;this.showIMTrendingGraphForIMPoint(ReplayAnalytics.app.allIMPointsAtCurrentIndex[ReplayAnalytics.app.activeIMPointIndex],ReplayAnalytics.app.interestingMomentGraphIndex);this.handleButtonsAndTextForIMPointIndex(true)},handleButtonsAndTextForIMPointIndex:function(a){if(a){Ext.ComponentQuery.query("slider"+ReplayAnalytics.app.interestingMomentGraphIndex)[0].hide();var b="Interesting Moment "+(ReplayAnalytics.app.activeIMPointIndex+1)+" of "+ReplayAnalytics.app.allIMPointsAtCurrentIndex.length;this.getInterestingMomentGraphTitleBar().setTitle(b);this.getShowIMReplayGraph().show();this.getShowTrendGraph().hide();this.getPreviousIMTrend().show();this.getNextIMTrend().show();if(ReplayAnalytics.app.allIMPointsAtCurrentIndex!=undefined&&ReplayAnalytics.app.allIMPointsAtCurrentIndex.length>0){if(ReplayAnalytics.app.activeIMPointIndex>0&&ReplayAnalytics.app.activeIMPointIndex<(ReplayAnalytics.app.allIMPointsAtCurrentIndex.length-1)){this.getPreviousIMTrend().setDisabled(false);this.getNextIMTrend().setDisabled(false)}else{if(ReplayAnalytics.app.activeIMPointIndex==0&&((ReplayAnalytics.app.allIMPointsAtCurrentIndex.length-1)==0)){this.getPreviousIMTrend().setDisabled(true);this.getNextIMTrend().setDisabled(true)}else{if(ReplayAnalytics.app.activeIMPointIndex==(ReplayAnalytics.app.allIMPointsAtCurrentIndex.length-1)){this.getPreviousIMTrend().setDisabled(false);this.getNextIMTrend().setDisabled(true)}else{if(ReplayAnalytics.app.activeIMPointIndex==0){this.getPreviousIMTrend().setDisabled(true);this.getNextIMTrend().setDisabled(false)}}}}}}else{this.getInterestingMomentGraphTitleBar().setTitle("Interesting Moment");this.getShowIMReplayGraph().hide();this.getShowTrendGraph().show();this.getPreviousIMTrend().hide();this.getNextIMTrend().hide()}},showNextIMTrend:function(){var a=ReplayAnalytics.app.activeIMPointIndex;if(a<(ReplayAnalytics.app.allIMPointsAtCurrentIndex.length-1)){a=a+1}ReplayAnalytics.app.activeIMPointIndex=a;this.showIMTrendGraph()},showPreviousIMTrend:function(){var a=ReplayAnalytics.app.activeIMPointIndex;if(a>0){a=a-1}ReplayAnalytics.app.activeIMPointIndex=a;this.showIMTrendGraph()},showIMReplayGraph:function(){if(ReplayAnalytics.app.currentActivePanelIndex==0){this.loadChartSettingForReplayGraphInGlobalSyncMode()}var f=ReplayAnalytics.app.interestingMomentGraphIndex;this.handleButtonsAndTextForIMPointIndex(false);var g=ReplayAnalytics.app.granularities[ReplayAnalytics.app.currentActivePanelIndex];if(g=="Hourly"){Ext.Msg.alert("ReplayAnalytics &#153;","Already on lowest granularity. No data available to display.",Ext.emptyFn)}else{showLoadingMask();ReplayAnalytics.app.databaseSetting[f]=ReplayAnalytics.app.databaseSetting[ReplayAnalytics.app.currentActivePanelIndex];ReplayAnalytics.app.graphTitle[f]="Interesting Moment";ReplayAnalytics.app.xs[f]=ReplayAnalytics.app.xs[ReplayAnalytics.app.currentActivePanelIndex];ReplayAnalytics.app.ys[f]=ReplayAnalytics.app.ys[ReplayAnalytics.app.currentActivePanelIndex];ReplayAnalytics.app.sizeBys[f]=ReplayAnalytics.app.sizeBys[ReplayAnalytics.app.currentActivePanelIndex];ReplayAnalytics.app.granularities[f]=ReplayAnalytics.app.granularities[ReplayAnalytics.app.currentActivePanelIndex];ReplayAnalytics.app.chartTypes[f]=ReplayAnalytics.app.chartTypes[ReplayAnalytics.app.currentActivePanelIndex];ReplayAnalytics.app.groupBys[f]=ReplayAnalytics.app.groupBys[ReplayAnalytics.app.currentActivePanelIndex];ReplayAnalytics.app.startDate[f]=ReplayAnalytics.app.startDate[ReplayAnalytics.app.currentActivePanelIndex];ReplayAnalytics.app.currentStartDate[f]=ReplayAnalytics.app.currentStartDate[ReplayAnalytics.app.currentActivePanelIndex];ReplayAnalytics.app.currentDate[f]=ReplayAnalytics.app.currentDate[ReplayAnalytics.app.currentActivePanelIndex];ReplayAnalytics.app.currentEndDate[f]=ReplayAnalytics.app.currentEndDate[ReplayAnalytics.app.currentActivePanelIndex];ReplayAnalytics.app.accumulate[f]=ReplayAnalytics.app.accumulate[ReplayAnalytics.app.currentActivePanelIndex];ReplayAnalytics.app.XmaxReceived[f]=false;ReplayAnalytics.app.YmaxReceived[f]=false;ReplayAnalytics.app.previousActivePanelIndex=ReplayAnalytics.app.currentActivePanelIndex;ReplayAnalytics.app.currentActivePanelIndex=f;switch(ReplayAnalytics.app.granularities[ReplayAnalytics.app.currentActivePanelIndex]){case"Hourly":ReplayAnalytics.app.granularities[ReplayAnalytics.app.currentActivePanelIndex]="Hourly";ReplayAnalytics.app.valueGranularities[ReplayAnalytics.app.currentActivePanelIndex]=1;break;case"Daily":ReplayAnalytics.app.granularities[ReplayAnalytics.app.currentActivePanelIndex]="Hourly";ReplayAnalytics.app.valueGranularities[ReplayAnalytics.app.currentActivePanelIndex]=1;break;case"Weekly":ReplayAnalytics.app.granularities[ReplayAnalytics.app.currentActivePanelIndex]="Daily";ReplayAnalytics.app.valueGranularities[ReplayAnalytics.app.currentActivePanelIndex]=2;break;case"Monthly":ReplayAnalytics.app.granularities[ReplayAnalytics.app.currentActivePanelIndex]="Weekly";ReplayAnalytics.app.valueGranularities[ReplayAnalytics.app.currentActivePanelIndex]=3;break}var d=ReplayAnalytics.app.chartTypes[f];var h=ReplayAnalytics.app.granularities[f];if(d=="line"||d=="verticalbar"){var c=ReplayAnalytics.app.xs[f];ReplayAnalytics.app.xs[f]=interestingMomentController.getNewAxisForTimeAxisOption(c,h)}else{if(d=="horizontalbar"){var c=ReplayAnalytics.app.ys[f];ReplayAnalytics.app.ys[f]=interestingMomentController.getNewAxisForTimeAxisOption(c,h)}}var e=Ext.ComponentQuery.query("slider"+ReplayAnalytics.app.previousActivePanelIndex)[0].getValue();var a=Math.floor(e/ReplayAnalytics.app.differentialMultiplier[ReplayAnalytics.app.previousActivePanelIndex]);var b=ReplayAnalytics.app.previousActivePanelIndex;if(b==0){b=ReplayAnalytics.app.allIMPointsAtCurrentIndex[ReplayAnalytics.app.activeIMPointIndex].ChartIndex;a=ReplayAnalytics.app.globalSyncChartPositions[a][b]}if(a==0){imStartDate=ReplayAnalytics.app.globalDateArray[b][a]}else{imStartDate=ReplayAnalytics.app.globalDateArray[b][a-1]}imEndDate=ReplayAnalytics.app.globalDateArray[b][a];ReplayAnalytics.app.startDate[f]=new Date(imStartDate);ReplayAnalytics.app.currentEndDate[f]=new Date(imEndDate);ReplayAnalytics.app.dateSet[ReplayAnalytics.app.currentActivePanelIndex]=true;Ext.ComponentQuery.query("slider"+f)[0].show();this.getApplication().getController("Main").chartSetUp()}},showIMTrendingGraphForIMPoint:function(l,m){var h=Ext.ComponentQuery.query("chart[id=chart"+m+"]")[0];if(h!=undefined){h.destroy()}var f=l.IMTrendData;if(f==undefined){this.getInterestingMomentGraphPanel().setHtml('<div align="center" style="font-size: 13px; padding:10px;">'+l.Message+", "+l.Details+"<br />No additional data available to display.</div>");return}var c=f.xAxis;var b=f.yAxis;var e=f.data;var d=parseInt(f.yMax);var a=parseInt(f.trendStartIndex);var g=parseInt(f.trendEndIndex);d=d+d*0.1;ReplayAnalytics.app.newChart[m]=Ext.create("Ext.chart.CartesianChart",{id:"chart"+m,store:{fields:[c,b],data:e,},renderTo:Ext.getBody(),flex:1,shadow:true,autoShow:true,flipXY:false,axes:[{type:"numeric",position:"left",style:{strokeStyle:"white",shadowColor:"black",},label:{fontFamily:"Helvetica",color:"#4270A2"},fields:b,minimum:0,maximum:d,title:{text:b,strokeStyle:"#4270A2",fillStyle:"#4270A2",shadowColor:"black",},},{type:"category",position:"bottom",label:{fontFamily:"Helvetica",color:"#4270A2",rotate:{degrees:315}},fields:c,style:{strokeStyle:"white",shadowColor:"black",},title:{text:c,strokeStyle:"#4270A2",fillStyle:"#4270A2",shadowColor:"black",},}],series:[{type:"bar",xField:c,yField:b,axis:"left",highlight:true,showInLegend:false,shadow:true,animate:{duration:ReplayAnalytics.app.animateSpeed,delay:ReplayAnalytics.app.animateSpeed/2,easing:"ease"},style:{stroke:"rgb(40,40,40)",renderer:function(p,q,n,o){p.fillStyle="#115fa6";if(o>=a&&o<=g){p.fillStyle="#a61114"}return p}},}]});this.getInterestingMomentGraphPanel().setHtml('<div align="center" style="font-size: 13px; padding:10px;">'+l.Message+", "+l.Details+"</div>");this.getInterestingMomentGraphPanel().add(ReplayAnalytics.app.newChart[m])},addIMListToCarousel:function(b){var e=Ext.ComponentQuery.query("carousel[id=carousel"+b+"]")[0];if(ReplayAnalytics.app.interestingMomentsPoints[b]!=undefined&&ReplayAnalytics.app.interestingMomentsPoints[b].length!=0){var d=developerMode;var a=new Ext.XTemplate('<div style="font-size: 14px;">','<tpl if="'+d+" == "+true+'">',"At position {Index}, ","</tpl>",'{StartDate} - {EndDate}</div><br/><div style="font-size: 15px;"><b>{Message}</b><br />{Details}</div>');var c=Ext.create("Ext.Panel",{fullscreen:true,flex:1,id:"imlistpanel"+b,layout:"fit",cls:"rounded-panel",items:[{xtype:"toolbar",maxHeight:"35px",docked:"top",title:"Interesting Moments",cls:"toolbar-alternate",},{xtype:"list",ui:"round",store:{fields:["Index","Type","Message","Details","StartDate","EndDate"],data:ReplayAnalytics.app.interestingMomentsPoints[b],},itemTpl:a,}],});e.add(c)}else{var c=Ext.create("Ext.Panel",{fullscreen:true,flex:1,id:"imlistpanel"+b,layout:"fit",cls:"rounded-panel",items:[{xtype:"toolbar",maxHeight:"35px",docked:"top",title:"Interesting Moments",cls:"toolbar-alternate",},{html:'<div align="center" style="color: black; padding: 30px;">No Interesting Moment Points found for this graph.</div>'}],});e.add(c)}},addIMCommentListToCarousel:function(b){var g=Ext.ComponentQuery.query("carousel[id=carousel"+b+"]")[0];this.getAllManualIMsForCurrentChart();if(ReplayAnalytics.app.currentChartManualIMs!=undefined&&ReplayAnalytics.app.currentChartManualIMs.length>0){var c=0;if(ReplayAnalytics.app.currentUserSession!=undefined){c=ReplayAnalytics.app.currentUserSession.userId}var d=developerMode;var a=new Ext.XTemplate('<div class="deleteplaceholder" style="float: right;"></div>','<tpl if="authorId != '+c+'">','<div style="float: right;"><img src="lib/images/lock-icon.png" width="25px" height="25px" /></div>',"</tpl>",'<tpl if="authorId == '+c+'">','<div id="delete" style="float: right;"><img class="delete-icon" id="delete" src="lib/images/delete-red-icon.png" width="25px" height="25px" /></div>',"</tpl>",'<div style="font-size: 16px; font-weight: bold;">{imMessage}</div>','<div style="font-size: 13px;">At {dateCreated} by {authorName}','<tpl if="'+d+" == "+true+'">',", at position {imIndex}","</tpl>","</div>");var f=Ext.create("Ext.Panel",{fullscreen:true,flex:1,id:"imcommentlistpanel"+b,layout:"fit",cls:"rounded-panel",items:[{xtype:"toolbar",maxHeight:"35px",docked:"top",title:"Replay Comments",cls:"toolbar-alternate",},{xtype:"list",id:"imcommentlist"+b,ui:"round",store:{fields:["id","imIndex","dateCreated","imMessage","authorName","authorId"],data:ReplayAnalytics.app.currentChartManualIMs,},itemTpl:a,}],});var e=Ext.ComponentQuery.query("list[id=imcommentlist"+b+"]")[0];e.on("itemtap",function(o,m,p,h,l,n){var q=l.target;if(q.id=="delete"){interestingMomentController.deleteManualIM(h,o)}});g.add(f)}else{var f=Ext.create("Ext.Panel",{fullscreen:true,flex:1,id:"imcommentlistpanel"+b,layout:"fit",cls:"rounded-panel",items:[{xtype:"toolbar",maxHeight:"35px",docked:"top",title:"Replay Comments",cls:"toolbar-alternate",},{html:'<div align="center" style="color: black; padding: 30px;">No Replay Comments found for this graph.</div>'}],});g.add(f)}},addChartDataTableToCarousel:function(b){var a="";try{if(ReplayAnalytics.app.panelData[ReplayAnalytics.app.currentActivePanelIndex]!=undefined){if(ReplayAnalytics.app.groupBys[ReplayAnalytics.app.currentActivePanelIndex]=="none"||ReplayAnalytics.app.chartTypes[ReplayAnalytics.app.currentActivePanelIndex]=="pie"){a=this.getDataInTable(Ext.JSON.decode(ReplayAnalytics.app.panelData[ReplayAnalytics.app.currentActivePanelIndex]))}else{a=this.getGroupDataInTable(Ext.JSON.decode(ReplayAnalytics.app.panelData[ReplayAnalytics.app.currentActivePanelIndex]))}}else{a='<div style="color: black; padding: 20px;">Panel not configured yet.</div>'}}catch(d){logInfo("Error getting DataInTable--"+d)}var e=Ext.ComponentQuery.query("carousel[id=carousel"+b+"]")[0];if(a!=undefined&&a!=""){var c=Ext.create("Ext.Panel",{fullscreen:true,flex:1,id:"chartdatatablepanel"+b,layout:"vbox",defaults:{styleHtmlContent:true},scrollable:{direction:"both",directionLock:true},cls:"rounded-panel",items:[{xtype:"toolbar",maxHeight:"35px",docked:"top",title:"Chart Data Table",cls:"toolbar-alternate",},{html:'<div align="center" style="padding: 10px;">'+a+"</div>",}],});e.add(c)}else{logInfo("DataInTable is null--")}},deleteManualIM:function(a,b){var c=a.data.id;Ext.Msg.show({title:"Delete",message:"Are you sure you want to delete this comment?",width:300,buttons:Ext.MessageBox.YESNO,fn:function(d){if(d=="yes"){showLoadingMask();Ext.Ajax.request({url:"deleteManualIM.do",method:"POST",params:{userId:ReplayAnalytics.app.currentUserSession.userId,dashboardId:ReplayAnalytics.app.currentDashboard.dashboardId,manualIMId:c,},success:interestingMomentController.handleManualIMDelete,failure:function(e){hideLoadingMask();logMessage("Failure Deleting manual im comment.")},});a.stores[0].remove(a)}}})},handleManualIMDelete:function(a){hideLoadingMask();var c=Ext.JSON.decode(a.responseText);if(c!=undefined){Ext.Msg.alert("ReplayAnalytics &#153;",c.description,Ext.emptyFn);if(c.dashboard!=undefined){ReplayAnalytics.app.currentDashboard=c.dashboard;for(i=0;i<ReplayAnalytics.app.userDashboardDetails.length;i++){if(ReplayAnalytics.app.userDashboardDetails[i].dashboardId==c.dashboard.dashboardId){ReplayAnalytics.app.userDashboardDetails[i]=c.dashboard}}try{var b=ReplayAnalytics.app.currentActivePanelIndex;var e=Ext.ComponentQuery.query("carousel[id=carousel"+b+"]")[0];e.removeAt(e.getItems().items.length-1);interestingMomentController.addIMCommentListToCarousel(b);e.setActiveItem(e.getItems().items.length)}catch(d){}}}},getDataInTable:function(b){var c='<table border="1" class="table-style">';c=c+"<tr>";c=c+'<th class="table-header">Date/Time</th>';for(row=0;row<b.data[0].data.length;row++){c=c+'<th class="table-header">'+b.data[0].data[row][b.categoryField]+"</th>"}c=c+"</tr>";for(col=0;col<b.dateArray.length;col++){var a="cell-style-alternate";if(col%2==0){a="cell-style"}c=c+"<tr>";c=c+'<td class="'+a+'">'+b.dateArray[col]+"</td>";for(row1=0;row1<b.data[0].data.length;row1++){c=c+'<td class="'+a+'">'+Ext.util.Format.number(b.data[col].data[row1][b.dataField],"00,000")+"</td>"}c=c+"</tr>"}c=c+"</table>";return c},getGroupDataInTable:function(b){var c='<table border="1" class="table-style">';c=c+"<tr>";c=c+'<th class="table-header">Date/Time</th>';for(row=0;row<b.data[0].data.length;row++){c=c+'<th class="table-header">'+b.data[0].data[row][b.categoryField]+"</th>"}c=c+"</tr>";for(col=0;col<b.dateArray.length;col++){var a="cell-style-alternate";if(col%2==0){a="cell-style"}c=c+"<tr>";c=c+'<td class="'+a+'">'+b.dateArray[col]+"</td>";for(row=0;row<b.data[0].data.length;row++){c=c+'<td class="'+a+'">'+this.getTableForGroupBy(b,b.data[col].data)+"</td>"}c=c+"</tr>"}c=c+"</table>";return c},getTableForGroupBy:function(d,e){var b="<table>";var c=true;if(this.isTimeAxisOption(ReplayAnalytics.app.dataFieldValues[ReplayAnalytics.app.currentActivePanelIndex])||this.isTimeAxisOption(ReplayAnalytics.app.categoryFieldValues[ReplayAnalytics.app.currentActivePanelIndex])){c=false}var a="others";for(innerow=1;innerow<e.length;innerow++){if(innerow==1){b=b+"<tr>";b=b+"<td>"+d.groupByBarArray[0]+"</td>";b=b+"<td>"+Ext.util.Format.number(d.data[0].data[0].groupByBar1,"00,000")+"</td>";b=b+"</tr>"}else{if(innerow==2){b=b+"<tr>";b=b+"<td>"+d.groupByBarArray[1]+"</td>";b=b+"<td>"+Ext.util.Format.number(d.data[0].data[0].groupByBar2,"00,000")+"</td>";b=b+"</tr>"}else{if(innerow==3){b=b+"<tr>";b=b+"<td>"+d.groupByBarArray[2]+"</td>";b=b+"<td>"+Ext.util.Format.number(d.data[0].data[0].groupByBar3,"00,000")+"</td>";b=b+"</tr>"}else{if(innerow==4){b=b+"<tr>";b=b+"<td>"+d.groupByBarArray[3]+"</td>";b=b+"<td>"+Ext.util.Format.number(d.data[0].data[0].groupByBar4,"00,000")+"</td>";b=b+"</tr>"}else{if(row==5&&c){b=b+"<tr>";b=b+"<td>"+a+"</td>";b=b+"<td>"+Ext.util.Format.number(d.data[0].data[0][a],"00,000")+"</td>";b=b+"</tr>"}}}}}}b=b+"</table>";return b},checkForGlobalSyncIMs:function(b,d,c,e,a){if(ReplayAnalytics.app.replayCommentsSetting=="On"&&ReplayAnalytics.app.globalManualIMs!=undefined&&b<=ReplayAnalytics.app.globalManualIMs.length){if(d<5){if(ReplayAnalytics.app.globalManualIMs[b][d]!=undefined&&ReplayAnalytics.app.globalManualIMs[b][d].length>0&&c<ReplayAnalytics.app.globalManualIMs[b][d].length){this.getApplication().getController("Playback").pauseFunction();this.showManualIMGlobalSync(b,d,c,ReplayAnalytics.app.globalManualIMs[b][d][c],true,false)}else{this.checkForGlobalSyncIMs(b,d+1,0,e,a)}}else{if(ReplayAnalytics.app.interestingMoments=="On"){this.checkForGlobalSyncAutoIMs(b,e,a)}}}else{if(ReplayAnalytics.app.interestingMoments=="On"){this.checkForGlobalSyncAutoIMs(b,e,a)}}},checkForGlobalSyncAutoIMs:function(b,c,a){this.getManualIMCallout().hide();if(ReplayAnalytics.app.interestingMomentsPoints[0]!=undefined&&b<=ReplayAnalytics.app.interestingMomentsPoints[0].length&&ReplayAnalytics.app.interestingMomentsPoints[0][b]!=undefined){for(j=1;j<5;j++){if(ReplayAnalytics.app.interestingMomentsPoints[0][b][j]!=undefined&&ReplayAnalytics.app.interestingMomentsPoints[0][b][j].length>0){a=true;this.getApplication().getController("Playback").pauseFunction();this.showGlobalSyncIMFoundCallout(b,j,ReplayAnalytics.app.interestingMomentsPoints[0][b][j][0]);return}}}if(c&&!a){ReplayAnalytics.app.getController("Playback").resumeLastPlaybackAction()}},getAllGlobalSyncAutoIMsForCurrentSliderPosition:function(a){ReplayAnalytics.app.allIMPointsAtCurrentIndex=new Array();for(i=1;i<5;i++){for(j=0;j<ReplayAnalytics.app.interestingMomentsPoints[0][a][i].length;j++){var b=ReplayAnalytics.app.interestingMomentsPoints[0][a][i][j];b.ChartIndex=i;ReplayAnalytics.app.allIMPointsAtCurrentIndex.push(b)}}},showManualIMGlobalSync:function(h,m,l,g){try{var q=Ext.ComponentQuery.query("panel"+m)[0];var d=q.element.getWidth(),s=q.element.getHeight();var r=q.element.getX(),p=q.element.getY();var c=r+d*0.1,b=p;var n='<div style="color:black; font-size: 12px; padding: 30px;">'+g.imMessage+"</div>";var a="background-image: url(lib/images/callout-image-inverted.png); background-color: transparent; padding-left:12px; background-size: 100%;";if(l%2==1){b=(p+s)-135;n='<div style="color:black; font-size: 12px; padding: 30px; padding-top: 50px;">'+g.imMessage+"</div>";a="background-image: url(lib/images/callout-image-inverted-flipped.png); background-color: transparent; padding-left:12px; background-size: 100%"}this.getManualIMCallout().setStyle(a);this.getManualIMCallout().show();this.getManualIMCallout().element.setXY(c,b);this.getManualIMCallout().setHtml(n);var f=Ext.create("Ext.util.DelayedTask",function(){f.cancel();l++;this.checkForGlobalSyncIMs(h,m,l)},this);f.delay(2000)}catch(o){}},showGlobalSyncIMFoundCallout:function(e,o,m){var h=Ext.ComponentQuery.query("panel"+o)[0];var c=h.element.getWidth(),n=h.element.getHeight();var l=h.element.getX(),g=h.element.getY();var b=l+c*0.6,a=g+n*0.2;this.getImFoundDialog().show();this.getImFoundDialog().element.setXY(b,g);var f='<div style="color:black; font-size: 12px; padding: 30px;">Found an interesting moment. '+m.Message+"</div>";this.getImFoundDialog().setHtml(f);var d=Ext.create("Ext.util.DelayedTask",function(){d.cancel();this.getImFoundDialog().hide();this.getAllGlobalSyncAutoIMsForCurrentSliderPosition(e);this.initInterestingMomentGraph(m)},this);d.delay(ReplayAnalytics.app.replaySpeed)},loadChartSettingForReplayGraphInGlobalSyncMode:function(){var a=ReplayAnalytics.app.allIMPointsAtCurrentIndex[ReplayAnalytics.app.activeIMPointIndex].ChartIndex;ReplayAnalytics.app.databaseSetting[0]=ReplayAnalytics.app.databaseSetting[a];ReplayAnalytics.app.xs[0]=ReplayAnalytics.app.xs[a];ReplayAnalytics.app.ys[0]=ReplayAnalytics.app.ys[a];ReplayAnalytics.app.sizeBys[0]=ReplayAnalytics.app.sizeBys[a];ReplayAnalytics.app.granularities[0]=ReplayAnalytics.app.granularities[a];ReplayAnalytics.app.chartTypes[0]=ReplayAnalytics.app.chartTypes[a];ReplayAnalytics.app.groupBys[0]=ReplayAnalytics.app.groupBys[a];ReplayAnalytics.app.startDate[0]=ReplayAnalytics.app.startDate[a];ReplayAnalytics.app.currentStartDate[0]=ReplayAnalytics.app.currentStartDate[a];ReplayAnalytics.app.currentDate[0]=ReplayAnalytics.app.currentDate[a];ReplayAnalytics.app.currentEndDate[0]=ReplayAnalytics.app.currentEndDate[a];ReplayAnalytics.app.accumulate[0]=ReplayAnalytics.app.accumulate[a]},});var databaseTableController;Ext.define("ReplayAnalytics.controller.DatabaseTable",{extend:"Ext.app.Controller",xtype:"databasetablecontroller",config:{refs:{loginController:"logincontroller",mainController:"maincontroller",databaseSetting:"selectfield[id=databaseselectfield]",chartTypeSetting:"selectfield[label=Chart Type:]",},control:{databaseSetting:{change:"getDatabaseTableFieldsForDatabase",},},},launch:function(){databaseTableController=this;this.getDatabaseSetting().element.on("tap",function(a){databaseTableController.applyStyleForAddDatSourceOption()})},applyStyleForAddDatSourceOption:function(){try{var a=Ext.query("div div span[class=x-list-label]");if(a!=undefined&&a.length>0&&a[0].innerHTML=="+ Import Data"){a[0].parentElement.parentElement.setAttribute("style","background-color: #6c9804; background-image: -webkit-linear-gradient(top, #a2e306, #7eb105 3%, #5b7f03); border: 1px solid #263501; border-top-color: #374e02; margin: 5px 53px; border-radius: 5px; width: 200px; text-align: center;");a[0].innerHTML='<img src="lib/images/spreadsheet_icon.png" style="width: 20px; height: 20px;" /> Import Data'}}catch(b){}},getAllDatabaseTables:function(){if(ReplayAnalytics.app.CachedDatabaseTables.length==0){showLoadingMask();Ext.Ajax.request({url:"getAllDatabaseTables.do",method:"GET",success:function(a){hideLoadingMask();var b=Ext.JSON.decode(a.responseText.trim());ReplayAnalytics.app.CachedDatabaseTables=b;databaseTableController.decodeDatabaseTableData(b)},failure:function(a){hideLoadingMask();logMessage("Failure Logging in.")},})}else{databaseTableController.decodeDatabaseTableData(ReplayAnalytics.app.CachedDatabaseTables)}},decodeDatabaseTableData:function(c){ReplayAnalytics.app.DatabaseTableFieldStore=new Array();var a={text:"+ Import Data",value:"add_new_data_source"};ReplayAnalytics.app.DatabaseTableFieldStore.push(a);a={text:"None Defined",value:"none"};ReplayAnalytics.app.DatabaseTableFieldStore.push(a);for(var b=0;b<c.length;b++){a={text:c[b].name,value:c[b].tableName};ReplayAnalytics.app.DatabaseTableFieldStore.push(a)}this.getApplication().getController("Settings").configureSettingsPanel()},getDatabaseTableIdForTableName:function(a){var c=0;if(ReplayAnalytics.app.CachedDatabaseTables!=undefined&&ReplayAnalytics.app.CachedDatabaseTables.length>0){for(var b=0;b<ReplayAnalytics.app.CachedDatabaseTables.length;b++){if(ReplayAnalytics.app.CachedDatabaseTables[b].tableName==a){c=ReplayAnalytics.app.CachedDatabaseTables[b].id;return c}}}return c},saveDatabaseTablesFieldsForDatabaseTableId:function(c,b){if(ReplayAnalytics.app.CachedDatabaseTables!=undefined&&ReplayAnalytics.app.CachedDatabaseTables.length>0){for(var a=0;a<ReplayAnalytics.app.CachedDatabaseTables.length;a++){if(ReplayAnalytics.app.CachedDatabaseTables[a].id==c){break}}ReplayAnalytics.app.CachedDatabaseTables[a].tableFields=b}},getDatabaseTablesFieldsForDatabaseTableId:function(b){if(ReplayAnalytics.app.CachedDatabaseTables!=undefined&&ReplayAnalytics.app.CachedDatabaseTables.length>0){for(var a=0;a<ReplayAnalytics.app.CachedDatabaseTables.length;a++){if(ReplayAnalytics.app.CachedDatabaseTables[a].id==b){return ReplayAnalytics.app.CachedDatabaseTables[a].tableFields}}}return undefined},getDatabaseTableFieldsForDatabase:function(){var b=this.getDatabaseSetting().getValue();if(b=="add_new_data_source"){this.getApplication().getController("Admin").showDataSourceUploadFlow();this.getApplication().getController("Settings").getSettingsPanel().hide();return}else{if(b!="none"){var c=this.getDatabaseTableIdForTableName(b);var a=this.getDatabaseTablesFieldsForDatabaseTableId(c);if(a!=undefined&&a!=""){this.decodeDatabaseTableFieldsData(a)}else{showLoadingMask();Ext.Ajax.request({url:"getAllDatabaseTableFieldsForTable.do",method:"POST",params:{databaseTableId:c,},success:function(d){hideLoadingMask();var e=Ext.JSON.decode(d.responseText.trim());databaseTableController.saveDatabaseTablesFieldsForDatabaseTableId(c,e);databaseTableController.decodeDatabaseTableFieldsData(e)},failure:function(d){hideLoadingMask();logMessage("Failure Logging in.")},})}}}},decodeDatabaseTableFieldsData:function(e){var g=new Array();var c=new Array();var a=new Array();var f=new Array();var b={text:"None Defined",value:"none"};g.push(b);c.push(b);for(var d=0;d<e.length;d++){b={text:e[d].fieldLabel,value:e[d].fieldName};if(e[d].fieldType=="DATA_FIELD"){g.push(b)}else{if(e[d].fieldType=="CATEGORY_FIELD"){c.push(b)}else{if(e[d].fieldType=="TIME_CATEGORY_FIELD"){f.push(b)}}}}for(var d=0;d<c.length;d++){a.push(c[d])}for(var d=0;d<f.length;d++){a.push(f[d])}var h=ReplayAnalytics.app.currentActivePanelIndex;ReplayAnalytics.app.PanelDataFieldStore[h]=g;ReplayAnalytics.app.PanelCategoryFieldStore[h]=c;ReplayAnalytics.app.PanelCategoryFieldStoreWithTime[h]=a;this.getApplication().getController("Settings").showConfiguredSettingsPanel()},cacheDatabaseTableDataForDashboard:function(a){var b=new Array();for(var c=0;c<a.length;c++){if(c==0){b.push(a[c])}else{var d=false;for(var e=0;e<b.length;e++){if(b[e]==a[c]){d=true;break}}if(!d){b.push(a[c])}}}if(b.length>0){showLoadingMask();Ext.Ajax.request({url:"getAllDatabaseTablesDataForCaching.do",method:"POST",params:{databasesToCache:new Array(a),},success:function(f){hideLoadingMask();var g=Ext.JSON.decode(f.responseText.trim());ReplayAnalytics.app.CachedDatabaseTables=g;loginController.showMainScreen()},failure:function(f){hideLoadingMask();logMessage("Failure Caching data")},})}else{loginController.showMainScreen()}},});var adminController;Ext.define("ReplayAnalytics.controller.Admin",{extend:"Ext.app.Controller",xtype:"admincontroller",requires:["Ext.ux.Fileup"],config:{refs:{loginController:"logincontroller",mainController:"maincontroller",loginScreen:"loginscreen",adminPanel:"adminpanel",dashboardScreen:"dashboardscreen",dashboardGrid:"panel[id=dashboardgrid]",mainScreen:"replayanalyticsmain",adminButton:"button[id=adminbutton]",goBackButtonAdmin:"button[id=gobackbuttonadmin]",dataSourceUpload:"fileupload[id=fileuploadbutton]",dataSourceUploadPanel:"datasourceuploadpanel",dataSourceTypeSelectionPanel:"datasourcetypeselectionpanel",dataSourceUploadMessage:"label[id=fileuploadmessage]",doneDataSourceTypeSelectionButton:"button[id=donedatasourcetypeselectionbutton]",doneDataSourceUploadButton:"button[id=donedatasourceuploadbutton]",dataSourceConfigurationPanel:"datasourceconfigurationpanel",doneDataSourceConfigureButton:"button[id=donedatasourceconfigurebutton]",dataSourceNameField:"textfield[id=datasourcenamefield]",dataSourceTableFieldContainer:"panel[id=tablefieldscontainer]",dataSourceSelectedType:"selectfield[id=datasourcetypeselectfield]",addDataSourceFieldButton:"button[id=adddatasourcefieldmanualbutton]",cancelDataSourceUploadButton:"button[id=canceldatasourceuploadbutton]",cancelDataSourceConfigurationButton:"button[id=canceldatasourceconfigurationebutton]",selectedFileNameLabel:"label[id=selectedfilenamelabel]",manageDataSourcesButton:"button[id=managedatasourcesbutton]",dataSourceManagePanel:"datasourcemanagepanel",addDataSourceManagePanelButton:"button[id=adddatasourcemanagepanelbutton]",deleteDataSourceManagePanelButton:"button[id=deletedatasourcemanagepanelbutton]",editDataSourceManagePanelButton:"button[id=editdatasourcemanagepanelbutton]",closeDataSourceManagePanelButton:"button[id=closedatasourcemanagepanelbutton]",dataSourceDeletePanel:"datasourcedeletepanel",cancelDataSourceDeletePanelButton:"button[id=canceldatasourcedeletepanelbutton]",confirmDataSourceDeletePanelButton:"button[id=confirmdatasourcedeletepanelbutton]",dataSourceDeletePanelContainer:"container[id=datasourcedeletepanelcontainer]",},control:{adminButton:{tap:"showAdminPanel"},goBackButtonAdmin:{tap:"goBackToDashboardScreen"},doneDataSourceTypeSelectionButton:{tap:"doneDataSourceTypeSelection"},doneDataSourceUploadButton:{tap:"doneDataSourceUpload",},doneDataSourceConfigureButton:{tap:"doneDataSourceConfigure"},addDataSourceFieldButton:{tap:"addDataSourceField"},cancelDataSourceConfigurationButton:{tap:"cancelDataSourceConfiguration"},cancelDataSourceUploadButton:{tap:"cancelDataSourceUpload"},manageDataSourcesButton:{tap:"showManageDataSourcePanel"},addDataSourceManagePanelButton:{tap:"addDataSourceManagePanel"},deleteDataSourceManagePanelButton:{tap:"deleteDataSourceManagePanel"},editDataSourceManagePanelButton:{tap:"editDataSourceManagePanel"},closeDataSourceManagePanelButton:{tap:"closeDataSourceManagePanel"},cancelDataSourceDeletePanelButton:{tap:"cancelDataSourceDeletePanel"},confirmDataSourceDeletePanelButton:{tap:"confirmDataSourceDeletion"},},},launch:function(){adminController=this;this.getDataSourceUpload().on({success:function(a){if(a.error==undefined){ReplayAnalytics.app.currentUploadingDataSource=a.dataSource;adminController.getDataSourceUploadMessage().setHtml(a.description);adminController.getDoneDataSourceUploadButton().show()}else{Ext.Msg.alert("Error",a.description,Ext.emptyFn)}},failure:function(){Ext.Msg.alert("Error","Data source upload was failed.",Ext.emptyFn)},})},showDataSourceUploadFlow:function(){this.getDataSourceUploadPanel().show();this.getDoneDataSourceUploadButton().hide()},setSelectedFileName:function(a){this.getSelectedFileNameLabel().setHtml("<b>Selected File:</b>  "+a)},cancelDataSourceUpload:function(){this.getDataSourceUploadPanel().hide()},doneDataSourceUpload:function(){this.getDataSourceUploadPanel().hide();this.getDataSourceUploadMessage().setHtml("");this.getSelectedFileNameLabel().setHtml("");this.getDataSourceConfigurationPanel().show();var a=undefined;if(ReplayAnalytics.app.currentUploadingDataSource!=undefined){a=ReplayAnalytics.app.currentUploadingDataSource.databaseTableFields}if(a!=undefined){for(var b=0;b<a.length;b++){var c=a[b];adminController.addDataSourceFieldRow(b,c.fieldName,c.fieldLabel,c.fieldType,c.fieldSelection,c.fieldCalculation,true)}}},addHeaderRow:function(){var a=this.getDataSourceTableFieldContainer();a.add({xtype:"panel",docked:"top",style:"background-color: rgb(230, 230, 230); padding: 10px;",layout:{type:"hbox",pack:"start",align:"justify"},items:[{xtype:"label",html:"Field Name",style:"padding: 5px; background-color: rgb(230, 230, 230); font-size: 16px; font-weight: bold;",width:250,},{xtype:"label",html:"Type",style:"padding: 5px; background-color: rgb(230, 230, 230); font-size: 16px; font-weight: bold;",width:350,},]})},addDataSourceField:function(){var b=this.getDataSourceTableFieldContainer();this.addDataSourceFieldRow(b.getItems().items.length-1,"","","IGNORE","","",false);var a=this.getDataSourceConfigurationPanel().getScrollable().getScroller();if(a!=undefined){a.refresh();a.scrollToEnd(false)}},addDataSourceFieldRow:function(f,h,a,e,c,d,g){var b=this.getDataSourceTableFieldContainer();var l=b.add({xtype:"panel",id:"field"+f,style:"padding: 10px; background-color: rgb(235, 235, 235);",layout:{type:"hbox",pack:"start",align:"justify"},});l.add({xtype:"textfield",id:"fieldname"+f,value:h,readOnly:g,hidden:true,style:"padding: 5px; background-color: #f7f7f7; font-size: 15px; border-radius: 5px;",clearIcon:false,});l.add({xtype:"textfield",id:"fieldlabel"+f,value:a,style:"padding: 5px; background-color: rgb(235, 235, 235); font-size: 15px; border-radius: 5px;",clearIcon:false,width:290,});l.add({xtype:"selectfield",id:"fieldtype"+f,value:e,style:"padding: 5px; background-color: rgb(235, 235, 235); font-size: 15px; border-radius: 5px;",width:290,options:[{text:"Time Field",value:"TIME_FIELD"},{text:"Data Field",value:"DATA_FIELD"},{text:"Category Field",value:"CATEGORY_FIELD"},{text:"Ignore",value:"IGNORE"}],});l.add({xtype:"textfield",id:"fieldselection"+f,value:c,hidden:true,style:"padding: 5px; background-color: #f7f7f7; font-size: 15px; border-radius: 5px;",clearIcon:false,});l.add({xtype:"textfield",id:"fieldcalculation"+f,value:d,hidden:true,style:"padding: 5px; background-color: #f7f7f7; font-size: 15px; border-radius: 5px;",clearIcon:false,})},cancelDataSourceConfiguration:function(){Ext.Msg.confirm("Confirm","Are you sure you want to cancel data source configuration?",function(a){if(a=="yes"){showLoadingMask();Ext.Ajax.request({url:"cancelDataSourceConfiguration.do",method:"POST",params:{dataSourceId:ReplayAnalytics.app.currentUploadingDataSource.id,},success:function(b){hideLoadingMask();adminController.getDataSourceConfigurationPanel().hide();adminController.getApplication().getController("Settings").getSettingsPanel().show();adminController.getApplication().getController("DatabaseTable").getDatabaseSetting().setValue("none");ReplayAnalytics.app.CachedDatabaseTables=new Array();adminController.getApplication().getController("DatabaseTable").getAllDatabaseTables()},failure:function(b){hideLoadingMask();logMessage("Failure cancelling dataSource configuration.")},})}})},doneDataSourceConfigure:function(){var f=this.getDataSourceNameField().getValue();if(f!=undefined&&f!=""&&f!=" "){var c=undefined;if(ReplayAnalytics.app.currentUploadingDataSource!=undefined){c=ReplayAnalytics.app.currentUploadingDataSource.databaseTableFields}if(c!=undefined){var a=this.getDataSourceTableFieldContainer();for(var d=0;d<c.length;d++){c[d].fieldName=Ext.ComponentQuery.query("textfield[id=fieldname"+d+"]")[0].getValue();c[d].fieldLabel=Ext.ComponentQuery.query("textfield[id=fieldlabel"+d+"]")[0].getValue();c[d].fieldType=Ext.ComponentQuery.query("selectfield[id=fieldtype"+d+"]")[0].getValue();c[d].fieldSelection=Ext.ComponentQuery.query("textfield[id=fieldselection"+d+"]")[0].getValue();c[d].fieldCalculation=Ext.ComponentQuery.query("textfield[id=fieldcalculation"+d+"]")[0].getValue()}if(a.getItems().items.length>(d)){for(;d<(a.getItems().items.length);d++){var b=new Object();b.id=undefined;b.fieldName=Ext.ComponentQuery.query("textfield[id=fieldname"+d+"]")[0].getValue();b.fieldLabel=Ext.ComponentQuery.query("textfield[id=fieldlabel"+d+"]")[0].getValue();b.fieldType=Ext.ComponentQuery.query("selectfield[id=fieldtype"+d+"]")[0].getValue();b.fieldSelection=Ext.ComponentQuery.query("textfield[id=fieldselection"+d+"]")[0].getValue();b.fieldCalculation=Ext.ComponentQuery.query("textfield[id=fieldcalculation"+d+"]")[0].getValue();c.push(b)}}var e=JSON.stringify(c);this.saveDataSourceConfiguration(f,e)}}else{Ext.Msg.alert("Error","Please provide a data source name.",Ext.emptyFn);return}},saveDataSourceConfiguration:function(b,a){showLoadingMask();Ext.Ajax.request({url:"saveDataSourceConfiguration.do",method:"POST",params:{userId:ReplayAnalytics.app.currentUserSession.userId,dataSourceId:ReplayAnalytics.app.currentUploadingDataSource.id,dataSourceName:b,tableFields:a,},success:this.handleDataSourceConfigurationSave,failure:function(c){hideLoadingMask();logMessage("Failure Saving dataSource configuration.")},})},handleDataSourceConfigurationSave:function(a){var b=Ext.JSON.decode(a.responseText);if(b.error!=undefined){Ext.Msg.alert("Error",b.description,Ext.emptyFn)}else{Ext.Msg.alert("Success",b.description,function(){adminController.getDataSourceConfigurationPanel().hide();adminController.getApplication().getController("DatabaseTable").getDatabaseSetting().setValue("none");ReplayAnalytics.app.CachedDatabaseTables=new Array();var c=adminController.getDataSourceTableFieldContainer();c.removeAll();adminController.getDataSourceNameField().setValue("")})}hideLoadingMask()},showManageDataSourcePanel:function(){adminController.getApplication().getController("Settings").getGlobalSettingsPanel().hide();adminController.getDataSourceManagePanel().show()},addDataSourceManagePanel:function(){adminController.getDataSourceManagePanel().hide();adminController.showDataSourceUploadFlow()},deleteDataSourceManagePanel:function(){adminController.getDataSourceManagePanel().hide();showLoadingMask();Ext.Ajax.request({url:"getAllConfiguredDataSources.do",method:"GET",success:function(b){hideLoadingMask();var d=Ext.JSON.decode(b.responseText);if(d!=undefined){if(d.length==0){Ext.Msg.alert("Error","There are no Data Source(s) configured.",function(){adminController.getDataSourceManagePanel().show()})}else{var a=adminController.getDataSourceDeletePanelContainer();var c=Ext.create("Ext.List",{xtype:"list",id:"datasourcedeletepanellist",ui:"round",flex:1,disableSelection:true,itemTpl:'<div class="x-field-checkbox x-field x-label-align-left x-form-label-nowrap x-field-labeled x-layout-box-item x-stretched" style="background-color: rgb(247, 247, 247);"> <div class="x-form-label" style="width: 80% !important;"> <span>{dataSourceName}</span> </div> <div class="x-component-outer" > <div class="x-unsized x-field-input sencha-clear-icon"> <input class="x-input-el x-input-checkbox" type="checkbox"> <div class="x-field-mask"> </div> </div> </div> </div>',store:{fields:["id","dataSourceName","isChecked"],data:d}});c.on("itemtap",function(m,g,l,f,o,h){var n,p=l.bodyElement.down("input").dom;if(o.target.tagName.toUpperCase()!="INPUT"){p.checked=!p.checked;n=p.checked}else{n=!p.checked}f.data.isChecked=n});a.add(c);adminController.getDataSourceDeletePanel().show()}}},failure:function(a){hideLoadingMask();logMessage("Failure getting all configured DataSources.")},})},editDataSourceManagePanel:function(){},closeDataSourceManagePanel:function(){adminController.getDataSourceManagePanel().hide()},cancelDataSourceDeletePanel:function(){adminController.getDataSourceDeletePanel().hide();adminController.getDataSourceManagePanel().show();var a=adminController.getDataSourceDeletePanelContainer();a.removeAll()},confirmDataSourceDeletion:function(){var d=d=Ext.ComponentQuery.query("list[id=datasourcedeletepanellist]")[0];var b=new Array();if(d!=undefined){var c=d.getStore().getData().all;for(var a=0;a<c.length;a++){if(c[a].data.isChecked){b.push(c[a].data.id)}}}Ext.Msg.confirm("Confirm","Are you sure you want to delete selected Data Source(s)?",function(e){if(e=="yes"){showLoadingMask();Ext.Ajax.request({url:"deleteDataSources.do",method:"POST",params:{dataSourceIds:new Array(b),},success:function(f){hideLoadingMask();var g=Ext.JSON.decode(f.responseText);Ext.Msg.alert("ReplayAnalytics",g.description,function(){adminController.getDataSourceDeletePanel().hide();adminController.getDataSourceManagePanel().show();var h=adminController.getDataSourceDeletePanelContainer();h.removeAll();adminController.getApplication().getController("DatabaseTable").getDatabaseSetting().setValue("none");ReplayAnalytics.app.CachedDatabaseTables=new Array()})},failure:function(f){hideLoadingMask();logMessage("Failure deleting DataSources.")},})}})},});Ext.define("ReplayAnalytics.controller.Radar",{extend:"Ext.app.Controller",xtype:"radarcontroller",config:{refs:{loginController:"logincontroller",mainController:"maincontroller",},},launch:function(){},createRadarChart:function(b,e,a,c){var d=ReplayAnalytics.app.newChart[ReplayAnalytics.app.currentActivePanelIndex];if(d!=undefined){if(d.getLegend()!=undefined){d.getLegend().destroy()}d.destroy()}ReplayAnalytics.app.newChart[ReplayAnalytics.app.currentActivePanelIndex]=Ext.create("Ext.chart.PolarChart",{id:"chart"+ReplayAnalytics.app.currentActivePanelIndex,store:b,flex:1,interactions:["rotate"],innerPadding:{top:15,left:0,right:0,bottom:25},axes:[{type:"numeric",position:"radial",fields:e,grid:true,style:{estStepSize:20},label:{fill:"black",}},{type:"category",position:"angular",fields:a,grid:true,style:{estStepSize:2},label:{fill:"black"}}],series:[{type:"radar",xField:a,yField:e,style:{fillStyle:"rgba(0,255,0,0.2)",strokeStyle:"rgba(0,0,0,0.8)",lineWidth:1}}],})},});Ext.define("ReplayAnalytics.controller.AreaBar",{extend:"Ext.app.Controller",xtype:"areabarcontroller",config:{refs:{loginController:"logincontroller",mainController:"maincontroller",}},launch:function(){},createAreaChart:function(a,c,b){var d=ReplayAnalytics.app.newChart[ReplayAnalytics.app.currentActivePanelIndex];if(d!=undefined){if(d.getLegend()!=undefined){d.getLegend().destroy()}d.destroy()}if(b==undefined){this.createAreaChartGroupByNone(a,c)}else{ReplayAnalytics.app.groupByValueBar=new Array();for(i=0;i<b.length;i++){ReplayAnalytics.app.groupByValueBar[i]="groupByBar"+(i+1)}if(b.length!=0&&b[b.length-1]!="other"){b[b.length]="Other";ReplayAnalytics.app.groupByValueBar[ReplayAnalytics.app.groupByValueBar]="Other"}if(b.length==2){this.createAreaChartGroupBy1(a,c,b)}else{if(b.length==3){this.createAreaChartGroupBy2(a,c,b)}else{if(b.length==4){this.createAreaChartGroupBy3(a,c,b)}else{if(b.length==5){this.createAreaChartGroupBy4(a,c,b)}}}}}},createAreaChartGroupByNone:function(a,b){ReplayAnalytics.app.newChart[ReplayAnalytics.app.currentActivePanelIndex]=Ext.create("Ext.chart.CartesianChart",{id:"chart"+ReplayAnalytics.app.currentActivePanelIndex,flex:1,store:a,shadow:true,insetPadding:{top:15,left:0,right:0,bottom:25},animate:{duration:ReplayAnalytics.app.animateSpeed,delay:ReplayAnalytics.app.animateSpeed/2,easing:"ease"},innerPadding:{top:15,left:0,right:0,bottom:25},interactions:["panzoom"],legend:{position:"right",},axes:[{type:"numeric",position:"left",style:{strokeStyle:"black",shadowColor:"black",},label:{fontFamily:"Helvetica",color:"#4270A2"},fields:ReplayAnalytics.app.dataFieldValues[ReplayAnalytics.app.currentActivePanelIndex],minimum:0,maximum:ReplayAnalytics.app.Ymax[ReplayAnalytics.app.currentActivePanelIndex],title:{text:ReplayAnalytics.app.dataFieldValues[ReplayAnalytics.app.currentActivePanelIndex],strokeStyle:"#4270A2",fillStyle:"#4270A2",shadowColor:"black",},},{type:"category",position:"bottom",label:{fontFamily:"Helvetica",color:"#4270A2"},fields:ReplayAnalytics.app.categoryFieldValues[ReplayAnalytics.app.currentActivePanelIndex],style:{strokeStyle:"black",shadowColor:"black",},title:{text:ReplayAnalytics.app.categoryFieldValues[ReplayAnalytics.app.currentActivePanelIndex],strokeStyle:"#4270A2",fillStyle:"#4270A2",shadowColor:"black",},}],series:[{type:"area",xField:ReplayAnalytics.app.categoryFieldValues[ReplayAnalytics.app.currentActivePanelIndex],yField:ReplayAnalytics.app.dataFieldValues[ReplayAnalytics.app.currentActivePanelIndex],axis:"bottom",highlight:true,showInLegend:false,shadow:true,animate:{duration:ReplayAnalytics.app.animateSpeed,delay:ReplayAnalytics.app.animateSpeed/2,easing:"ease"},style:{stroke:"black",fillOpacity:0.8,smooth:true,},subStyle:{fill:["#115fa6"]}}]})},createAreaChartGroupBy1:function(a,c,b){ReplayAnalytics.app.newChart[ReplayAnalytics.app.currentActivePanelIndex]=Ext.create("Ext.chart.CartesianChart",{id:"chart"+ReplayAnalytics.app.currentActivePanelIndex,flex:1,store:a,shadow:true,insetPadding:{top:15,left:0,right:0,bottom:25},interactions:["panzoom"],legend:{position:"right"},animate:{duration:ReplayAnalytics.app.animateSpeed,delay:ReplayAnalytics.app.animateSpeed/2,easing:"ease"},axes:[{type:"numeric",position:"left",style:{strokeStyle:"black",shadowColor:"black",},label:{fontFamily:"Helvetica",color:"#4270A2"},minimum:0,maximum:ReplayAnalytics.app.Ymax[ReplayAnalytics.app.currentActivePanelIndex],title:{text:ReplayAnalytics.app.dataFieldValues[ReplayAnalytics.app.currentActivePanelIndex],strokeStyle:"#4270A2",fillStyle:"#4270A2",shadowColor:"black",},},{type:"category",position:"bottom",label:{fontFamily:"Helvetica",color:"#4270A2"},fields:ReplayAnalytics.app.categoryFieldValues[ReplayAnalytics.app.currentActivePanelIndex],style:{strokeStyle:"black",shadowColor:"black",},title:{text:ReplayAnalytics.app.categoryFieldValues[ReplayAnalytics.app.currentActivePanelIndex],strokeStyle:"#4270A2",fillStyle:"#4270A2",shadowColor:"black",},}],series:[{type:"area",xField:ReplayAnalytics.app.categoryFieldValues[ReplayAnalytics.app.currentActivePanelIndex],yField:ReplayAnalytics.app.groupByValueBar[0],title:b[0],axis:"bottom",highlight:true,showInLegend:true,shadow:true,animate:{duration:ReplayAnalytics.app.animateSpeed,delay:ReplayAnalytics.app.animateSpeed/2,easing:"ease"},style:{stroke:"black",fillOpacity:0.8,smooth:true,},subStyle:{fill:["#115fa6"]},},{type:"area",xField:ReplayAnalytics.app.categoryFieldValues[ReplayAnalytics.app.currentActivePanelIndex],yField:ReplayAnalytics.app.groupByValueBar[1],title:b[1],axis:"bottom",highlight:true,showInLegend:true,shadow:true,animate:{duration:ReplayAnalytics.app.animateSpeed,delay:ReplayAnalytics.app.animateSpeed/2,easing:"ease"},style:{stroke:"black",fillOpacity:0.8,smooth:true,},subStyle:{fill:["#94ae0a"]},},]})},createAreaChartGroupBy2:function(a,c,b){ReplayAnalytics.app.newChart[ReplayAnalytics.app.currentActivePanelIndex]=Ext.create("Ext.chart.CartesianChart",{id:"chart"+ReplayAnalytics.app.currentActivePanelIndex,flex:1,store:a,shadow:true,insetPadding:{top:15,left:0,right:0,bottom:25},interactions:["panzoom"],legend:{position:"right",},animate:{duration:ReplayAnalytics.app.animateSpeed,delay:ReplayAnalytics.app.animateSpeed/2,easing:"ease"},axes:[{type:"numeric",position:"left",style:{strokeStyle:"black",shadowColor:"black",},label:{fontFamily:"Helvetica",color:"#4270A2"},minimum:0,maximum:ReplayAnalytics.app.Ymax[ReplayAnalytics.app.currentActivePanelIndex],title:{text:ReplayAnalytics.app.dataFieldValues[ReplayAnalytics.app.currentActivePanelIndex],strokeStyle:"#4270A2",fillStyle:"#4270A2",shadowColor:"black",},},{type:"category",position:"bottom",label:{fontFamily:"Helvetica",color:"#4270A2"},fields:ReplayAnalytics.app.categoryFieldValues[ReplayAnalytics.app.currentActivePanelIndex],style:{strokeStyle:"black",shadowColor:"black",},title:{text:ReplayAnalytics.app.categoryFieldValues[ReplayAnalytics.app.currentActivePanelIndex],strokeStyle:"#4270A2",fillStyle:"#4270A2",shadowColor:"black",},}],series:[{type:"area",xField:ReplayAnalytics.app.categoryFieldValues[ReplayAnalytics.app.currentActivePanelIndex],yField:ReplayAnalytics.app.groupByValueBar[0],title:b[0],axis:"bottom",highlight:true,showInLegend:true,shadow:true,animate:{duration:ReplayAnalytics.app.animateSpeed,delay:ReplayAnalytics.app.animateSpeed/2,easing:"ease"},style:{stroke:"black",fillOpacity:0.8,smooth:true,},subStyle:{fill:["#115fa6"]},},{type:"area",xField:ReplayAnalytics.app.categoryFieldValues[ReplayAnalytics.app.currentActivePanelIndex],yField:ReplayAnalytics.app.groupByValueBar[1],title:b[1],axis:"bottom",highlight:true,showInLegend:true,shadow:true,animate:{duration:ReplayAnalytics.app.animateSpeed,delay:ReplayAnalytics.app.animateSpeed/2,easing:"ease"},style:{stroke:"black",fillOpacity:0.8,smooth:true,},subStyle:{fill:["#94ae0a"]},},{type:"area",xField:ReplayAnalytics.app.categoryFieldValues[ReplayAnalytics.app.currentActivePanelIndex],yField:ReplayAnalytics.app.groupByValueBar[2],title:b[2],axis:"bottom",highlight:true,showInLegend:true,shadow:true,animate:{duration:ReplayAnalytics.app.animateSpeed,delay:ReplayAnalytics.app.animateSpeed/2,easing:"ease"},style:{stroke:"black",fillOpacity:0.8,smooth:true,},subStyle:{fill:["#a61120"]},},]})},createAreaChartGroupBy3:function(a,c,b){ReplayAnalytics.app.newChart[ReplayAnalytics.app.currentActivePanelIndex]=Ext.create("Ext.chart.CartesianChart",{id:"chart"+ReplayAnalytics.app.currentActivePanelIndex,flex:1,store:a,shadow:true,insetPadding:{top:15,left:0,right:0,bottom:25},interactions:["panzoom"],animate:{duration:ReplayAnalytics.app.animateSpeed,delay:ReplayAnalytics.app.animateSpeed/2,easing:"ease"},legend:{position:"right",},axes:[{type:"numeric",position:"left",style:{strokeStyle:"black",shadowColor:"black",},label:{fontFamily:"Helvetica",color:"#4270A2"},minimum:0,maximum:ReplayAnalytics.app.Ymax[ReplayAnalytics.app.currentActivePanelIndex],title:{text:ReplayAnalytics.app.dataFieldValues[ReplayAnalytics.app.currentActivePanelIndex],strokeStyle:"#4270A2",fillStyle:"#4270A2",shadowColor:"black",},},{type:"category",position:"bottom",label:{fontFamily:"Helvetica",color:"#4270A2"},fields:ReplayAnalytics.app.categoryFieldValues[ReplayAnalytics.app.currentActivePanelIndex],style:{strokeStyle:"black",shadowColor:"black",},title:{text:ReplayAnalytics.app.categoryFieldValues[ReplayAnalytics.app.currentActivePanelIndex],strokeStyle:"#4270A2",fillStyle:"#4270A2",shadowColor:"black",},}],series:[{type:"area",xField:ReplayAnalytics.app.categoryFieldValues[ReplayAnalytics.app.currentActivePanelIndex],yField:ReplayAnalytics.app.groupByValueBar[0],title:b[0],axis:"bottom",highlight:true,showInLegend:true,shadow:true,animate:{duration:ReplayAnalytics.app.animateSpeed,delay:ReplayAnalytics.app.animateSpeed/2,easing:"ease"},style:{stroke:"black",fillOpacity:0.8,smooth:true,},subStyle:{fill:["#115fa6"]},},{type:"area",xField:ReplayAnalytics.app.categoryFieldValues[ReplayAnalytics.app.currentActivePanelIndex],yField:ReplayAnalytics.app.groupByValueBar[1],title:b[1],axis:"bottom",highlight:true,showInLegend:true,shadow:true,animate:{duration:ReplayAnalytics.app.animateSpeed,delay:ReplayAnalytics.app.animateSpeed/2,easing:"ease"},style:{stroke:"black",fillOpacity:0.8,smooth:true,},subStyle:{fill:["#94ae0a"]},},{type:"area",xField:ReplayAnalytics.app.categoryFieldValues[ReplayAnalytics.app.currentActivePanelIndex],yField:ReplayAnalytics.app.groupByValueBar[2],title:b[2],axis:"bottom",highlight:true,showInLegend:true,shadow:true,animate:{duration:ReplayAnalytics.app.animateSpeed,delay:ReplayAnalytics.app.animateSpeed/2,easing:"ease"},style:{stroke:"black",fillOpacity:0.8,smooth:true,},subStyle:{fill:["#a61120"]},},{type:"area",xField:ReplayAnalytics.app.categoryFieldValues[ReplayAnalytics.app.currentActivePanelIndex],yField:ReplayAnalytics.app.groupByValueBar[3],title:b[3],axis:"bottom",highlight:true,showInLegend:true,shadow:true,animate:{duration:ReplayAnalytics.app.animateSpeed,delay:ReplayAnalytics.app.animateSpeed/2,easing:"ease"},style:{stroke:"black",fillOpacity:0.8,smooth:true,},subStyle:{fill:["#ff8809"]},},]})},createAreaChartGroupBy4:function(a,c,b){ReplayAnalytics.app.newChart[ReplayAnalytics.app.currentActivePanelIndex]=Ext.create("Ext.chart.CartesianChart",{id:"chart"+ReplayAnalytics.app.currentActivePanelIndex,flex:1,store:a,shadow:true,insetPadding:{top:15,left:0,right:0,bottom:25},interactions:["panzoom"],legend:{position:"right",},animate:{duration:ReplayAnalytics.app.animateSpeed,delay:ReplayAnalytics.app.animateSpeed/2,easing:"ease"},axes:[{type:"numeric",position:"left",style:{strokeStyle:"black",},label:{fontFamily:"Helvetica",color:"#4270A2"},fields:b,minimum:0,maximum:ReplayAnalytics.app.Ymax[ReplayAnalytics.app.currentActivePanelIndex],title:{text:ReplayAnalytics.app.dataFieldValues[ReplayAnalytics.app.currentActivePanelIndex],strokeStyle:"#4270A2",fillStyle:"#4270A2",shadowColor:"black",},},{type:"category",position:"bottom",label:{fontFamily:"Helvetica",color:"#4270A2"},fields:ReplayAnalytics.app.categoryFieldValues[ReplayAnalytics.app.currentActivePanelIndex],style:{strokeStyle:"black",shadowColor:"black",},title:{text:ReplayAnalytics.app.categoryFieldValues[ReplayAnalytics.app.currentActivePanelIndex],strokeStyle:"#4270A2",fillStyle:"#4270A2",shadowColor:"black",},}],series:[{type:"area",xField:ReplayAnalytics.app.categoryFieldValues[ReplayAnalytics.app.currentActivePanelIndex],yField:ReplayAnalytics.app.groupByValueBar[0],title:b[0],axis:"bottom",highlight:true,showInLegend:true,shadow:true,animate:{duration:ReplayAnalytics.app.animateSpeed,delay:ReplayAnalytics.app.animateSpeed/2,easing:"ease"},style:{stroke:"black",fillOpacity:0.8,smooth:true,},subStyle:{fill:["#115fa6"]},},{type:"area",xField:ReplayAnalytics.app.categoryFieldValues[ReplayAnalytics.app.currentActivePanelIndex],yField:ReplayAnalytics.app.groupByValueBar[1],title:b[1],axis:"bottom",highlight:true,showInLegend:true,shadow:true,animate:{duration:ReplayAnalytics.app.animateSpeed,delay:ReplayAnalytics.app.animateSpeed/2,easing:"ease"},style:{stroke:"black",fillOpacity:0.8,smooth:true,},subStyle:{fill:["#94ae0a"]},},{type:"area",xField:ReplayAnalytics.app.categoryFieldValues[ReplayAnalytics.app.currentActivePanelIndex],yField:ReplayAnalytics.app.groupByValueBar[2],title:b[2],axis:"bottom",highlight:true,showInLegend:true,shadow:true,animate:{duration:ReplayAnalytics.app.animateSpeed,delay:ReplayAnalytics.app.animateSpeed/2,easing:"ease"},style:{stroke:"black",fillOpacity:0.8,smooth:true,},subStyle:{fill:["#a61120"]},},{type:"area",xField:ReplayAnalytics.app.categoryFieldValues[ReplayAnalytics.app.currentActivePanelIndex],yField:ReplayAnalytics.app.groupByValueBar[3],title:b[3],axis:"bottom",highlight:true,showInLegend:true,shadow:true,animate:{duration:ReplayAnalytics.app.animateSpeed,delay:ReplayAnalytics.app.animateSpeed/2,easing:"ease"},style:{stroke:"black",fillOpacity:0.8,smooth:true,},subStyle:{fill:["#ff8809"]},},{type:"area",xField:ReplayAnalytics.app.categoryFieldValues[ReplayAnalytics.app.currentActivePanelIndex],yField:ReplayAnalytics.app.groupByValueBar[4],title:b[4],axis:"bottom",highlight:true,showInLegend:true,shadow:true,animate:{duration:ReplayAnalytics.app.animateSpeed,delay:ReplayAnalytics.app.animateSpeed/2,easing:"ease"},style:{stroke:"black",fillOpacity:0.8,smooth:true,},subStyle:{fill:["#ffd13e"]},},]})},});Ext.define("ReplayAnalytics.store.TempStore",{extend:"Ext.data.Store",requires:["ReplayAnalytics.model.DataModel"],config:{model:"ReplayAnalytics.model.DataModel",proxy:{type:"localstorage",id:"tempstore"}}});Ext.define("ReplayAnalytics.store.UserSettings4",{extend:"Ext.data.Store",requires:["ReplayAnalytics.model.UserSettings"],config:{model:"ReplayAnalytics.model.UserSettings",proxy:{type:"localstorage",id:"usersettings4"}}});Ext.define("ReplayAnalytics.store.UserSettings3",{extend:"Ext.data.Store",requires:["ReplayAnalytics.model.UserSettings"],config:{model:"ReplayAnalytics.model.UserSettings",proxy:{type:"localstorage",id:"usersettings3"}}});Ext.define("ReplayAnalytics.store.UserSettings2",{extend:"Ext.data.Store",requires:["ReplayAnalytics.model.UserSettings"],config:{model:"ReplayAnalytics.model.UserSettings",proxy:{type:"localstorage",id:"usersettings2"}}});Ext.define("ReplayAnalytics.view.BottomPlaybackToolbar",{extend:"Ext.Toolbar",xtype:"bottomplaybacktoolbar",requires:["Ext.Toolbar","ReplayAnalytics.view.Slider0","ReplayAnalytics.view.Slider1","ReplayAnalytics.view.Slider2","ReplayAnalytics.view.Slider3","ReplayAnalytics.view.Slider4",],config:{docked:"bottom",height:"55px",layout:{type:"hbox",pack:"center",align:"middle"},items:[{xtype:"spacer",width:"10px"},{xtype:"button",id:"ResetBackwardButton",iconCls:"resetbackward",},{xtype:"button",id:"StepBackwardButton",delay:0,iconCls:"stepbackward",},{xtype:"button",id:"PlayBackwardButton",delay:0,iconCls:"playbackward",},{xtype:"button",id:"PauseButton",delay:0,iconCls:"pause",},{xtype:"button",id:"PlayForwardButton",delay:0,iconCls:"play",},{xtype:"button",id:"StepForwardButton",delay:0,iconCls:"stepforward",},{xtype:"button",id:"ResetForwardButton",iconCls:"resetforward",},{xtype:"spacer",width:"10px"},{xtype:"slider0"},{xtype:"slider1"},{xtype:"slider2"},{xtype:"slider3"},{xtype:"slider4"},{xtype:"spacer",width:"10px"},{xtype:"container",id:"daterangelabel",},{xtype:"segmentedbutton",id:"globalsynctogglebutton",allowDepress:true,items:[{text:"Play All",pressed:false,id:"globalsyncon",iconCls:"sync",},]},]}});Ext.define("ReplayAnalytics.store.UserSettings1",{extend:"Ext.data.Store",requires:["ReplayAnalytics.model.UserSettings"],config:{model:"ReplayAnalytics.model.UserSettings",proxy:{type:"localstorage",id:"usersettings1"}}});Ext.define("ReplayAnalytics.view.TopTwoPanelLayout",{extend:"Ext.Panel",xtype:"toptwopanellayout",requires:["ReplayAnalytics.view.Panel1","ReplayAnalytics.view.Panel2"],config:{layout:{type:"hbox",pack:"center",align:"stretch"},flex:1,style:"background-color: white; color:white",items:[{xtype:"panel1"},{xtype:"panel2"}]}});Ext.define("ReplayAnalytics.view.BottomTwoPanelLayout",{extend:"Ext.Panel",xtype:"bottomtwopanellayout",requires:["ReplayAnalytics.view.Panel3","ReplayAnalytics.view.Panel4",],config:{layout:"hbox",flex:1,style:"background-color: white; color:white",items:[{xtype:"panel3"},{xtype:"panel4"}]}});Ext.define("ReplayAnalytics.view.FourPanelLayout",{extend:"Ext.Panel",xtype:"fourpanellayout",requires:["ReplayAnalytics.view.TopTwoPanelLayout","ReplayAnalytics.view.BottomTwoPanelLayout"],config:{layout:{type:"vbox",},autoShow:true,id:"fourpanellayout",style:"margin:10px; border-radius:10px;",align:"stretch",flex:1,items:[{xtype:"toptwopanellayout"},{xtype:"bottomtwopanellayout"}]}});Ext.define("ReplayAnalytics.view.InterestingMomentGraphPanel",{extend:"Ext.Panel",xtype:"interestingmomentgraphpanel",requires:["Ext.Toolbar",],config:{layout:"vbox",modal:true,zIndex:10,hideOnMaskTap:true,centered:true,width:700,height:600,hidden:true,items:[{xtype:"toolbar",maxHeight:"50px",id:"imgraphtitlebar",docked:"top",flex:"1",title:"Interesting Moment",width:"100%",},{xtype:"chart",id:"chart5",},{xtype:"toolbar",docked:"bottom",layout:{type:"hbox",pack:"justify"},items:[{xtype:"button",id:"replayinterestingmomentbutton",text:"Show Replay Graph",iconCls:"refresh5",align:"left",},{xtype:"button",id:"showtrendgraphbutton",text:"Back",iconCls:"reply",align:"left",hidden:true,},{xtype:"button",id:"previousinterestingmomentbutton",text:"Previous",iconCls:"arrow_left",align:"left",disabled:true,},{xtype:"button",id:"nextinterestingmomentbutton",text:"Next",iconCls:"arrow_right",align:"left",},{xtype:"slider5",align:"center",},{xtype:"button",id:"closeinterestingmomentgraphpanelbutton",html:"Close",iconCls:"delete",ui:"action",align:"right",}]}]}});Ext.define("ReplayAnalytics.view.Main",{extend:"Ext.Container",xtype:"replayanalyticsmain",requires:["ReplayAnalytics.view.TitleBar","ReplayAnalytics.view.FourPanelLayout","ReplayAnalytics.view.BottomPlaybackToolbar"],config:{fullscreen:true,hidden:true,style:"background: white;",layout:{type:"vbox"},items:[{docked:"top",xtype:"replayanalyticstitlebar"},{xtype:"fourpanellayout"},{docked:"bottom",xtype:"bottomplaybacktoolbar"}]},});
